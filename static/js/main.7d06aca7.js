/*! For license information please see main.7d06aca7.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),o=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}var c=Symbol.for("react.element"),l=Symbol.for("react.transitional.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),p=Symbol.for("react.consumer"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),v=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var k=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var S=Symbol.for("react.memo_cache_sentinel"),I=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function E(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case d:return"Fragment";case u:return"Portal";case f:return"Profiler";case h:return"StrictMode";case v:return"Suspense";case b:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case m:return(e.displayName||"Context")+".Provider";case p:return(e._context.displayName||"Context")+".Consumer";case y:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case w:return null!==(t=e.displayName||null)?t:E(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return E(e(t))}catch(n){}}return null}var _,P,R=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=Object.assign;function N(e){if(void 0===_)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);_=t&&t[1]||"",P=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+_+e+P}var O=!1;function x(e,t){if(!e||O)return"";O=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(o){var r=o}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch((function(){}))}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],s=i[1];if(a&&s){var c=a.split("\n"),l=s.split("\n");for(o=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;o<l.length&&!l[o].includes("DetermineComponentFrameRoot");)o++;if(r===c.length||o===l.length)for(r=c.length-1,o=l.length-1;1<=r&&0<=o&&c[r]!==l[o];)o--;for(;1<=r&&0<=o;r--,o--)if(c[r]!==l[o]){if(1!==r||1!==o)do{if(r--,0>--o||c[r]!==l[o]){var u="\n"+c[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=o);break}}}finally{O=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?N(n):""}function L(e){switch(e.tag){case 26:case 27:case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return e=x(e.type,!1);case 11:return e=x(e.type.render,!1);case 1:return e=x(e.type,!0);default:return""}}function q(e){try{var t="";do{t+=L(e),e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}function U(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function H(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function z(e){if(U(e)!==e)throw Error(a(188))}function F(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=F(e)))return t;e=e.sibling}return null}var D=Array.isArray,B=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},$=[],j=-1;function Q(e){return{current:e}}function W(e){0>j||(e.current=$[j],$[j]=null,j--)}function G(e,t){j++,$[j]=e.current,e.current=t}var V=Q(null),Y=Q(null),J=Q(null),X=Q(null);function Z(e,t){switch(G(J,t),G(Y,e),G(V,null),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)&&(t=t.namespaceURI)?Yu(t):0;break;default:if(t=(e=8===e?t.parentNode:t).tagName,e=e.namespaceURI)t=Ju(e=Yu(e),t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}W(V),G(V,t)}function ee(){W(V),W(Y),W(J)}function te(e){null!==e.memoizedState&&G(X,e);var t=V.current,n=Ju(t,e.type);t!==n&&(G(Y,e),G(V,n))}function ne(e){Y.current===e&&(W(V),W(Y)),X.current===e&&(W(X),qd._currentValue=K)}var re=Object.prototype.hasOwnProperty,oe=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,ae=r.unstable_shouldYield,se=r.unstable_requestPaint,ce=r.unstable_now,le=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,ge=r.unstable_IdlePriority,pe=r.log,me=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof pe&&me(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(Ce(e)/ke|0)|0},Ce=Math.log,ke=Math.LN2;var Se=128,Ie=4194304;function Te(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194176&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=e.warmLanes;e=0!==e.finishedLanes;var s=134217727&n;return 0!==s?0!==(n=s&~o)?r=Te(n):0!==(i&=s)?r=Te(i):e||0!==(a=s&~a)&&(r=Te(a)):0!==(s=n&~o)?r=Te(s):0!==i?r=Te(i):e||0!==(a=n&~a)&&(r=Te(a)),0===r?0:0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(a=t&-t)||32===o&&0!==(4194176&a))?t:r}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function _e(e,t){switch(e){case 1:case 2:case 4:case 8:return t+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Pe(){var e=Se;return 0===(4194176&(Se<<=1))&&(Se=128),e}function Re(){var e=Ie;return 0===(62914560&(Ie<<=1))&&(Ie=4194304),e}function Me(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ne(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Oe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194218&n}function xe(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function Le(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function qe(){var e=B.p;return 0!==e?e:void 0===(e=window.event)?32:Jd(e.type)}var Ue=Math.random().toString(36).slice(2),He="__reactFiber$"+Ue,ze="__reactProps$"+Ue,Fe="__reactContainer$"+Ue,De="__reactEvents$"+Ue,Be="__reactListeners$"+Ue,Ke="__reactHandles$"+Ue,$e="__reactResources$"+Ue,je="__reactMarker$"+Ue;function Qe(e){delete e[He],delete e[ze],delete e[De],delete e[Be],delete e[Ke]}function We(e){var t=e[He];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Fe]||n[He]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=cd(e);null!==e;){if(n=e[He])return n;e=cd(e)}return t}n=(e=n).parentNode}return null}function Ge(e){if(e=e[He]||e[Fe]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Ve(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ye(e){var t=e[$e];return t||(t=e[$e]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Je(e){e[je]=!0}var Xe=new Set,Ze={};function et(e,t){tt(e,t),tt(e+"Capture",t)}function tt(e,t){for(Ze[e]=t,e=0;e<t.length;e++)Xe.add(t[e])}var nt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),rt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ot={},it={};function at(e,t,n){if(o=t,re.call(it,o)||!re.call(ot,o)&&(rt.test(o)?it[o]=!0:(ot[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function st(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ct(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function lt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function pt(e){return e.replace(gt,(function(e){return"\\"+e.charCodeAt(0).toString(16)+" "}))}function mt(e,t,n,r,o,i,a,s){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+lt(t)):e.value!==""+lt(t)&&(e.value=""+lt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,lt(t)):null!=n?vt(e,a,lt(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=i&&(e.defaultChecked=!!i),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+lt(s):e.removeAttribute("name")}function yt(e,t,n,r,o,i,a,s){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+lt(n):"",t=null!=t?""+lt(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:o)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+lt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+lt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+lt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function Ct(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(D(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=lt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function It(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function Tt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&It(e,o,r)}else for(var i in t)t.hasOwnProperty(i)&&It(e,i,t[i])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Et=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_t=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return _t.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var Rt=null;function Mt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Nt=null,Ot=null;function xt(e){var t=Ge(e);if(t&&(e=t.stateNode)){var n=e[ze]||null;e:switch(e=t.stateNode,t.type){case"input":if(mt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[ze]||null;if(!o)throw Error(a(90));mt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Lt=!1;function qt(e,t,n){if(Lt)return e(t,n);Lt=!0;try{return e(t)}finally{if(Lt=!1,(null!==Nt||null!==Ot)&&(Hl(),Nt&&(t=Nt,e=Ot,Ot=Nt=null,xt(t),e)))for(t=0;t<e.length;t++)xt(e[t])}}function Ut(e,t){var n=e.stateNode;if(null===n)return null;var r=n[ze]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ht=!1;if(nt)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(Ch){Ht=!1}var Ft=null,Dt=null,Bt=null;function Kt(){if(Bt)return Bt;var e,t,n=Dt,r=n.length,o="value"in Ft?Ft.value:Ft.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Bt=o.slice(e,1<t?1-t:void 0)}function $t(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function jt(){return!0}function Qt(){return!1}function Wt(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?jt:Qt,this.isPropagationStopped=Qt,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=jt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=jt)},persist:function(){},isPersistent:jt}),t}var Gt,Vt,Yt,Jt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xt=Wt(Jt),Zt=M({},Jt,{view:0,detail:0}),en=Wt(Zt),tn=M({},Zt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yt&&(Yt&&"mousemove"===e.type?(Gt=e.screenX-Yt.screenX,Vt=e.screenY-Yt.screenY):Vt=Gt=0,Yt=e),Gt)},movementY:function(e){return"movementY"in e?e.movementY:Vt}}),nn=Wt(tn),rn=Wt(M({},tn,{dataTransfer:0})),on=Wt(M({},Zt,{relatedTarget:0})),an=Wt(M({},Jt,{animationName:0,elapsedTime:0,pseudoElement:0})),sn=Wt(M({},Jt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Wt(M({},Jt,{data:0})),ln={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},un={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=dn[e])&&!!t[e]}function fn(){return hn}var gn=Wt(M({},Zt,{key:function(e){if(e.key){var t=ln[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=$t(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?un[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fn,charCode:function(e){return"keypress"===e.type?$t(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?$t(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),pn=Wt(M({},tn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),mn=Wt(M({},Zt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fn})),yn=Wt(M({},Jt,{propertyName:0,elapsedTime:0,pseudoElement:0})),vn=Wt(M({},tn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),bn=Wt(M({},Jt,{newState:0,oldState:0})),wn=[9,13,27,32],Cn=nt&&"CompositionEvent"in window,kn=null;nt&&"documentMode"in document&&(kn=document.documentMode);var Sn=nt&&"TextEvent"in window&&!kn,In=nt&&(!Cn||kn&&8<kn&&11>=kn),Tn=String.fromCharCode(32),An=!1;function En(e,t){switch(e){case"keyup":return-1!==wn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Pn=!1;var Rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Rn[e.type]:"textarea"===t}function Nn(e,t,n,r){Nt?Ot?Ot.push(r):Ot=[r]:Nt=r,0<(t=qu(t,"onChange")).length&&(n=new Xt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var On=null,xn=null;function Ln(e){_u(e,0)}function qn(e){if(ht(Ve(e)))return e}function Un(e,t){if("change"===e)return t}var Hn=!1;if(nt){var zn;if(nt){var Fn="oninput"in document;if(!Fn){var Dn=document.createElement("div");Dn.setAttribute("oninput","return;"),Fn="function"===typeof Dn.oninput}zn=Fn}else zn=!1;Hn=zn&&(!document.documentMode||9<document.documentMode)}function Bn(){On&&(On.detachEvent("onpropertychange",Kn),xn=On=null)}function Kn(e){if("value"===e.propertyName&&qn(xn)){var t=[];Nn(t,xn,e,Mt(e)),qt(Ln,t)}}function $n(e,t,n){"focusin"===e?(Bn(),xn=n,(On=t).attachEvent("onpropertychange",Kn)):"focusout"===e&&Bn()}function jn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(xn)}function Qn(e,t){if("click"===e)return qn(t)}function Wn(e,t){if("input"===e||"change"===e)return qn(t)}var Gn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Vn(e,t){if(Gn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!re.call(t,o)||!Gn(e[o],t[o]))return!1}return!0}function Yn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jn(e,t){var n,r=Yn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Yn(r)}}function Xn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Xn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function Zn(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function tr(e,t){var n=Zn(t);t=e.focusedElem;var r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&Xn(t.ownerDocument.documentElement,t)){if(null!==r&&er(t))if(e=r.start,void 0===(n=r.end)&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if((n=(e=t.ownerDocument||document)&&e.defaultView||window).getSelection){n=n.getSelection();var o=t.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!n.extend&&i>r&&(o=r,r=i,i=o),o=Jn(t,i);var a=Jn(t,r);o&&a&&(1!==n.rangeCount||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&((e=e.createRange()).setStart(o.node,o.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}for(e=[],n=t;n=n.parentNode;)1===n.nodeType&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<e.length;t++)(n=e[t]).element.scrollLeft=n.left,n.element.scrollTop=n.top}}var nr=nt&&"documentMode"in document&&11>=document.documentMode,rr=null,or=null,ir=null,ar=!1;function sr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Vn(ir,r)||(ir=r,0<(r=qu(or,"onSelect")).length&&(t=new Xt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lr={animationend:cr("Animation","AnimationEnd"),animationiteration:cr("Animation","AnimationIteration"),animationstart:cr("Animation","AnimationStart"),transitionrun:cr("Transition","TransitionRun"),transitionstart:cr("Transition","TransitionStart"),transitioncancel:cr("Transition","TransitionCancel"),transitionend:cr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!lr[e])return e;var t,n=lr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}nt&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);var fr=hr("animationend"),gr=hr("animationiteration"),pr=hr("animationstart"),mr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,Cr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function kr(e,t){wr.set(e,t),et(t,[e])}var Sr=[],Ir=0,Tr=0;function Ar(){for(var e=Ir,t=Tr=Ir=0;t<e;){var n=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var o=Sr[t];Sr[t++]=null;var i=Sr[t];if(Sr[t++]=null,null!==r&&null!==o){var a=r.pending;null===a?o.next=o:(o.next=a.next,a.next=o),r.pending=o}0!==i&&Rr(n,o,i)}}function Er(e,t,n,r){Sr[Ir++]=e,Sr[Ir++]=t,Sr[Ir++]=n,Sr[Ir++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function _r(e,t,n,r){return Er(e,t,n,r),Mr(e)}function Pr(e,t){return Er(e,null,null,t),Mr(e)}function Rr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(o=!0)),e=i,i=i.return;o&&null!==t&&3===e.tag&&(i=e.stateNode,o=31-we(n),null===(e=(i=i.hiddenUpdates)[o])?i[o]=[t]:e.push(t),t.lane=536870912|n)}function Mr(e){if(50<_l)throw _l=0,Pl=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Nr={},Or=new WeakMap;function xr(e,t){if("object"===typeof e&&null!==e){var n=Or.get(e);return void 0!==n?n:(t={value:e,source:t,stack:q(t)},Or.set(e,t),t)}return{value:e,source:t,stack:q(t)}}var Lr=[],qr=0,Ur=null,Hr=0,zr=[],Fr=0,Dr=null,Br=1,Kr="";function $r(e,t){Lr[qr++]=Hr,Lr[qr++]=Ur,Ur=e,Hr=t}function jr(e,t,n){zr[Fr++]=Br,zr[Fr++]=Kr,zr[Fr++]=Dr,Dr=e;var r=Br;e=Kr;var o=32-we(r)-1;r&=~(1<<o),n+=1;var i=32-we(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Br=1<<32-we(t)+o|n<<o|r,Kr=i+e}else Br=1<<i|n<<o|r,Kr=e}function Qr(e){null!==e.return&&($r(e,1),jr(e,1,0))}function Wr(e){for(;e===Ur;)Ur=Lr[--qr],Lr[qr]=null,Hr=Lr[--qr],Lr[qr]=null;for(;e===Dr;)Dr=zr[--Fr],zr[Fr]=null,Kr=zr[--Fr],zr[Fr]=null,Br=zr[--Fr],zr[Fr]=null}var Gr=null,Vr=null,Yr=!1,Jr=null,Xr=!1,Zr=Error(a(519));function eo(e){throw io(xr(Error(a(418,"")),e)),Zr}function to(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[He]=e,t[ze]=r,n){case"dialog":Pu("cancel",t),Pu("close",t);break;case"iframe":case"object":case"embed":Pu("load",t);break;case"video":case"audio":for(n=0;n<Au.length;n++)Pu(Au[n],t);break;case"source":Pu("error",t);break;case"img":case"image":case"link":Pu("error",t),Pu("load",t);break;case"details":Pu("toggle",t);break;case"input":Pu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Pu("invalid",t);break;case"textarea":Pu("invalid",t),Ct(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Bu(t.textContent,n)?(null!=r.popover&&(Pu("beforetoggle",t),Pu("toggle",t)),null!=r.onScroll&&Pu("scroll",t),null!=r.onScrollEnd&&Pu("scrollend",t),null!=r.onClick&&(t.onclick=Ku),t=!0):t=!1,t||eo(e)}function no(e){for(Gr=e.return;Gr;)switch(Gr.tag){case 3:case 27:return void(Xr=!0);case 5:case 13:return void(Xr=!1);default:Gr=Gr.return}}function ro(e){if(e!==Gr)return!1;if(!Yr)return no(e),Yr=!0,!1;var t,n=!1;if((t=3!==e.tag&&27!==e.tag)&&((t=5===e.tag)&&(t=!("form"!==(t=e.type)&&"button"!==t)||Xu(e.type,e.memoizedProps)),t=!t),t&&(n=!0),n&&Vr&&eo(e),no(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){Vr=sd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}Vr=null}}else Vr=Gr?sd(e.stateNode.nextSibling):null;return!0}function oo(){Vr=Gr=null,Yr=!1}function io(e){null===Jr?Jr=[e]:Jr.push(e)}var ao=Error(a(460)),so=Error(a(474)),co={then:function(){}};function lo(e){return"fulfilled"===(e=e.status)||"rejected"===e}function uo(){}function ho(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(uo,uo),t=n),t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===ao)throw Error(a(483));throw e;default:if("string"===typeof t.status)t.then(uo,uo);else{if(null!==(e=tl)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then((function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}}),(function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}}))}switch(t.status){case"fulfilled":return t.value;case"rejected":if((e=t.reason)===ao)throw Error(a(483));throw e}throw fo=t,ao}}var fo=null;function go(){if(null===fo)throw Error(a(459));var e=fo;return fo=null,e}var po=null,mo=0;function yo(e){var t=mo;return mo+=1,null===po&&(po=[]),ho(po,e,t)}function vo(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function bo(e,t){if(t.$$typeof===c)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wo(e){return(0,e._init)(e._payload)}function Co(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=Uc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=33554434,n):r:(t.flags|=33554434,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=33554434),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n,r){var i=n.type;return i===d?g(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===C&&wo(i)===t.type)?(vo(t=o(t,n.props),n),t.return=e,t):(vo(t=zc(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Kc(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function g(e,t,n,r,i){return null===t||7!==t.tag?((t=Fc(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function p(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return vo(n=zc(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case u:return(t=Kc(t,e.mode,n)).return=e,t;case C:return p(e,t=(0,t._init)(t._payload),n)}if(D(t)||T(t))return(t=Fc(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return p(e,yo(t),n);if(t.$$typeof===m)return p(e,As(e,t),n);bo(e,t)}return null}function y(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==o?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===o?h(e,t,n,r):null;case u:return n.key===o?f(e,t,n,r):null;case C:return y(e,t,n=(o=n._init)(n._payload),r)}if(D(n)||T(n))return null!==o?null:g(e,t,n,r,null);if("function"===typeof n.then)return y(e,t,yo(n),r);if(n.$$typeof===m)return y(e,t,As(e,n),r);bo(e,n)}return null}function v(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case l:return h(t,e=e.get(null===r.key?n:r.key)||null,r,o);case u:return f(t,e=e.get(null===r.key?n:r.key)||null,r,o);case C:return v(e,t,n,r=(0,r._init)(r._payload),o)}if(D(r)||T(r))return g(t,e=e.get(n)||null,r,o,null);if("function"===typeof r.then)return v(e,t,n,yo(r),o);if(r.$$typeof===m)return v(e,t,n,As(t,r),o);bo(t,r)}return null}function b(c,h,f,g){if("object"===typeof f&&null!==f&&f.type===d&&null===f.key&&(f=f.props.children),"object"===typeof f&&null!==f){switch(f.$$typeof){case l:e:{for(var w=f.key;null!==h;){if(h.key===w){if((w=f.type)===d){if(7===h.tag){n(c,h.sibling),(g=o(h,f.props.children)).return=c,c=g;break e}}else if(h.elementType===w||"object"===typeof w&&null!==w&&w.$$typeof===C&&wo(w)===h.type){n(c,h.sibling),vo(g=o(h,f.props),f),g.return=c,c=g;break e}n(c,h);break}t(c,h),h=h.sibling}f.type===d?((g=Fc(f.props.children,c.mode,g,f.key)).return=c,c=g):(vo(g=zc(f.type,f.key,f.props,null,c.mode,g),f),g.return=c,c=g)}return s(c);case u:e:{for(w=f.key;null!==h;){if(h.key===w){if(4===h.tag&&h.stateNode.containerInfo===f.containerInfo&&h.stateNode.implementation===f.implementation){n(c,h.sibling),(g=o(h,f.children||[])).return=c,c=g;break e}n(c,h);break}t(c,h),h=h.sibling}(g=Kc(f,c.mode,g)).return=c,c=g}return s(c);case C:return b(c,h,f=(w=f._init)(f._payload),g)}if(D(f))return function(o,a,s,c){for(var l=null,u=null,d=a,h=a=0,f=null;null!==d&&h<s.length;h++){d.index>h?(f=d,d=null):f=d.sibling;var g=y(o,d,s[h],c);if(null===g){null===d&&(d=f);break}e&&d&&null===g.alternate&&t(o,d),a=i(g,a,h),null===u?l=g:u.sibling=g,u=g,d=f}if(h===s.length)return n(o,d),Yr&&$r(o,h),l;if(null===d){for(;h<s.length;h++)null!==(d=p(o,s[h],c))&&(a=i(d,a,h),null===u?l=d:u.sibling=d,u=d);return Yr&&$r(o,h),l}for(d=r(d);h<s.length;h++)null!==(f=v(d,o,h,s[h],c))&&(e&&null!==f.alternate&&d.delete(null===f.key?h:f.key),a=i(f,a,h),null===u?l=f:u.sibling=f,u=f);return e&&d.forEach((function(e){return t(o,e)})),Yr&&$r(o,h),l}(c,h,f,g);if(T(f)){if("function"!==typeof(w=T(f)))throw Error(a(150));return function(o,s,c,l){if(null==c)throw Error(a(151));for(var u=null,d=null,h=s,f=s=0,g=null,m=c.next();null!==h&&!m.done;f++,m=c.next()){h.index>f?(g=h,h=null):g=h.sibling;var b=y(o,h,m.value,l);if(null===b){null===h&&(h=g);break}e&&h&&null===b.alternate&&t(o,h),s=i(b,s,f),null===d?u=b:d.sibling=b,d=b,h=g}if(m.done)return n(o,h),Yr&&$r(o,f),u;if(null===h){for(;!m.done;f++,m=c.next())null!==(m=p(o,m.value,l))&&(s=i(m,s,f),null===d?u=m:d.sibling=m,d=m);return Yr&&$r(o,f),u}for(h=r(h);!m.done;f++,m=c.next())null!==(m=v(h,o,f,m.value,l))&&(e&&null!==m.alternate&&h.delete(null===m.key?f:m.key),s=i(m,s,f),null===d?u=m:d.sibling=m,d=m);return e&&h.forEach((function(e){return t(o,e)})),Yr&&$r(o,f),u}(c,h,f=w.call(f),g)}if("function"===typeof f.then)return b(c,h,yo(f),g);if(f.$$typeof===m)return b(c,h,As(c,f),g);bo(c,f)}return"string"===typeof f&&""!==f||"number"===typeof f||"bigint"===typeof f?(f=""+f,null!==h&&6===h.tag?(n(c,h.sibling),(g=o(h,f)).return=c,c=g):(n(c,h),(g=Bc(f,c.mode,g)).return=c,c=g),s(c)):n(c,h)}return function(e,t,n,r){try{mo=0;var o=b(e,t,n,r);return po=null,o}catch(a){if(a===ao)throw a;var i=Lc(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var ko=Co(!0),So=Co(!1),Io=Q(null),To=Q(0);function Ao(e,t){G(To,e=ll),G(Io,t),ll=e|t.baseLanes}function Eo(){G(To,ll),G(Io,Io.current)}function _o(){ll=To.current,W(Io),W(To)}var Po=Q(null),Ro=null;function Mo(e){var t=e.alternate;G(Lo,1&Lo.current),G(Po,e),null===Ro&&(null===t||null!==Io.current||null!==t.memoizedState)&&(Ro=e)}function No(e){if(22===e.tag){if(G(Lo,Lo.current),G(Po,e),null===Ro){var t=e.alternate;null!==t&&null!==t.memoizedState&&(Ro=e)}}else Oo()}function Oo(){G(Lo,Lo.current),G(Po,Po.current)}function xo(e){W(Po),Ro===e&&(Ro=null),W(Lo)}var Lo=Q(0);function qo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Uo="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach((function(e){return e()}))}},Ho=r.unstable_scheduleCallback,zo=r.unstable_NormalPriority,Fo={$$typeof:m,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Do(){return{controller:new Uo,data:new Map,refCount:0}}function Bo(e){e.refCount--,0===e.refCount&&Ho(zo,(function(){e.controller.abort()}))}var Ko=null,$o=0,jo=0,Qo=null;function Wo(){if(0===--$o&&null!==Ko){null!==Qo&&(Qo.status="fulfilled");var e=Ko;Ko=null,jo=0,Qo=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Go=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Ko){var n=Ko=[];$o=0,jo=Cu(),Qo={status:"pending",value:void 0,then:function(e){n.push(e)}}}$o++,t.then(Wo,Wo)}(0,t),null!==Go&&Go(e,t)};var Vo=Q(null);function Yo(){var e=Vo.current;return null!==e?e:tl.pooledCache}function Jo(e,t){G(Vo,null===t?Vo.current:t.pool)}function Xo(){var e=Yo();return null===e?null:{parent:Fo._currentValue,pool:e}}var Zo=0,ei=null,ti=null,ni=null,ri=!1,oi=!1,ii=!1,ai=0,si=0,ci=null,li=0;function ui(){throw Error(a(321))}function di(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gn(e[n],t[n]))return!1;return!0}function hi(e,t,n,r,o,i){return Zo=i,ei=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?Aa:Ea,ii=!1,i=n(r,o),ii=!1,oi&&(i=gi(t,n,r,o)),fi(e),i}function fi(e){R.H=Ta;var t=null!==ti&&null!==ti.next;if(Zo=0,ni=ti=ei=null,ri=!1,si=0,ci=null,t)throw Error(a(300));null===e||$a||null!==(e=e.dependencies)&&Ss(e)&&($a=!0)}function gi(e,t,n,r){ei=e;var o=0;do{if(oi&&(ci=null),si=0,oi=!1,25<=o)throw Error(a(301));if(o+=1,ni=ti=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}R.H=_a,i=t(n,r)}while(oi);return i}function pi(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?Ci(t):t,e=e.useState()[0],(null!==ti?ti.memoizedState:null)!==e&&(ei.flags|=1024),t}function mi(){var e=0!==ai;return ai=0,e}function yi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function vi(e){if(ri){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}ri=!1}Zo=0,ni=ti=ei=null,oi=!1,si=ai=0,ci=null}function bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ni?ei.memoizedState=ni=e:ni=ni.next=e,ni}function wi(){if(null===ti){var e=ei.alternate;e=null!==e?e.memoizedState:null}else e=ti.next;var t=null===ni?ei.memoizedState:ni.next;if(null!==t)ni=t,ti=e;else{if(null===e){if(null===ei.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(ti=e).memoizedState,baseState:ti.baseState,baseQueue:ti.baseQueue,queue:ti.queue,next:null},null===ni?ei.memoizedState=ni=e:ni=ni.next=e}return ni}function Ci(e){var t=si;return si+=1,null===ci&&(ci=[]),e=ho(ci,e,t),t=ei,null===(null===ni?t.memoizedState:ni.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?Aa:Ea),e}function ki(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Ci(e);if(e.$$typeof===m)return Ts(e)}throw Error(a(438,String(e)))}function Si(e){var t=null,n=ei.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ei.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map((function(e){return e.slice()})),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ei.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=S;return t.index++,n}function Ii(e,t){return"function"===typeof t?t(e):t}function Ti(e){return Ai(wi(),ti,e)}function Ai(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var o=e.baseQueue,i=r.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}t.baseQueue=o=i,r.pending=null}if(i=e.baseState,null===o)e.memoizedState=i;else{var c=s=null,l=null,u=t=o.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(rl&h)===h:(Zo&h)===h){var f=u.revertLane;if(0===f)null!==l&&(l=l.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===jo&&(d=!0);else{if((Zo&f)===f){u=u.next,f===jo&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===l?(c=l=h,s=i):l=l.next=h,ei.lanes|=f,dl|=f}h=u.action,ii&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===l?(c=l=f,s=i):l=l.next=f,ei.lanes|=h,dl|=h;u=u.next}while(null!==u&&u!==t);if(null===l?s=i:l.next=c,!Gn(i,e.memoizedState)&&($a=!0,d&&null!==(n=Qo)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=l,r.lastRenderedState=i}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ei(e){var t=wi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);Gn(i,t.memoizedState)||($a=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function _i(e,t,n){var r=ei,o=wi(),i=Yr;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!Gn((ti||o).memoizedState,n);if(s&&(o.memoizedState=n,$a=!0),o=o.queue,Zi(Mi.bind(null,r,o,e),[e]),o.getSnapshot!==t||s||null!==ni&&1&ni.memoizedState.tag){if(r.flags|=2048,Gi(9,Ri.bind(null,r,o,n,t),{destroy:void 0},null),null===tl)throw Error(a(349));i||0!==(60&Zo)||Pi(r,t,n)}return n}function Pi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ei.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ei.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ri(e,t,n,r){t.value=n,t.getSnapshot=r,Ni(t)&&Oi(e)}function Mi(e,t,n){return n((function(){Ni(t)&&Oi(e)}))}function Ni(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gn(e,n)}catch(r){return!0}}function Oi(e){var t=Pr(e,2);null!==t&&Nl(t,e,2)}function xi(e){var t=bi();if("function"===typeof e){var n=e;if(e=n(),ii){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:e},t}function Li(e,t,n,r){return e.baseState=n,Ai(e,ti,"function"===typeof r?r:Ii)}function qi(e,t,n,r,o){if(ka(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==R.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,Ui(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Ui(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var i=R.T,a={};R.T=a;try{var s=n(o,r),c=R.S;null!==c&&c(a,s),Hi(e,t,s)}catch(l){Fi(e,t,l)}finally{R.T=i}}else try{Hi(e,t,i=n(o,r))}catch(u){Fi(e,t,u)}}function Hi(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then((function(n){zi(e,t,n)}),(function(n){return Fi(e,t,n)})):zi(e,t,n)}function zi(e,t,n){t.status="fulfilled",t.value=n,Di(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ui(e,n)))}function Fi(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Di(t),t=t.next}while(t!==r)}e.action=null}function Di(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Bi(e,t){return t}function Ki(e,t){if(Yr){var n=tl.formState;if(null!==n){e:{var r=ei;if(Yr){if(Vr){t:{for(var o=Vr,i=Xr;8!==o.nodeType;){if(!i){o=null;break t}if(null===(o=sd(o.nextSibling))){o=null;break t}}o="F!"===(i=o.data)||"F"===i?o:null}if(o){Vr=sd(o.nextSibling),r="F!"===o.data;break e}}eo(r)}r=!1}r&&(t=n[0])}}return(n=bi()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bi,lastRenderedState:t},n.queue=r,n=ba.bind(null,ei,r),r.dispatch=n,r=xi(!1),i=Ca.bind(null,ei,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=bi()).queue=o,n=qi.bind(null,ei,o,i,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function $i(e){return ji(wi(),ti,e)}function ji(e,t,n){t=Ai(e,t,Bi)[0],e=Ti(Ii)[0],t="object"===typeof t&&null!==t&&"function"===typeof t.then?Ci(t):t;var r=wi(),o=r.queue,i=o.dispatch;return n!==r.memoizedState&&(ei.flags|=2048,Gi(9,Qi.bind(null,o,n),{destroy:void 0},null)),[t,i,e]}function Qi(e,t){e.action=t}function Wi(e){var t=wi(),n=ti;if(null!==n)return ji(t,n,e);wi(),t=t.memoizedState;var r=(n=wi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Gi(e,t,n,r){return e={tag:e,create:t,inst:n,deps:r,next:null},null===(t=ei.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ei.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vi(){return wi().memoizedState}function Yi(e,t,n,r){var o=bi();ei.flags|=e,o.memoizedState=Gi(1|t,n,{destroy:void 0},void 0===r?null:r)}function Ji(e,t,n,r){var o=wi();r=void 0===r?null:r;var i=o.memoizedState.inst;null!==ti&&null!==r&&di(r,ti.memoizedState.deps)?o.memoizedState=Gi(t,n,i,r):(ei.flags|=e,o.memoizedState=Gi(1|t,n,i,r))}function Xi(e,t){Yi(8390656,8,e,t)}function Zi(e,t){Ji(2048,8,e,t)}function ea(e,t){return Ji(4,2,e,t)}function ta(e,t){return Ji(4,4,e,t)}function na(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ra(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ji(4,4,na.bind(null,t,e),n)}function oa(){}function ia(e,t){var n=wi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&di(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function aa(e,t){var n=wi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&di(t,r[1]))return r[0];if(r=e(),ii){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function sa(e,t,n){return void 0===n||0!==(1073741824&Zo)?e.memoizedState=t:(e.memoizedState=n,e=Ml(),ei.lanes|=e,dl|=e,n)}function ca(e,t,n,r){return Gn(n,t)?n:null!==Io.current?(e=sa(e,n,r),Gn(e,t)||($a=!0),e):0===(42&Zo)?($a=!0,e.memoizedState=n):(e=Ml(),ei.lanes|=e,dl|=e,t)}function la(e,t,n,r,o){var i=B.p;B.p=0!==i&&8>i?i:8;var a=R.T,s={};R.T=s,Ca(e,!1,t,n);try{var c=o(),l=R.S;if(null!==l&&l(s,c),null!==c&&"object"===typeof c&&"function"===typeof c.then)wa(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then((function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)}),(function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)})),r}(c,r),Rl());else wa(e,t,r,Rl())}catch(u){wa(e,t,{then:function(){},status:"rejected",reason:u},Rl())}finally{B.p=i,R.T=a}}function ua(){}function da(e,t,n,r){if(5!==e.tag)throw Error(a(476));var o=ha(e).queue;la(e,o,t,K,null===n?ua:function(){return fa(e),n(r)})}function ha(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:K},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function fa(e){wa(e,ha(e).next.queue,{},Rl())}function ga(){return Ts(qd)}function pa(){return wi().memoizedState}function ma(){return wi().memoizedState}function ya(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Rl(),r=Ns(t,e=Ms(n),n);return null!==r&&(Nl(r,t,n),Os(r,t,n)),t={cache:Do()},void(e.payload=t)}t=t.return}}function va(e,t,n){var r=Rl();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},ka(e)?Sa(t,n):null!==(n=_r(e,t,n,r))&&(Nl(n,e,r),Ia(n,t,r))}function ba(e,t,n){wa(e,t,n,Rl())}function wa(e,t,n,r){var o={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(ka(e))Sa(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,Gn(s,a))return Er(e,t,o,0),null===tl&&Ar(),!1}catch(c){}if(null!==(n=_r(e,t,o,r)))return Nl(n,e,r),Ia(n,t,r),!0}return!1}function Ca(e,t,n,r){if(r={lane:2,revertLane:Cu(),action:r,hasEagerState:!1,eagerState:null,next:null},ka(e)){if(t)throw Error(a(479))}else null!==(t=_r(e,n,r,2))&&Nl(t,e,2)}function ka(e){var t=e.alternate;return e===ei||null!==t&&t===ei}function Sa(e,t){oi=ri=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ia(e,t,n){if(0!==(4194176&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xe(e,n)}}var Ta={readContext:Ts,use:ki,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useLayoutEffect:ui,useInsertionEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useSyncExternalStore:ui,useId:ui};Ta.useCacheRefresh=ui,Ta.useMemoCache=ui,Ta.useHostTransitionStatus=ui,Ta.useFormState=ui,Ta.useActionState=ui,Ta.useOptimistic=ui;var Aa={readContext:Ts,use:ki,useCallback:function(e,t){return bi().memoizedState=[e,void 0===t?null:t],e},useContext:Ts,useEffect:Xi,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Yi(4194308,4,na.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yi(4194308,4,e,t)},useInsertionEffect:function(e,t){Yi(4,2,e,t)},useMemo:function(e,t){var n=bi();t=void 0===t?null:t;var r=e();if(ii){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=bi();if(void 0!==n){var o=n(t);if(ii){be(!0);try{n(t)}finally{be(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=va.bind(null,ei,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},bi().memoizedState=e},useState:function(e){var t=(e=xi(e)).queue,n=ba.bind(null,ei,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:oa,useDeferredValue:function(e,t){return sa(bi(),e,t)},useTransition:function(){var e=xi(!1);return e=la.bind(null,ei,e.queue,!0,!1),bi().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ei,o=bi();if(Yr){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===tl)throw Error(a(349));0!==(60&rl)||Pi(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Xi(Mi.bind(null,r,i,e),[e]),r.flags|=2048,Gi(9,Ri.bind(null,r,i,n,t),{destroy:void 0},null),n},useId:function(){var e=bi(),t=tl.identifierPrefix;if(Yr){var n=Kr;t=":"+t+"R"+(n=(Br&~(1<<32-we(Br)-1)).toString(32)+n),0<(n=ai++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=li++).toString(32)+":";return e.memoizedState=t},useCacheRefresh:function(){return bi().memoizedState=ya.bind(null,ei)}};Aa.useMemoCache=Si,Aa.useHostTransitionStatus=ga,Aa.useFormState=Ki,Aa.useActionState=Ki,Aa.useOptimistic=function(e){var t=bi();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Ca.bind(null,ei,!0,n),n.dispatch=t,[e,t]};var Ea={readContext:Ts,use:ki,useCallback:ia,useContext:Ts,useEffect:Zi,useImperativeHandle:ra,useInsertionEffect:ea,useLayoutEffect:ta,useMemo:aa,useReducer:Ti,useRef:Vi,useState:function(){return Ti(Ii)},useDebugValue:oa,useDeferredValue:function(e,t){return ca(wi(),ti.memoizedState,e,t)},useTransition:function(){var e=Ti(Ii)[0],t=wi().memoizedState;return["boolean"===typeof e?e:Ci(e),t]},useSyncExternalStore:_i,useId:pa};Ea.useCacheRefresh=ma,Ea.useMemoCache=Si,Ea.useHostTransitionStatus=ga,Ea.useFormState=$i,Ea.useActionState=$i,Ea.useOptimistic=function(e,t){return Li(wi(),0,e,t)};var _a={readContext:Ts,use:ki,useCallback:ia,useContext:Ts,useEffect:Zi,useImperativeHandle:ra,useInsertionEffect:ea,useLayoutEffect:ta,useMemo:aa,useReducer:Ei,useRef:Vi,useState:function(){return Ei(Ii)},useDebugValue:oa,useDeferredValue:function(e,t){var n=wi();return null===ti?sa(n,e,t):ca(n,ti.memoizedState,e,t)},useTransition:function(){var e=Ei(Ii)[0],t=wi().memoizedState;return["boolean"===typeof e?e:Ci(e),t]},useSyncExternalStore:_i,useId:pa};function Pa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}_a.useCacheRefresh=ma,_a.useMemoCache=Si,_a.useHostTransitionStatus=ga,_a.useFormState=Wi,_a.useActionState=Wi,_a.useOptimistic=function(e,t){var n=wi();return null!==ti?Li(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])};var Ra={isMounted:function(e){return!!(e=e._reactInternals)&&U(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Rl(),o=Ms(r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ns(e,o,r))&&(Nl(t,e,r),Os(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Rl(),o=Ms(r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ns(e,o,r))&&(Nl(t,e,r),Os(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Rl(),r=Ms(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ns(e,r,n))&&(Nl(t,e,n),Os(t,e,n))}};function Ma(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Vn(n,r)||!Vn(o,i))}function Na(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ra.enqueueReplaceState(t,t.state,null)}function Oa(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=M({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}var xa="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function La(e){xa(e)}function qa(e){console.error(e)}function Ua(e){xa(e)}function Ha(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout((function(){throw n}))}}function za(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout((function(){throw r}))}}function Fa(e,t,n){return(n=Ms(n)).tag=3,n.payload={element:null},n.callback=function(){Ha(e,t)},n}function Da(e){return(e=Ms(e)).tag=3,e}function Ba(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"===typeof o){var i=r.value;e.payload=function(){return o(i)},e.callback=function(){za(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){za(t,n,r),"function"!==typeof o&&(null===kl?kl=new Set([this]):kl.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ka=Error(a(461)),$a=!1;function ja(e,t,n,r){t.child=null===e?So(t,null,n,r):ko(t,e.child,n,r)}function Qa(e,t,n,r,o){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Is(t),r=hi(e,t,n,a,i,o),s=mi(),null===e||$a?(Yr&&s&&Qr(t),t.flags|=1,ja(e,t,r,o),t.child):(yi(e,t,o),hs(e,t,o))}function Wa(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||qc(i)||void 0!==i.defaultProps||null!==n.compare?((e=zc(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ga(e,t,i,r,o))}if(i=e.child,!fs(e,o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Vn)(a,r)&&e.ref===t.ref)return hs(e,t,o)}return t.flags|=1,(e=Uc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ga(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(Vn(i,r)&&e.ref===t.ref){if($a=!1,t.pendingProps=r=i,!fs(e,o))return t.lanes=e.lanes,hs(e,t,o);0!==(131072&e.flags)&&($a=!0)}}return Xa(e,t,n,r,o)}function Va(e,t,n){var r=t.pendingProps,o=r.children,i=0!==(2&t.stateNode._pendingVisibility),a=null!==e?e.memoizedState:null;if(Ja(e,t),"hidden"===r.mode||i){if(0!==(128&t.flags)){if(r=null!==a?a.baseLanes|n:n,null!==e){for(o=t.child=e.child,i=0;null!==o;)i=i|o.lanes|o.childLanes,o=o.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Ya(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Ya(e,t,null!==a?a.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Jo(0,null!==a?a.cachePool:null),null!==a?Ao(t,a):Eo(),No(t)}else null!==a?(Jo(0,a.cachePool),Ao(t,a),Oo(),t.memoizedState=null):(null!==e&&Jo(0,null),Eo(),Oo());return ja(e,t,o,n),t.child}function Ya(e,t,n,r){var o=Yo();return o=null===o?null:{parent:Fo._currentValue,pool:o},t.memoizedState={baseLanes:n,cachePool:o},null!==e&&Jo(0,null),Eo(),No(t),null!==e&&ks(e,t,r,!0),null}function Ja(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=2097664);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=2097664)}}function Xa(e,t,n,r,o){return Is(t),n=hi(e,t,n,r,void 0,o),r=mi(),null===e||$a?(Yr&&r&&Qr(t),t.flags|=1,ja(e,t,n,o),t.child):(yi(e,t,o),hs(e,t,o))}function Za(e,t,n,r,o,i){return Is(t),t.updateQueue=null,n=gi(t,r,n,o),fi(e),r=mi(),null===e||$a?(Yr&&r&&Qr(t),t.flags|=1,ja(e,t,n,i),t.child):(yi(e,t,i),hs(e,t,i))}function es(e,t,n,r,o){if(Is(t),null===t.stateNode){var i=Nr,a=n.contextType;"object"===typeof a&&null!==a&&(i=Ts(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=Ra,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},Ps(t),a=n.contextType,i.context="object"===typeof a&&null!==a?Ts(a):Nr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(Pa(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&Ra.enqueueReplaceState(i,i.state,null),Us(t,r,i,o),qs(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,c=Oa(n,s);i.props=c;var l=i.context,u=n.contextType;a=Nr,"object"===typeof u&&null!==u&&(a=Ts(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s||l!==a)&&Na(t,i,r,a),_s=!1;var h=t.memoizedState;i.state=h,Us(t,r,i,o),qs(),l=t.memoizedState,s||h!==l||_s?("function"===typeof d&&(Pa(t,n,d,r),l=t.memoizedState),(c=_s||Ma(t,n,c,r,h,l,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=a,r=c):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,Rs(e,t),u=Oa(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,l=n.contextType,c=Nr,"object"===typeof l&&null!==l&&(c=Ts(l)),(l="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==c)&&Na(t,i,r,c),_s=!1,h=t.memoizedState,i.state=h,Us(t,r,i,o),qs();var f=t.memoizedState;a!==d||h!==f||_s||null!==e&&null!==e.dependencies&&Ss(e.dependencies)?("function"===typeof s&&(Pa(t,n,s,r),f=t.memoizedState),(u=_s||Ma(t,n,u,r,h,f,c)||null!==e&&null!==e.dependencies&&Ss(e.dependencies))?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,c),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=c,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Ja(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=ko(t,e.child,null,o),t.child=ko(t,null,n,o)):ja(e,t,n,o),t.memoizedState=i.state,e=t.child):e=hs(e,t,o),e}function ts(e,t,n,r){return oo(),t.flags|=256,ja(e,t,n,r),t.child}var ns={dehydrated:null,treeContext:null,retryLane:0};function rs(e){return{baseLanes:e,cachePool:Xo()}}function os(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=gl),e}function is(e,t,n){var r,o=t.pendingProps,i=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&Lo.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(Yr){if(i?Mo(t):Oo(),Yr){var c,l=Vr;if(c=l){e:{for(c=l,l=Xr;8!==c.nodeType;){if(!l){l=null;break e}if(null===(c=sd(c.nextSibling))){l=null;break e}}l=c}null!==l?(t.memoizedState={dehydrated:l,treeContext:null!==Dr?{id:Br,overflow:Kr}:null,retryLane:536870912},(c=Lc(18,null,null,0)).stateNode=l,c.return=t,t.child=c,Gr=t,Vr=null,c=!0):c=!1}c||eo(t)}if(null!==(l=t.memoizedState)&&null!==(l=l.dehydrated))return"$!"===l.data?t.lanes=16:t.lanes=536870912,null;xo(t)}return l=o.children,o=o.fallback,i?(Oo(),l=ss({mode:"hidden",children:l},i=t.mode),o=Fc(o,i,n,null),l.return=t,o.return=t,l.sibling=o,t.child=l,(i=t.child).memoizedState=rs(n),i.childLanes=os(e,r,n),t.memoizedState=ns,o):(Mo(t),as(t,l))}if(null!==(c=e.memoizedState)&&null!==(l=c.dehydrated)){if(s)256&t.flags?(Mo(t),t.flags&=-257,t=cs(e,t,n)):null!==t.memoizedState?(Oo(),t.child=e.child,t.flags|=128,t=null):(Oo(),i=o.fallback,l=t.mode,o=ss({mode:"visible",children:o.children},l),(i=Fc(i,l,n,null)).flags|=2,o.return=t,i.return=t,o.sibling=i,t.child=o,ko(t,e.child,null,n),(o=t.child).memoizedState=rs(n),o.childLanes=os(e,r,n),t.memoizedState=ns,t=i);else if(Mo(t),"$!"===l.data){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(o=Error(a(419))).stack="",o.digest=r,io({value:o,source:null,stack:null}),t=cs(e,t,n)}else if($a||ks(e,t,n,!1),r=0!==(n&e.childLanes),$a||r){if(null!==(r=tl)){if(0!==(42&(o=n&-n)))o=1;else switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=64;break;case 268435456:o=134217728;break;default:o=0}if(0!==(o=0!==(o&(r.suspendedLanes|n))?0:o)&&o!==c.retryLane)throw c.retryLane=o,Pr(e,o),Nl(r,e,o),Ka}"$?"===l.data||$l(),t=cs(e,t,n)}else"$?"===l.data?(t.flags|=128,t.child=e.child,t=su.bind(null,e),l._reactRetry=t,t=null):(e=c.treeContext,Vr=sd(l.nextSibling),Gr=t,Yr=!0,Jr=null,Xr=!1,null!==e&&(zr[Fr++]=Br,zr[Fr++]=Kr,zr[Fr++]=Dr,Br=e.id,Kr=e.overflow,Dr=t),(t=as(t,o.children)).flags|=4096);return t}return i?(Oo(),i=o.fallback,l=t.mode,u=(c=e.child).sibling,(o=Uc(c,{mode:"hidden",children:o.children})).subtreeFlags=31457280&c.subtreeFlags,null!==u?i=Uc(u,i):(i=Fc(i,l,n,null)).flags|=2,i.return=t,o.return=t,o.sibling=i,t.child=o,o=i,i=t.child,null===(l=e.child.memoizedState)?l=rs(n):(null!==(c=l.cachePool)?(u=Fo._currentValue,c=c.parent!==u?{parent:u,pool:u}:c):c=Xo(),l={baseLanes:l.baseLanes|n,cachePool:c}),i.memoizedState=l,i.childLanes=os(e,r,n),t.memoizedState=ns,o):(Mo(t),e=(n=e.child).sibling,(n=Uc(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function as(e,t){return(t=ss({mode:"visible",children:t},e.mode)).return=e,e.child=t}function ss(e,t){return Dc(e,t,0,null)}function cs(e,t,n){return ko(t,e.child,null,n),(e=as(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ls(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ws(e.return,t,n)}function us(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function ds(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(ja(e,t,r.children,n),0!==(2&(r=Lo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ls(e,n,t);else if(19===e.tag)ls(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(G(Lo,r),o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===qo(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),us(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===qo(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}us(t,!0,n,null,i);break;case"together":us(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),dl|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(ks(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Uc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function fs(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Ss(e))}function gs(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)$a=!0;else{if(!fs(e,n)&&0===(128&t.flags))return $a=!1,function(e,t,n){switch(t.tag){case 3:Z(t,t.stateNode.containerInfo),vs(t,Fo,e.memoizedState.cache),oo();break;case 27:case 5:te(t);break;case 4:Z(t,t.stateNode.containerInfo);break;case 10:vs(t,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Mo(t),t.flags|=128,null):0!==(n&t.child.childLanes)?is(e,t,n):(Mo(t),null!==(e=hs(e,t,n))?e.sibling:null);Mo(t);break;case 19:var o=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(ks(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return ds(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),G(Lo,Lo.current),r)break;return null;case 22:case 23:return t.lanes=0,Va(e,t,n);case 24:vs(t,Fo,e.memoizedState.cache)}return hs(e,t,n)}(e,t,n);$a=0!==(131072&e.flags)}else $a=!1,Yr&&0!==(1048576&t.flags)&&jr(t,Hr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,o=r._init;if(r=o(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((o=r.$$typeof)===y){t.tag=11,t=Qa(null,t,r,e,n);break e}if(o===w){t.tag=14,t=Wa(null,t,r,e,n);break e}}throw t=E(r)||r,Error(a(306,t,""))}qc(r)?(e=Oa(r,e),t.tag=1,t=es(null,t,r,e,n)):(t.tag=0,t=Xa(null,t,r,e,n))}return t;case 0:return Xa(e,t,t.type,t.pendingProps,n);case 1:return es(e,t,r=t.type,o=Oa(r,t.pendingProps),n);case 3:e:{if(Z(t,t.stateNode.containerInfo),null===e)throw Error(a(387));var i=t.pendingProps;r=(o=t.memoizedState).element,Rs(e,t),Us(t,i,null,n);var s=t.memoizedState;if(i=s.cache,vs(t,Fo,i),i!==o.cache&&Cs(t,[Fo],n,!0),qs(),i=s.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=ts(e,t,i,n);break e}if(i!==r){io(r=xr(Error(a(424)),t)),t=ts(e,t,i,n);break e}for(Vr=sd(t.stateNode.containerInfo.firstChild),Gr=t,Yr=!0,Jr=null,Xr=!0,n=So(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(oo(),i===r){t=hs(e,t,n);break e}ja(e,t,i,n)}t=t.child}return t;case 26:return Ja(e,t),null===e?(n=md(t.type,null,t.pendingProps,null))?t.memoizedState=n:Yr||(n=t.type,e=t.pendingProps,(r=Vu(J.current).createElement(n))[He]=t,r[ze]=e,Qu(r,n,e),Je(r),t.stateNode=r):t.memoizedState=md(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return te(t),null===e&&Yr&&(r=t.stateNode=ld(t.type,t.pendingProps,J.current),Gr=t,Xr=!0,Vr=sd(r.firstChild)),r=t.pendingProps.children,null!==e||Yr?ja(e,t,r,n):t.child=ko(t,null,r,n),Ja(e,t),t.child;case 5:return null===e&&Yr&&((o=r=Vr)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[je])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(null==o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===i)return e}if(null===(e=sd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,Xr))?(t.stateNode=r,Gr=t,Vr=sd(r.firstChild),Xr=!1,o=!0):o=!1),o||eo(t)),te(t),o=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,r=i.children,Xu(o,i)?r=null:null!==s&&Xu(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=hi(e,t,pi,null,null,n),qd._currentValue=o),Ja(e,t),ja(e,t,r,n),t.child;case 6:return null===e&&Yr&&((e=n=Vr)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=sd(e.nextSibling)))return null}return e}(n,t.pendingProps,Xr))?(t.stateNode=n,Gr=t,Vr=null,e=!0):e=!1),e||eo(t)),null;case 13:return is(e,t,n);case 4:return Z(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ko(t,null,r,n):ja(e,t,r,n),t.child;case 11:return Qa(e,t,t.type,t.pendingProps,n);case 7:return ja(e,t,t.pendingProps,n),t.child;case 8:case 12:return ja(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,vs(t,t.type,r.value),ja(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,Is(t),r=r(o=Ts(o)),t.flags|=1,ja(e,t,r,n),t.child;case 14:return Wa(e,t,t.type,t.pendingProps,n);case 15:return Ga(e,t,t.type,t.pendingProps,n);case 19:return ds(e,t,n);case 22:return Va(e,t,n);case 24:return Is(t),r=Ts(Fo),null===e?(null===(o=Yo())&&(o=tl,i=Do(),o.pooledCache=i,i.refCount++,null!==i&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:r,cache:o},Ps(t),vs(t,Fo,o)):(0!==(e.lanes&n)&&(Rs(e,t),Us(t,null,null,n),qs()),o=e.memoizedState,i=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),vs(t,Fo,r)):(r=i.cache,vs(t,Fo,r),r!==o.cache&&Cs(t,[Fo],n,!0))),ja(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}var ps=Q(null),ms=null,ys=null;function vs(e,t,n){G(ps,t._currentValue),t._currentValue=n}function bs(e){e._currentValue=ps.current,W(ps)}function ws(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Cs(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var i=o.dependencies;if(null!==i){var s=o.child;i=i.firstContext;e:for(;null!==i;){var c=i;i=o;for(var l=0;l<t.length;l++)if(c.context===t[l]){i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),ws(i.return,n,e),r||(s=null);break e}i=c.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(i=s.alternate)&&(i.lanes|=n),ws(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function ks(e,t,n,r){e=null;for(var o=t,i=!1;null!==o;){if(!i)if(0!==(524288&o.flags))i=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var c=o.type;Gn(o.pendingProps.value,s.value)||(null!==e?e.push(c):e=[c])}}else if(o===X.current){if(null===(s=o.alternate))throw Error(a(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(qd):e=[qd])}o=o.return}null!==e&&Cs(t,e,n,r),t.flags|=262144}function Ss(e){for(e=e.firstContext;null!==e;){if(!Gn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Is(e){ms=e,ys=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Ts(e){return Es(ms,e)}function As(e,t){return null===ms&&Is(e),Es(e,t)}function Es(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===ys){if(null===e)throw Error(a(308));ys=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ys=ys.next=t;return n}var _s=!1;function Ps(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ms(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ns(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&el)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Mr(e),Rr(e,null,n),t}return Er(e,r,t,n),Mr(e)}function Os(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194176&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,xe(e,n)}}function xs(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Ls=!1;function qs(){if(Ls){if(null!==Qo)throw Qo}}function Us(e,t,n,r){Ls=!1;var o=e.updateQueue;_s=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?i=l:a.next=l,a=c;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==i){var d=o.baseState;for(a=0,u=l=c=null,s=i;;){var h=-536870913&s.lane,f=h!==s.lane;if(f?(rl&h)===h:(r&h)===h){0!==h&&h===jo&&(Ls=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var g=e,p=s;h=t;var m=n;switch(p.tag){case 1:if("function"===typeof(g=p.payload)){d=g.call(m,d,h);break e}d=g;break e;case 3:g.flags=-65537&g.flags|128;case 0:if(null===(h="function"===typeof(g=p.payload)?g.call(m,d,h):g)||void 0===h)break e;d=M({},d,h);break e;case 2:_s=!0}}null!==(h=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=o.callbacks)?o.callbacks=[h]:f.push(h))}else f={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=f,c=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(f=s).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}null===u&&(c=d),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=u,null===i&&(o.shared.lanes=0),dl|=a,e.lanes=a,e.memoizedState=d}}function Hs(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function zs(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Hs(n[e],t)}function Fs(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==o)}}catch(s){ru(t,t.return,s)}}function Ds(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var i=o.next;r=i;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,o=t;var c=n;try{s()}catch(l){ru(o,c,l)}}}r=r.next}while(r!==i)}}catch(l){ru(t,t.return,l)}}function Bs(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{zs(t,n)}catch(r){ru(e,e.return,r)}}}function Ks(e,t,n){n.props=Oa(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){ru(e,t,r)}}function $s(e,t){try{var n=e.ref;if(null!==n){var r=e.stateNode;switch(e.tag){case 26:case 27:case 5:var o=r;break;default:o=r}"function"===typeof n?e.refCleanup=n(o):n.current=o}}catch(i){ru(e,t,i)}}function js(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(o){ru(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){ru(e,t,i)}else n.current=null}function Qs(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){ru(e,e.return,o)}}function Ws(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,s=null,c=null,l=null,u=null,d=null;for(g in n){var h=n[g];if(n.hasOwnProperty(g)&&null!=h)switch(g){case"checked":case"value":break;case"defaultValue":l=h;default:r.hasOwnProperty(g)||$u(e,t,g,null,r,h)}}for(var f in r){var g=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=g||null!=h))switch(f){case"type":i=g;break;case"name":o=g;break;case"checked":u=g;break;case"defaultChecked":d=g;break;case"value":s=g;break;case"defaultValue":c=g;break;case"children":case"dangerouslySetInnerHTML":if(null!=g)throw Error(a(137,t));break;default:g!==h&&$u(e,t,f,g,r,h)}}return void mt(e,s,c,l,u,d,i,o);case"select":for(i in g=s=c=f=null,n)if(l=n[i],n.hasOwnProperty(i)&&null!=l)switch(i){case"value":break;case"multiple":g=l;default:r.hasOwnProperty(i)||$u(e,t,i,null,r,l)}for(o in r)if(i=r[o],l=n[o],r.hasOwnProperty(o)&&(null!=i||null!=l))switch(o){case"value":f=i;break;case"defaultValue":c=i;break;case"multiple":s=i;default:i!==l&&$u(e,t,o,i,r,l)}return t=c,n=s,r=g,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(c in g=f=null,n)if(o=n[c],n.hasOwnProperty(c)&&null!=o&&!r.hasOwnProperty(c))switch(c){case"value":case"children":break;default:$u(e,t,c,null,r,o)}for(s in r)if(o=r[s],i=n[s],r.hasOwnProperty(s)&&(null!=o||null!=i))switch(s){case"value":f=o;break;case"defaultValue":g=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(a(91));break;default:o!==i&&$u(e,t,s,o,r,i)}return void wt(e,f,g);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else $u(e,t,p,null,r,f);for(l in r)if(f=r[l],g=n[l],r.hasOwnProperty(l)&&f!==g&&(null!=f||null!=g))if("selected"===l)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else $u(e,t,l,f,r,g);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)f=n[m],n.hasOwnProperty(m)&&null!=f&&!r.hasOwnProperty(m)&&$u(e,t,m,null,r,f);for(u in r)if(f=r[u],g=n[u],r.hasOwnProperty(u)&&f!==g&&(null!=f||null!=g))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:$u(e,t,u,f,r,g)}return;default:if(At(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&ju(e,t,y,void 0,r,f);for(d in r)f=r[d],g=n[d],!r.hasOwnProperty(d)||f===g||void 0===f&&void 0===g||ju(e,t,d,f,r,g);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&$u(e,t,v,null,r,f);for(h in r)f=r[h],g=n[h],!r.hasOwnProperty(h)||f===g||null==f&&null==g||$u(e,t,h,f,r,g)}(r,e.type,n,t),r[ze]=t}catch(o){ru(e,e.return,o)}}function Gs(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag||4===e.tag}function Vs(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Gs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&27!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ys(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Ku));else if(4!==r&&27!==r&&null!==(e=e.child))for(Ys(e,t,n),e=e.sibling;null!==e;)Ys(e,t,n),e=e.sibling}function Js(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&27!==r&&null!==(e=e.child))for(Js(e,t,n),e=e.sibling;null!==e;)Js(e,t,n),e=e.sibling}var Xs=!1,Zs=!1,ec=!1,tc="function"===typeof WeakSet?WeakSet:Set,nc=null,rc=!1;function oc(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:yc(e,n),4&r&&Fs(5,n);break;case 1:if(yc(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(s){ru(n,n.return,s)}else{var o=Oa(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){ru(n,n.return,c)}}64&r&&Bs(n),512&r&&$s(n,n.return);break;case 3:if(yc(e,n),64&r&&null!==(r=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:e=n.child.stateNode}try{zs(r,e)}catch(s){ru(n,n.return,s)}}break;case 26:yc(e,n),512&r&&$s(n,n.return);break;case 27:case 5:yc(e,n),null===t&&4&r&&Qs(n),512&r&&$s(n,n.return);break;case 12:default:yc(e,n);break;case 13:yc(e,n),4&r&&uc(e,n);break;case 22:if(!(o=null!==n.memoizedState||Xs)){t=null!==t&&null!==t.memoizedState||Zs;var i=Xs,a=Zs;Xs=o,(Zs=t)&&!a?bc(e,n,0!==(8772&n.subtreeFlags)):yc(e,n),Xs=i,Zs=a}512&r&&("manual"===n.memoizedProps.mode?$s(n,n.return):js(n,n.return))}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Qe(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ac=null,sc=!1;function cc(e,t,n){for(n=n.child;null!==n;)lc(e,t,n),n=n.sibling}function lc(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(a){}switch(n.tag){case 26:Zs||js(n,t),cc(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Zs||js(n,t);var r=ac,o=sc;for(ac=n.stateNode,cc(e,t,n),t=(n=n.stateNode).attributes;t.length;)n.removeAttributeNode(t[0]);Qe(n),ac=r,sc=o;break;case 5:Zs||js(n,t);case 6:o=ac;var i=sc;if(ac=null,cc(e,t,n),sc=i,null!==(ac=o))if(sc)try{e=ac,r=n.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)}catch(s){ru(n,t,s)}else try{ac.removeChild(n.stateNode)}catch(s){ru(n,t,s)}break;case 18:null!==ac&&(sc?(t=ac,n=n.stateNode,8===t.nodeType?id(t.parentNode,n):1===t.nodeType&&id(t,n),ph(t)):id(ac,n.stateNode));break;case 4:r=ac,o=sc,ac=n.stateNode.containerInfo,sc=!0,cc(e,t,n),ac=r,sc=o;break;case 0:case 11:case 14:case 15:Zs||Ds(2,n,t),Zs||Ds(4,n,t),cc(e,t,n);break;case 1:Zs||(js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&Ks(n,t,r)),cc(e,t,n);break;case 21:cc(e,t,n);break;case 22:Zs||js(n,t),Zs=(r=Zs)||null!==n.memoizedState,cc(e,t,n),Zs=r;break;default:cc(e,t,n)}}function uc(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{ph(e)}catch(n){ru(t,t.return,n)}}function dc(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new tc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new tc),t;default:throw Error(a(435,e.tag))}}(e);t.forEach((function(t){var r=cu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}function hc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],i=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 27:case 5:ac=c.stateNode,sc=!1;break e;case 3:case 4:ac=c.stateNode.containerInfo,sc=!0;break e}c=c.return}if(null===ac)throw Error(a(160));lc(i,s,o),ac=null,sc=!1,null!==(i=o.alternate)&&(i.return=null),o.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}var fc=null;function gc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:hc(t,e),pc(e),4&r&&(Ds(3,e,e.return),Fs(3,e),Ds(5,e,e.return));break;case 1:hc(t,e),pc(e),512&r&&(Zs||null===n||js(n,n.return)),64&r&&Xs&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=fc;if(hc(t,e),pc(e),512&r&&(Zs||null===n||js(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(i=o.getElementsByTagName("title")[0])||i[je]||i[He]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=o.createElement(r),o.head.insertBefore(i,o.querySelector("head > title"))),Qu(i,r,n),i[He]=e,Je(i),r=i;break e;case"link":var s=Ed("link","href",o).get(r+(n.href||""));if(s)for(var c=0;c<s.length;c++)if((i=s[c]).getAttribute("href")===(null==n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(c,1);break t}Qu(i=o.createElement(r),r,n),o.head.appendChild(i);break;case"meta":if(s=Ed("meta","content",o).get(r+(n.content||"")))for(c=0;c<s.length;c++)if((i=s[c]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(c,1);break t}Qu(i=o.createElement(r),r,n),o.head.appendChild(i);break;default:throw Error(a(468,r))}i[He]=e,Je(i),r=i}e.stateNode=r}else _d(o,e.type,e.stateNode);else e.stateNode=kd(o,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?_d(o,e.type,e.stateNode):kd(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&Ws(e,e.memoizedProps,n.memoizedProps)}break;case 27:if(4&r&&null===e.alternate){o=e.stateNode,i=e.memoizedProps;try{for(var l=o.firstChild;l;){var u=l.nextSibling,d=l.nodeName;l[je]||"HEAD"===d||"BODY"===d||"SCRIPT"===d||"STYLE"===d||"LINK"===d&&"stylesheet"===l.rel.toLowerCase()||o.removeChild(l),l=u}for(var h=e.type,f=o.attributes;f.length;)o.removeAttributeNode(f[0]);Qu(o,h,i),o[He]=e,o[ze]=i}catch(p){ru(e,e.return,p)}}case 5:if(hc(t,e),pc(e),512&r&&(Zs||null===n||js(n,n.return)),32&e.flags){o=e.stateNode;try{kt(o,"")}catch(p){ru(e,e.return,p)}}4&r&&null!=e.stateNode&&Ws(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(ec=!0);break;case 6:if(hc(t,e),pc(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){ru(e,e.return,p)}}break;case 3:if(Ad=null,o=fc,fc=hd(t.containerInfo),hc(t,e),fc=o,pc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{ph(t.containerInfo)}catch(p){ru(e,e.return,p)}ec&&(ec=!1,mc(e));break;case 4:r=fc,fc=hd(e.stateNode.containerInfo),hc(t,e),pc(e),fc=r;break;case 12:hc(t,e),pc(e);break;case 13:hc(t,e),pc(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(bl=ce()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,dc(e,r)));break;case 22:if(512&r&&(Zs||null===n||js(n,n.return)),l=null!==e.memoizedState,u=null!==n&&null!==n.memoizedState,Xs=(d=Xs)||l,Zs=(h=Zs)||u,hc(t,e),Zs=h,Xs=d,pc(e),(t=e.stateNode)._current=e,t._visibility&=-3,t._visibility|=2&t._pendingVisibility,8192&r&&(t._visibility=l?-2&t._visibility:1|t._visibility,l&&(t=Xs||Zs,null===n||u||t||vc(e)),null===e.memoizedProps||"manual"!==e.memoizedProps.mode))e:for(n=null,t=e;;){if(5===t.tag||26===t.tag||27===t.tag){if(null===n){u=n=t;try{if(o=u.stateNode,l)"function"===typeof(i=o.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{s=u.stateNode;var g=void 0!==(c=u.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null;s.style.display=null==g||"boolean"===typeof g?"":(""+g).trim()}}catch(p){ru(u,u.return,p)}}}else if(6===t.tag){if(null===n){u=t;try{u.stateNode.nodeValue=l?"":u.memoizedProps}catch(p){ru(u,u.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,dc(e,n))));break;case 19:hc(t,e),pc(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,dc(e,r)));break;case 21:break;default:hc(t,e),pc(e)}}function pc(e){var t=e.flags;if(2&t){try{if(27!==e.tag){e:{for(var n=e.return;null!==n;){if(Gs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 27:var o=r.stateNode;Js(e,Vs(e),o);break;case 5:var i=r.stateNode;32&r.flags&&(kt(i,""),r.flags&=-33),Js(e,Vs(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;Ys(e,Vs(e),s);break;default:throw Error(a(161))}}}catch(c){ru(e,e.return,c)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function mc(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;mc(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function yc(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)oc(e,t.alternate,t),t=t.sibling}function vc(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Ds(4,t,t.return),vc(t);break;case 1:js(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&Ks(t,t.return,n),vc(t);break;case 26:case 27:case 5:js(t,t.return),vc(t);break;case 22:js(t,t.return),null===t.memoizedState&&vc(t);break;default:vc(t)}e=e.sibling}}function bc(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:bc(o,i,n),Fs(4,i);break;case 1:if(bc(o,i,n),"function"===typeof(o=(r=i).stateNode).componentDidMount)try{o.componentDidMount()}catch(l){ru(r,r.return,l)}if(null!==(o=(r=i).updateQueue)){var s=r.stateNode;try{var c=o.shared.hiddenCallbacks;if(null!==c)for(o.shared.hiddenCallbacks=null,o=0;o<c.length;o++)Hs(c[o],s)}catch(l){ru(r,r.return,l)}}n&&64&a&&Bs(i),$s(i,i.return);break;case 26:case 27:case 5:bc(o,i,n),n&&null===r&&4&a&&Qs(i),$s(i,i.return);break;case 12:default:bc(o,i,n);break;case 13:bc(o,i,n),n&&4&a&&uc(o,i);break;case 22:null===i.memoizedState&&bc(o,i,n),$s(i,i.return)}t=t.sibling}}function wc(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Bo(n))}function Cc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bo(e))}function kc(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Sc(e,t,n,r),t=t.sibling}function Sc(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:kc(e,t,n,r),2048&o&&Fs(9,t);break;case 3:kc(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Bo(e)));break;case 12:if(2048&o){kc(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,s=i.onPostCommit;"function"===typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(c){ru(t,t.return,c)}}else kc(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,null!==t.memoizedState?4&i._visibility?kc(e,t,n,r):Tc(e,t):4&i._visibility?kc(e,t,n,r):(i._visibility|=4,Ic(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&o&&wc(t.alternate,t);break;case 24:kc(e,t,n,r),2048&o&&Cc(t.alternate,t);break;default:kc(e,t,n,r)}}function Ic(e,t,n,r,o){for(o=o&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,s=n,c=r,l=a.flags;switch(a.tag){case 0:case 11:case 15:Ic(i,a,s,c,o),Fs(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?4&u._visibility?Ic(i,a,s,c,o):Tc(i,a):(u._visibility|=4,Ic(i,a,s,c,o)),o&&2048&l&&wc(a.alternate,a);break;case 24:Ic(i,a,s,c,o),o&&2048&l&&Cc(a.alternate,a);break;default:Ic(i,a,s,c,o)}t=t.sibling}}function Tc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:Tc(n,r),2048&o&&wc(r.alternate,r);break;case 24:Tc(n,r),2048&o&&Cc(r.alternate,r);break;default:Tc(n,r)}t=t.sibling}}var Ac=8192;function Ec(e){if(e.subtreeFlags&Ac)for(e=e.child;null!==e;)_c(e),e=e.sibling}function _c(e){switch(e.tag){case 26:Ec(e),e.flags&Ac&&null!==e.memoizedState&&function(e,t,n){if(null===Rd)throw Error(a(475));var r=Rd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var o=yd(n.href),i=e.querySelector(vd(o));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Nd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void Je(i);i=e.ownerDocument||e,n=bd(n),(o=ud.get(o))&&Id(n,o),Je(i=i.createElement("link"));var s=i;s._p=new Promise((function(e,t){s.onload=e,s.onerror=t})),Qu(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Nd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(fc,e.memoizedState,e.memoizedProps);break;case 5:default:Ec(e);break;case 3:case 4:var t=fc;fc=hd(e.stateNode.containerInfo),Ec(e),fc=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Ac,Ac=16777216,Ec(e),Ac=t):Ec(e))}}function Pc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Rc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nc=r,Oc(r,e)}Pc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Mc(e),e=e.sibling}function Mc(e){switch(e.tag){case 0:case 11:case 15:Rc(e),2048&e.flags&&Ds(9,e,e.return);break;case 3:case 12:default:Rc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&4&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-5,Nc(e)):Rc(e)}}function Nc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];nc=r,Oc(r,e)}Pc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:Ds(8,t,t.return),Nc(t);break;case 22:4&(n=t.stateNode)._visibility&&(n._visibility&=-5,Nc(t));break;default:Nc(t)}e=e.sibling}}function Oc(e,t){for(;null!==nc;){var n=nc;switch(n.tag){case 0:case 11:case 15:Ds(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Bo(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,nc=r;else e:for(n=e;null!==nc;){var o=(r=nc).sibling,i=r.return;if(ic(r),r===n){nc=null;break e}if(null!==o){o.return=i,nc=o;break e}nc=i}}}function xc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,r){return new xc(e,t,n,r)}function qc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=31457280&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Hc(e,t){e.flags&=31457282;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function zc(e,t,n,r,o,i){var s=0;if(r=e,"function"===typeof e)qc(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,V.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case d:return Fc(n.children,o,i,t);case h:s=8,o|=24;break;case f:return(e=Lc(12,n,t,2|o)).elementType=f,e.lanes=i,e;case v:return(e=Lc(13,n,t,o)).elementType=v,e.lanes=i,e;case b:return(e=Lc(19,n,t,o)).elementType=b,e.lanes=i,e;case k:return Dc(n,o,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case g:case m:s=10;break e;case p:s=9;break e;case y:s=11;break e;case w:s=14;break e;case C:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Lc(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function Fc(e,t,n,r){return(e=Lc(7,e,r,t)).lanes=n,e}function Dc(e,t,n,r){(e=Lc(22,e,r,t)).elementType=k,e.lanes=n;var o={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var e=o._current;if(null===e)throw Error(a(456));if(0===(2&o._pendingVisibility)){var t=Pr(e,2);null!==t&&(o._pendingVisibility|=2,Nl(t,e,2))}},attach:function(){var e=o._current;if(null===e)throw Error(a(456));if(0!==(2&o._pendingVisibility)){var t=Pr(e,2);null!==t&&(o._pendingVisibility&=-3,Nl(t,e,2))}}};return e.stateNode=o,e}function Bc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Kc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $c(e){e.flags|=4}function jc(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Pd(t)){if(null!==(t=Po.current)&&((4194176&rl)===rl?null!==Ro:(62914560&rl)!==rl&&0===(536870912&rl)||t!==Ro))throw fo=co,so;e.flags|=8192}}function Qc(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Re():536870912,e.lanes|=t,pl|=t)}function Wc(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Gc(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=31457280&o.subtreeFlags,r|=31457280&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Vc(e,t,n){var r=t.pendingProps;switch(Wr(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return Gc(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),bs(Fo),ee(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ro(t)?$c(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Jr&&(xl(Jr),Jr=null))),Gc(t),null;case 26:return n=t.memoizedState,null===e?($c(t),null!==n?(Gc(t),jc(t,n)):(Gc(t),t.flags&=-16777217)):n?n!==e.memoizedState?($c(t),Gc(t),jc(t,n)):(Gc(t),t.flags&=-16777217):(e.memoizedProps!==r&&$c(t),Gc(t),t.flags&=-16777217),null;case 27:ne(t),n=J.current;var o=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&$c(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gc(t),null}e=V.current,ro(t)?to(t):(e=ld(o,r,n),t.stateNode=e,$c(t))}return Gc(t),null;case 5:if(ne(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&$c(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Gc(t),null}if(e=V.current,ro(t))to(t);else{switch(o=Vu(J.current),e){case 1:e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=o.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=o.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?o.createElement(n,{is:r.is}):o.createElement(n)}}e[He]=t,e[ze]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)e.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=e;e:switch(Qu(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&$c(t)}}return Gc(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&$c(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=J.current,ro(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=Gr))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[He]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Bu(e.nodeValue,n)))||eo(t)}else(e=Vu(e).createTextNode(r))[He]=t,t.stateNode=e}return Gc(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=ro(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[He]=t}else oo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Gc(t),o=!1}else null!==Jr&&(xl(Jr),Jr=null),o=!0;if(!o)return 256&t.flags?(xo(t),t):(xo(t),null)}if(xo(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==o&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),Qc(t,t.updateQueue),Gc(t),null;case 4:return ee(),null===e&&Nu(t.stateNode.containerInfo),Gc(t),null;case 10:return bs(t.type),Gc(t),null;case 19:if(W(Lo),null===(o=t.memoizedState))return Gc(t),null;if(r=0!==(128&t.flags),null===(i=o.rendering))if(r)Wc(o,!1);else{if(0!==ul||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=qo(e))){for(t.flags|=128,Wc(o,!1),e=i.updateQueue,t.updateQueue=e,Qc(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Hc(n,e),n=n.sibling;return G(Lo,1&Lo.current|2),t.child}e=e.sibling}null!==o.tail&&ce()>wl&&(t.flags|=128,r=!0,Wc(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=qo(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,Qc(t,e),Wc(o,!0),null===o.tail&&"hidden"===o.tailMode&&!i.alternate&&!Yr)return Gc(t),null}else 2*ce()-o.renderingStartTime>wl&&536870912!==n&&(t.flags|=128,r=!0,Wc(o,!1),t.lanes=4194304);o.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=o.last)?e.sibling=i:t.child=i,o.last=i)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=ce(),t.sibling=null,e=Lo.current,G(Lo,r?1&e|2:1&e),t):(Gc(t),null);case 22:case 23:return xo(t),_o(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(Gc(t),6&t.subtreeFlags&&(t.flags|=8192)):Gc(t),null!==(n=t.updateQueue)&&Qc(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&W(Vo),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),bs(Fo),Gc(t),null;case 25:return null}throw Error(a(156,t.tag))}function Yc(e,t){switch(Wr(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return bs(Fo),ee(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return ne(t),null;case 13:if(xo(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));oo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return W(Lo),null;case 4:return ee(),null;case 10:return bs(t.type),null;case 22:case 23:return xo(t),_o(),null!==e&&W(Vo),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return bs(Fo),null;default:return null}}function Jc(e,t){switch(Wr(t),t.tag){case 3:bs(Fo),ee();break;case 26:case 27:case 5:ne(t);break;case 4:ee();break;case 13:xo(t);break;case 19:W(Lo);break;case 10:bs(t.type);break;case 22:case 23:xo(t),_o(),null!==e&&W(Vo);break;case 24:bs(Fo)}}var Xc={getCacheForType:function(e){var t=Ts(Fo),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},Zc="function"===typeof WeakMap?WeakMap:Map,el=0,tl=null,nl=null,rl=0,ol=0,il=null,al=!1,sl=!1,cl=!1,ll=0,ul=0,dl=0,hl=0,fl=0,gl=0,pl=0,ml=null,yl=null,vl=!1,bl=0,wl=1/0,Cl=null,kl=null,Sl=!1,Il=null,Tl=0,Al=0,El=null,_l=0,Pl=null;function Rl(){if(0!==(2&el)&&0!==rl)return rl&-rl;if(null!==R.T){return 0!==jo?jo:Cu()}return qe()}function Ml(){0===gl&&(gl=0===(536870912&rl)||Yr?Pe():536870912);var e=Po.current;return null!==e&&(e.flags|=32),gl}function Nl(e,t,n){(e===tl&&2===ol||null!==e.cancelPendingCommit)&&(Fl(e,0),Ul(e,rl,gl,!1)),Ne(e,n),0!==(2&el)&&e===tl||(e===tl&&(0===(2&el)&&(hl|=n),4===ul&&Ul(e,rl,gl,!1)),pu(e))}function Ol(e,t,n){if(0!==(6&el))throw Error(a(327));for(var r=!n&&0===(60&t)&&0===(t&e.expiredLanes)||Ee(e,t),o=r?function(e,t){var n=el;el|=2;var r=Bl(),o=Kl();tl!==e||rl!==t?(Cl=null,wl=ce()+500,Fl(e,t)):sl=Ee(e,t);e:for(;;)try{if(0!==ol&&null!==nl){t=nl;var i=il;t:switch(ol){case 1:ol=0,il=null,Yl(e,t,i,1);break;case 2:if(lo(i)){ol=0,il=null,Vl(t);break}t=function(){2===ol&&tl===e&&(ol=7),pu(e)},i.then(t,t);break e;case 3:ol=7;break e;case 4:ol=5;break e;case 7:lo(i)?(ol=0,il=null,Vl(t)):(ol=0,il=null,Yl(e,t,i,7));break;case 5:var s=null;switch(nl.tag){case 26:s=nl.memoizedState;case 5:case 27:var c=nl;if(!s||Pd(s)){ol=0,il=null;var l=c.sibling;if(null!==l)nl=l;else{var u=c.return;null!==u?(nl=u,Jl(u)):nl=null}break t}}ol=0,il=null,Yl(e,t,i,5);break;case 6:ol=0,il=null,Yl(e,t,i,6);break;case 8:zl(),ul=6;break e;default:throw Error(a(462))}}Wl();break}catch(d){Dl(e,d)}return ys=ms=null,R.H=r,R.A=o,el=n,null!==nl?0:(tl=null,rl=0,Ar(),ul)}(e,t):jl(e,t,!0),i=r;;){if(0===o){sl&&!r&&Ul(e,t,0,!1);break}if(6===o)Ul(e,t,0,!al);else{if(n=e.current.alternate,i&&!ql(n)){o=jl(e,t,!1),i=!1;continue}if(2===o){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var c=e;o=ml;var l=c.current.memoizedState.isDehydrated;if(l&&(Fl(c,s).flags|=256),2!==(s=jl(c,s,!1))){if(cl&&!l){c.errorRecoveryDisabledLanes|=i,hl|=i,o=4;break e}i=yl,yl=o,null!==i&&xl(i)}o=s}if(i=!1,2!==o)continue}}if(1===o){Fl(e,0),Ul(e,t,0,!0);break}e:{switch(r=e,o){case 0:case 1:throw Error(a(345));case 4:if((4194176&t)===t){Ul(r,t,gl,!al);break e}break;case 2:yl=null;break;case 3:case 5:break;default:throw Error(a(329))}if(r.finishedWork=n,r.finishedLanes=t,(62914560&t)===t&&10<(i=bl+300-ce())){if(Ul(r,t,gl,!al),0!==Ae(r,0))break e;r.timeoutHandle=ed(Ll.bind(null,r,n,yl,Cl,vl,t,gl,hl,pl,al,2,-0,0),i)}else Ll(r,n,yl,Cl,vl,t,gl,hl,pl,al,0,-0,0)}}break}pu(e)}function xl(e){null===yl?yl=e:yl.push.apply(yl,e)}function Ll(e,t,n,r,o,i,s,c,l,u,d,h,f){var g=t.subtreeFlags;if((8192&g||16785408===(16785408&g))&&(Rd={stylesheets:null,count:0,unsuspend:Md},_c(t),null!==(t=function(){if(null===Rd)throw Error(a(475));var e=Rd;return e.stylesheets&&0===e.count&&xd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout((function(){if(e.stylesheets&&xd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}}),6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=t(Zl.bind(null,e,n,r,o,s,c,l,1,h,f)),void Ul(e,i,s,!u);Zl(e,n,r,o,s,c,l,d,h,f)}function ql(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Gn(i(),o))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ul(e,t,n,r){t&=~fl,t&=~hl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var i=31-we(o),a=1<<i;r[i]=-1,o&=~a}0!==n&&Oe(e,n,t)}function Hl(){return 0!==(6&el)||(mu(0,!1),!1)}function zl(){if(null!==nl){if(0===ol)var e=nl.return;else ys=ms=null,vi(e=nl),po=null,mo=0,e=nl;for(;null!==e;)Jc(e.alternate,e),e=e.return;nl=null}}function Fl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,td(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zl(),tl=e,nl=n=Uc(e.current,null),rl=t,ol=0,il=null,al=!1,sl=Ee(e,t),cl=!1,pl=gl=fl=hl=dl=ul=0,yl=ml=null,vl=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-we(r),i=1<<o;t|=e[o],r&=~i}return ll=t,Ar(),n}function Dl(e,t){ei=null,R.H=Ta,t===ao?(t=go(),ol=3):t===so?(t=go(),ol=4):ol=t===Ka?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,il=t,null===nl&&(ul=1,Ha(e,xr(t,e.current)))}function Bl(){var e=R.H;return R.H=Ta,null===e?Ta:e}function Kl(){var e=R.A;return R.A=Xc,e}function $l(){ul=4,al||(4194176&rl)!==rl&&null!==Po.current||(sl=!0),0===(134217727&dl)&&0===(134217727&hl)||null===tl||Ul(tl,rl,gl,!1)}function jl(e,t,n){var r=el;el|=2;var o=Bl(),i=Kl();tl===e&&rl===t||(Cl=null,Fl(e,t)),t=!1;var a=ul;e:for(;;)try{if(0!==ol&&null!==nl){var s=nl,c=il;switch(ol){case 8:zl(),a=6;break e;case 3:case 2:case 6:null===Po.current&&(t=!0);var l=ol;if(ol=0,il=null,Yl(e,s,c,l),n&&sl){a=0;break e}break;default:l=ol,ol=0,il=null,Yl(e,s,c,l)}}Ql(),a=ul;break}catch(u){Dl(e,u)}return t&&e.shellSuspendCounter++,ys=ms=null,el=r,R.H=o,R.A=i,null===nl&&(tl=null,rl=0,Ar()),a}function Ql(){for(;null!==nl;)Gl(nl)}function Wl(){for(;null!==nl&&!ae();)Gl(nl)}function Gl(e){var t=gs(e.alternate,e,ll);e.memoizedProps=e.pendingProps,null===t?Jl(e):nl=t}function Vl(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Za(n,t,t.pendingProps,t.type,void 0,rl);break;case 11:t=Za(n,t,t.pendingProps,t.type.render,t.ref,rl);break;case 5:vi(t);default:Jc(n,t),t=gs(n,t=nl=Hc(t,ll),ll)}e.memoizedProps=e.pendingProps,null===t?Jl(e):nl=t}function Yl(e,t,n,r){ys=ms=null,vi(t),po=null,mo=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&ks(t,n,o,!0),null!==(n=Po.current)){switch(n.tag){case 13:return null===Ro?$l():null===n.alternate&&0===ul&&(ul=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===co?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),ou(e,r,o)),!1;case 22:return n.flags|=65536,r===co?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),ou(e,r,o)),!1}throw Error(a(435,n.tag))}return ou(e,r,o),$l(),!1}if(Yr)return null!==(t=Po.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==Zr&&io(xr(e=Error(a(422),{cause:r}),n))):(r!==Zr&&io(xr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=xr(r,n),xs(e,o=Fa(e.stateNode,r,o)),4!==ul&&(ul=2)),!1;var i=Error(a(520),{cause:r});if(i=xr(i,n),null===ml?ml=[i]:ml.push(i),4!==ul&&(ul=2),null===t)return!0;r=xr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,xs(n,e=Fa(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===kl||!kl.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,Ba(o=Da(o),e,n,r),xs(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,rl))return ul=1,Ha(e,xr(n,e.current)),void(nl=null)}catch(i){if(null!==o)throw nl=o,i;return ul=1,Ha(e,xr(n,e.current)),void(nl=null)}32768&t.flags?(Yr||1===r?e=!0:sl||0!==(536870912&rl)?e=!1:(al=e=!0,(2===r||3===r||6===r)&&(null!==(r=Po.current)&&13===r.tag&&(r.flags|=16384))),Xl(t,e)):Jl(t)}function Jl(e){var t=e;do{if(0!==(32768&t.flags))return void Xl(t,al);e=t.return;var n=Vc(t.alternate,t,ll);if(null!==n)return void(nl=n);if(null!==(t=t.sibling))return void(nl=t);nl=t=e}while(null!==t);0===ul&&(ul=5)}function Xl(e,t){do{var n=Yc(e.alternate,e);if(null!==n)return n.flags&=32767,void(nl=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(nl=e);nl=e=n}while(null!==e);ul=6,nl=null}function Zl(e,t,n,r,o,i,s,c,l,u){var d=R.T,h=B.p;try{B.p=2,R.T=null,function(e,t,n,r,o,i,s,c){do{tu()}while(null!==Il);if(0!==(6&el))throw Error(a(327));var l=e.finishedWork;if(r=e.finishedLanes,null===l)return null;if(e.finishedWork=null,e.finishedLanes=0,l===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0,e.cancelPendingCommit=null;var u=l.lanes|l.childLanes;if(function(e,t,n,r,o,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-we(n),d=1<<u;s[u]=0,c[u]=-1;var h=l[u];if(null!==h)for(l[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Oe(e,r,0),0!==i&&0===o&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,r,u|=Tr,i,s,c),e===tl&&(nl=tl=null,rl=0),0===(10256&l.subtreeFlags)&&0===(10256&l.flags)||Sl||(Sl=!0,Al=u,El=n,function(e,t){oe(e,t)}(he,(function(){return tu(),null}))),n=0!==(15990&l.flags),0!==(15990&l.subtreeFlags)||n?(n=R.T,R.T=null,i=B.p,B.p=2,s=el,el|=4,function(e,t){if(e=e.containerInfo,Wu=$d,er(e=Zn(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(m){n=null;break e}var s=0,c=-1,l=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var g;h!==n||0!==o&&3!==h.nodeType||(c=s+o),h!==i||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(g=h.firstChild);)f=h,h=g;for(;;){if(h===e)break t;if(f===n&&++u===o&&(c=s),f===i&&++d===r&&(l=s),null!==(g=h.nextSibling))break;f=(h=f).parentNode}h=g}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gu={focusedElem:e,selectionRange:n},$d=!1,nc=t;null!==nc;)if(e=(t=nc).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,nc=e;else for(;null!==nc;){switch(i=(t=nc).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var p=Oa(n.type,o,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(p,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){ru(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))ad(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":ad(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,nc=e;break}nc=t.return}p=rc,rc=!1}(e,l),gc(l,e),tr(Gu,e.containerInfo),$d=!!Wu,Gu=Wu=null,e.current=l,oc(e,l.alternate,l),se(),el=s,B.p=i,R.T=n):e.current=l,Sl?(Sl=!1,Il=e,Tl=r):eu(e,u),u=e.pendingLanes,0===u&&(kl=null),function(e){if(ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,e,void 0,128===(128&e.current.flags))}catch(t){}}(l.stateNode),pu(e),null!==t)for(o=e.onRecoverableError,l=0;l<t.length;l++)u=t[l],o(u.value,{componentStack:u.stack});0!==(3&Tl)&&tu(),u=e.pendingLanes,0!==(4194218&r)&&0!==(42&u)?e===Pl?_l++:(_l=0,Pl=e):_l=0,mu(0,!1)}(e,t,n,r,h,o,i,s)}finally{R.T=d,B.p=h}}function eu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Bo(t)))}function tu(){if(null!==Il){var e=Il,t=Al;Al=0;var n=Le(Tl),r=R.T,o=B.p;try{if(B.p=32>n?32:n,R.T=null,null===Il)var i=!1;else{n=El,El=null;var s=Il,c=Tl;if(Il=null,Tl=0,0!==(6&el))throw Error(a(331));var l=el;if(el|=4,Mc(s.current),Sc(s,s.current,c,n),el=l,mu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,s)}catch(u){}i=!0}return i}finally{B.p=o,R.T=r,eu(e,t)}}return!1}function nu(e,t,n){t=xr(n,t),null!==(e=Ns(e,t=Fa(e.stateNode,t,2),2))&&(Ne(e,2),pu(e))}function ru(e,t,n){if(3===e.tag)nu(e,e,n);else for(;null!==t;){if(3===t.tag){nu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===kl||!kl.has(r))){e=xr(n,e),null!==(r=Ns(t,n=Da(2),2))&&(Ba(n,r,t,e),Ne(r,2),pu(r));break}}t=t.return}}function ou(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new Zc;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(cl=!0,o.add(n),e=iu.bind(null,e,t,n),t.then(e,e))}function iu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,tl===e&&(rl&n)===n&&(4===ul||3===ul&&(62914560&rl)===rl&&300>ce()-bl?0===(2&el)&&Fl(e,0):fl|=n,pl===rl&&(pl=0)),pu(e)}function au(e,t){0===t&&(t=Re()),null!==(e=Pr(e,t))&&(Ne(e,t),pu(e))}function su(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),au(e,n)}function cu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),au(e,n)}var lu=null,uu=null,du=!1,hu=!1,fu=!1,gu=0;function pu(e){var t;e!==uu&&null===e.next&&(null===uu?lu=uu=e:uu=uu.next=e),hu=!0,du||(du=!0,t=yu,rd((function(){0!==(6&el)?oe(ue,t):t()})))}function mu(e,t){if(!fu&&hu){fu=!0;do{for(var n=!1,r=lu;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var i=0;else{var a=r.suspendedLanes,s=r.pingedLanes;i=(1<<31-we(42|e)+1)-1,i=201326677&(i&=o&~(a&~s))?201326677&i|1:i?2|i:0}0!==i&&(n=!0,wu(r,i))}else i=rl,0===(3&(i=Ae(r,r===tl?i:0)))||Ee(r,i)||(n=!0,wu(r,i));r=r.next}}while(n);fu=!1}}function yu(){hu=du=!1;var e=0;0!==gu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==Zu&&(Zu=e,!0);return Zu=null,!1}()&&(e=gu),gu=0);for(var t=ce(),n=null,r=lu;null!==r;){var o=r.next,i=vu(r,t);0===i?(r.next=null,null===n?lu=o:n.next=o,null===o&&(uu=n)):(n=r,(0!==e||0!==(3&i))&&(hu=!0)),r=o}mu(e,!1)}function vu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-we(i),s=1<<a,c=o[a];-1===c?0!==(s&n)&&0===(s&r)||(o[a]=_e(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}if(n=rl,n=Ae(e,e===(t=tl)?n:0),r=e.callbackNode,0===n||e===t&&2===ol||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ee(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Le(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=ge}return r=bu.bind(null,e),n=oe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function bu(e,t){var n=e.callbackNode;if(tu()&&e.callbackNode!==n)return null;var r=rl;return 0===(r=Ae(e,e===tl?r:0))?null:(Ol(e,r,t),vu(e,ce()),null!=e.callbackNode&&e.callbackNode===n?bu.bind(null,e):null)}function wu(e,t){if(tu())return null;Ol(e,t,!0)}function Cu(){return 0===gu&&(gu=Pe()),gu}function ku(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Su(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Iu=0;Iu<Cr.length;Iu++){var Tu=Cr[Iu];kr(Tu.toLowerCase(),"on"+(Tu[0].toUpperCase()+Tu.slice(1)))}kr(fr,"onAnimationEnd"),kr(gr,"onAnimationIteration"),kr(pr,"onAnimationStart"),kr("dblclick","onDoubleClick"),kr("focusin","onFocus"),kr("focusout","onBlur"),kr(mr,"onTransitionRun"),kr(yr,"onTransitionStart"),kr(vr,"onTransitionCancel"),kr(br,"onTransitionEnd"),tt("onMouseEnter",["mouseout","mouseover"]),tt("onMouseLeave",["mouseout","mouseover"]),tt("onPointerEnter",["pointerout","pointerover"]),tt("onPointerLeave",["pointerout","pointerover"]),et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),et("onBeforeInput",["compositionend","keypress","textInput","paste"]),et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Eu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Au));function _u(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=l;try{i(o)}catch(u){xa(u)}o.currentTarget=null,i=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,l=s.currentTarget,s=s.listener,c!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=l;try{i(o)}catch(u){xa(u)}o.currentTarget=null,i=c}}}}function Pu(e,t){var n=t[De];void 0===n&&(n=t[De]=new Set);var r=e+"__bubble";n.has(r)||(Ou(t,e,2,!1),n.add(r))}function Ru(e,t,n){var r=0;t&&(r|=4),Ou(n,e,r,t)}var Mu="_reactListening"+Math.random().toString(36).slice(2);function Nu(e){if(!e[Mu]){e[Mu]=!0,Xe.forEach((function(t){"selectionchange"!==t&&(Eu.has(t)||Ru(t,!1,e),Ru(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Mu]||(t[Mu]=!0,Ru("selectionchange",!1,t))}}function Ou(e,t,n,r){switch(Jd(t)){case 2:var o=jd;break;case 8:o=Qd;break;default:o=Wd}n=o.bind(null,t,n,e),o=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function xu(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===o||8===c.nodeType&&c.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=We(s)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}s=s.parentNode}}r=r.return}qt((function(){var r=i,o=Mt(n),a=[];e:{var s=wr.get(e);if(void 0!==s){var c=Xt,l=e;switch(e){case"keypress":if(0===$t(n))break e;case"keydown":case"keyup":c=gn;break;case"focusin":l="focus",c=on;break;case"focusout":l="blur",c=on;break;case"beforeblur":case"afterblur":c=on;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=nn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=mn;break;case fr:case gr:case pr:c=an;break;case br:c=yn;break;case"scroll":case"scrollend":c=en;break;case"wheel":c=vn;break;case"copy":case"cut":case"paste":c=sn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=pn;break;case"toggle":case"beforetoggle":c=bn}var u=0!==(4&t),d=!u&&("scroll"===e||"scrollend"===e),h=u?null!==s?s+"Capture":null:s;u=[];for(var f,g=r;null!==g;){var p=g;if(f=p.stateNode,5!==(p=p.tag)&&26!==p&&27!==p||null===f||null===h||null!=(p=Ut(g,h))&&u.push(Lu(g,p,f)),d)break;g=g.return}0<u.length&&(s=new c(s,l,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Rt||!(l=n.relatedTarget||n.fromElement)||!We(l)&&!l[Fe])&&(c||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?We(l):null)&&(d=U(l),u=l.tag,l!==d||5!==u&&27!==u&&6!==u)&&(l=null)):(c=null,l=r),c!==l)){if(u=nn,p="onMouseLeave",h="onMouseEnter",g="mouse","pointerout"!==e&&"pointerover"!==e||(u=pn,p="onPointerLeave",h="onPointerEnter",g="pointer"),d=null==c?s:Ve(c),f=null==l?s:Ve(l),(s=new u(p,g+"leave",c,n,o)).target=d,s.relatedTarget=f,p=null,We(o)===r&&((u=new u(h,g+"enter",l,n,o)).target=f,u.relatedTarget=d,p=u),d=p,c&&l)e:{for(h=l,g=0,f=u=c;f;f=Uu(f))g++;for(f=0,p=h;p;p=Uu(p))f++;for(;0<g-f;)u=Uu(u),g--;for(;0<f-g;)h=Uu(h),f--;for(;g--;){if(u===h||null!==h&&u===h.alternate)break e;u=Uu(u),h=Uu(h)}u=null}else u=null;null!==c&&Hu(a,s,c,u,!1),null!==l&&null!==d&&Hu(a,d,l,u,!0)}if("select"===(c=(s=r?Ve(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var m=Un;else if(Mn(s))if(Hn)m=Wn;else{m=jn;var y=$n}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&At(r.elementType)&&(m=Un):m=Qn;switch(m&&(m=m(e,r))?Nn(a,m,n,o):(y&&y(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&vt(s,"number",s.value)),y=r?Ve(r):window,e){case"focusin":(Mn(y)||"true"===y.contentEditable)&&(rr=y,or=r,ir=null);break;case"focusout":ir=or=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,sr(a,n,o);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":sr(a,n,o)}var v;if(Cn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Pn?En(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(In&&"ko"!==n.locale&&(Pn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Pn&&(v=Kt()):(Dt="value"in(Ft=o)?Ft.value:Ft.textContent,Pn=!0)),0<(y=qu(r,b)).length&&(b=new cn(b,e,null,n,o),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=_n(n))&&(b.data=v))),(v=Sn?function(e,t){switch(e){case"compositionend":return _n(t);case"keypress":return 32!==t.which?null:(An=!0,Tn);case"textInput":return(e=t.data)===Tn&&An?null:e;default:return null}}(e,n):function(e,t){if(Pn)return"compositionend"===e||!Cn&&En(e,t)?(e=Kt(),Bt=Dt=Ft=null,Pn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return In&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(b=qu(r,"onBeforeInput")).length&&(y=new cn("onBeforeInput","beforeinput",null,n,o),a.push({event:y,listeners:b}),y.data=v)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var i=ku((o[ze]||null).action),a=r.submitter;a&&null!==(t=(t=a[ze]||null)?ku(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var s=new Xt("action","action",null,r,o);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==gu){var e=a?Su(o,a):new FormData(o);da(n,{pending:!0,data:e,method:o.method,action:i},null,e)}}else"function"===typeof i&&(s.preventDefault(),e=a?Su(o,a):new FormData(o),da(n,{pending:!0,data:e,method:o.method,action:i},i,e))},currentTarget:o}]})}}(a,e,r,n,o)}_u(a,t)}))}function Lu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qu(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5!==(o=o.tag)&&26!==o&&27!==o||null===i||(null!=(o=Ut(e,n))&&r.unshift(Lu(e,o,i)),null!=(o=Ut(e,t))&&r.push(Lu(e,o,i))),e=e.return}return r}function Uu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Hu(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,null!==c&&c===r)break;5!==s&&26!==s&&27!==s||null===l||(c=l,o?null!=(l=Ut(n,i))&&a.unshift(Lu(n,l,c)):o||null!=(l=Ut(n,i))&&a.push(Lu(n,l,c))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var zu=/\r\n?/g,Fu=/\u0000|\uFFFD/g;function Du(e){return("string"===typeof e?e:""+e).replace(zu,"\n").replace(Fu,"")}function Bu(e,t){return t=Du(t),Du(e)===t}function Ku(){}function $u(e,t,n,r,o,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":st(e,"class",r);break;case"tabIndex":st(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":st(e,n,r);break;case"style":Tt(e,r,i);break;case"data":if("object"!==t){st(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&$u(e,t,"name",o.name,o,null),$u(e,t,"formEncType",o.formEncType,o,null),$u(e,t,"formMethod",o.formMethod,o,null),$u(e,t,"formTarget",o.formTarget,o,null)):($u(e,t,"encType",o.encType,o,null),$u(e,t,"method",o.method,o,null),$u(e,t,"target",o.target,o,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Ku);break;case"onScroll":null!=r&&Pu("scroll",e);break;case"onScrollEnd":null!=r&&Pu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Pt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Pu("beforetoggle",e),Pu("toggle",e),at(e,"popover",r);break;case"xlinkActuate":ct(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ct(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ct(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ct(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ct(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ct(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ct(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ct(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ct(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":at(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&at(e,n=Et.get(n)||n,r)}}function ju(e,t,n,r,o,i){switch(n){case"style":Tt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Pu("scroll",e);break;case"onScrollEnd":null!=r&&Pu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Ku);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ze.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"===typeof(i=null!=(i=e[ze]||null)?i[n]:null)&&e.removeEventListener(t,i,o),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):at(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function Qu(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Pu("error",e),Pu("load",e);var r,o=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":o=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:$u(e,t,r,s,n,null)}}return i&&$u(e,t,"srcSet",n.srcSet,n,null),void(o&&$u(e,t,"src",n.src,n,null));case"input":Pu("invalid",e);var c=r=s=i=null,l=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":i=d;break;case"type":s=d;break;case"checked":l=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":c=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:$u(e,t,o,d,n,null)}}return yt(e,r,c,l,u,s,i,!1),void dt(e);case"select":for(i in Pu("invalid",e),o=s=r=null,n)if(n.hasOwnProperty(i)&&null!=(c=n[i]))switch(i){case"value":r=c;break;case"defaultValue":s=c;break;case"multiple":o=c;default:$u(e,t,i,c,n,null)}return t=r,n=s,e.multiple=!!o,void(null!=t?bt(e,!!o,t,!1):null!=n&&bt(e,!!o,n,!0));case"textarea":for(s in Pu("invalid",e),r=i=o=null,n)if(n.hasOwnProperty(s)&&null!=(c=n[s]))switch(s){case"value":o=c;break;case"defaultValue":i=c;break;case"children":r=c;break;case"dangerouslySetInnerHTML":if(null!=c)throw Error(a(91));break;default:$u(e,t,s,c,n,null)}return Ct(e,o,i,r),void dt(e);case"option":for(l in n)if(n.hasOwnProperty(l)&&null!=(o=n[l]))if("selected"===l)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else $u(e,t,l,o,n,null);return;case"dialog":Pu("cancel",e),Pu("close",e);break;case"iframe":case"object":Pu("load",e);break;case"video":case"audio":for(o=0;o<Au.length;o++)Pu(Au[o],e);break;case"image":Pu("error",e),Pu("load",e);break;case"details":Pu("toggle",e);break;case"embed":case"source":case"link":Pu("error",e),Pu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:$u(e,t,u,o,n,null)}return;default:if(At(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&ju(e,t,d,o,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(null!=(o=n[c])&&$u(e,t,c,o,n,null))}var Wu=null,Gu=null;function Vu(e){return 9===e.nodeType?e:e.ownerDocument}function Yu(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ju(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function Xu(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Zu=null;var ed="function"===typeof setTimeout?setTimeout:void 0,td="function"===typeof clearTimeout?clearTimeout:void 0,nd="function"===typeof Promise?Promise:void 0,rd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nd?function(e){return nd.resolve(null).then(e).catch(od)}:ed;function od(e){setTimeout((function(){throw e}))}function id(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void ph(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);ph(t)}function ad(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":ad(n),Qe(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function sd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}function cd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function ld(e,t,n){switch(t=Vu(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}var ud=new Map,dd=new Set;function hd(e){return"function"===typeof e.getRootNode?e.getRootNode():e.ownerDocument}var fd=B.d;B.d={f:function(){var e=fd.f(),t=Hl();return e||t},r:function(e){var t=Ge(e);null!==t&&5===t.tag&&"form"===t.type?fa(t):fd.r(e)},D:function(e){fd.D(e),pd("dns-prefetch",e,null)},C:function(e,t){fd.C(e,t),pd("preconnect",e,t)},L:function(e,t,n){fd.L(e,t,n);var r=gd;if(r&&e&&t){var o='link[rel="preload"][as="'+pt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+pt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(o+='[imagesizes="'+pt(n.imageSizes)+'"]')):o+='[href="'+pt(e)+'"]';var i=o;switch(t){case"style":i=yd(e);break;case"script":i=wd(e)}ud.has(i)||(e=M({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),ud.set(i,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(vd(i))||"script"===t&&r.querySelector(Cd(i))||(Qu(t=r.createElement("link"),"link",e),Je(t),r.head.appendChild(t)))}},m:function(e,t){fd.m(e,t);var n=gd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+pt(r)+'"][href="'+pt(e)+'"]',i=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=wd(e)}if(!ud.has(i)&&(e=M({rel:"modulepreload",href:e},t),ud.set(i,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Cd(i)))return}Qu(r=n.createElement("link"),"link",e),Je(r),n.head.appendChild(r)}}},X:function(e,t){fd.X(e,t);var n=gd;if(n&&e){var r=Ye(n).hoistableScripts,o=wd(e),i=r.get(o);i||((i=n.querySelector(Cd(o)))||(e=M({src:e,async:!0},t),(t=ud.get(o))&&Td(e,t),Je(i=n.createElement("script")),Qu(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}},S:function(e,t,n){fd.S(e,t,n);var r=gd;if(r&&e){var o=Ye(r).hoistableStyles,i=yd(e);t=t||"default";var a=o.get(i);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(vd(i)))s.loading=5;else{e=M({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ud.get(i))&&Id(e,n);var c=a=r.createElement("link");Je(c),Qu(c,"link",e),c._p=new Promise((function(e,t){c.onload=e,c.onerror=t})),c.addEventListener("load",(function(){s.loading|=1})),c.addEventListener("error",(function(){s.loading|=2})),s.loading|=4,Sd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},o.set(i,a)}}},M:function(e,t){fd.M(e,t);var n=gd;if(n&&e){var r=Ye(n).hoistableScripts,o=wd(e),i=r.get(o);i||((i=n.querySelector(Cd(o)))||(e=M({src:e,async:!0,type:"module"},t),(t=ud.get(o))&&Td(e,t),Je(i=n.createElement("script")),Qu(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}};var gd="undefined"===typeof document?null:document;function pd(e,t,n){var r=gd;if(r&&"string"===typeof t&&t){var o=pt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof n&&(o+='[crossorigin="'+n+'"]'),dd.has(o)||(dd.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(Qu(t=r.createElement("link"),"link",e),Je(t),r.head.appendChild(t)))}}function md(e,t,n,r){var o,i,s,c,l=(l=J.current)?hd(l):null;if(!l)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=yd(n.href),(r=(n=Ye(l).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=yd(n.href);var u=Ye(l).hoistableStyles,d=u.get(e);if(d||(l=l.ownerDocument||l,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=l.querySelector(vd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),ud.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ud.set(e,n),u||(o=l,i=e,s=n,c=d.state,o.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=o.createElement("link"),c.preload=i,i.addEventListener("load",(function(){return c.loading|=1})),i.addEventListener("error",(function(){return c.loading|=2})),Qu(i,"link",s),Je(i),o.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=wd(n),(r=(n=Ye(l).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function yd(e){return'href="'+pt(e)+'"'}function vd(e){return'link[rel="stylesheet"]['+e+"]"}function bd(e){return M({},e,{"data-precedence":e.precedence,precedence:null})}function wd(e){return'[src="'+pt(e)+'"]'}function Cd(e){return"script[async]"+e}function kd(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+pt(n.href)+'"]');if(r)return t.instance=r,Je(r),r;var o=M({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Je(r=(e.ownerDocument||e).createElement("style")),Qu(r,"style",o),Sd(r,n.precedence,e),t.instance=r;case"stylesheet":o=yd(n.href);var i=e.querySelector(vd(o));if(i)return t.state.loading|=4,t.instance=i,Je(i),i;r=bd(n),(o=ud.get(o))&&Id(r,o),Je(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise((function(e,t){s.onload=e,s.onerror=t})),Qu(i,"link",r),t.state.loading|=4,Sd(i,n.precedence,e),t.instance=i;case"script":return i=wd(n.src),(o=e.querySelector(Cd(i)))?(t.instance=o,Je(o),o):(r=n,(o=ud.get(i))&&Td(r=M({},n),o),Je(o=(e=e.ownerDocument||e).createElement("script")),Qu(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Sd(r,n.precedence,e));return t.instance}function Sd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,i=o,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)i=s;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Id(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Td(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ad=null;function Ed(e,t,n){if(null===Ad){var r=new Map,o=Ad=new Map;o.set(n,r)}else(r=(o=Ad).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[je]||i[He]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(i):r.set(a,[i])}}return r}function _d(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function Pd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Rd=null;function Md(){}function Nd(){if(this.count--,0===this.count)if(this.stylesheets)xd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Od=null;function xd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Od=new Map,t.forEach(Ld,e),Od=null,Nd.call(e))}function Ld(e,t){if(!(4&t.state.loading)){var n=Od.get(e);if(n)var r=n.get(null);else{n=new Map,Od.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var a=o[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(o=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,o),n.set(a,o),this.count++,r=Nd.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),i?i.parentNode.insertBefore(o,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var qd={$$typeof:m,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Ud(e,t,n,r,o,i,a,s){this.tag=1,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Hd(e,t,n,r,o,i,a,s,c,l,u,d){return e=new Ud(e,t,n,a,s,c,l,d),t=1,!0===i&&(t|=24),i=Lc(3,null,null,t),e.current=i,i.stateNode=e,(t=Do()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},Ps(i),e}function zd(e){return e?e=Nr:Nr}function Fd(e,t,n,r,o,i){o=zd(o),null===r.context?r.context=o:r.pendingContext=o,(r=Ms(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=Ns(e,r,t))&&(Nl(n,0,t),Os(n,e,t))}function Dd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Bd(e,t){Dd(e,t),(e=e.alternate)&&Dd(e,t)}function Kd(e){if(13===e.tag){var t=Pr(e,67108864);null!==t&&Nl(t,0,67108864),Bd(e,67108864)}}var $d=!0;function jd(e,t,n,r){var o=R.T;R.T=null;var i=B.p;try{B.p=2,Wd(e,t,n,r)}finally{B.p=i,R.T=o}}function Qd(e,t,n,r){var o=R.T;R.T=null;var i=B.p;try{B.p=8,Wd(e,t,n,r)}finally{B.p=i,R.T=o}}function Wd(e,t,n,r){if($d){var o=Gd(r);if(null===o)xu(e,t,r,Vd,n),ah(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Zd=sh(Zd,e,t,n,r,o),!0;case"dragenter":return eh=sh(eh,e,t,n,r,o),!0;case"mouseover":return th=sh(th,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return nh.set(i,sh(nh.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,rh.set(i,sh(rh.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(ah(e,r),4&t&&-1<ih.indexOf(e)){for(;null!==o;){var i=Ge(o);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=Te(i.pendingLanes);if(0!==a){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var c=1<<31-we(a);s.entanglements[1]|=c,a&=~c}pu(i),0===(6&el)&&(wl=ce()+500,mu(0,!1))}}break;case 13:null!==(s=Pr(i,2))&&Nl(s,0,2),Hl(),Bd(i,2)}if(null===(i=Gd(r))&&xu(e,t,r,Vd,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else xu(e,t,r,null,n)}}function Gd(e){return Yd(e=Mt(e))}var Vd=null;function Yd(e){if(Vd=null,null!==(e=We(e))){var t=U(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=H(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Vd=e,null}function Jd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(le()){case ue:return 2;case de:return 8;case he:case fe:return 32;case ge:return 268435456;default:return 32}default:return 32}}var Xd=!1,Zd=null,eh=null,th=null,nh=new Map,rh=new Map,oh=[],ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ah(e,t){switch(e){case"focusin":case"focusout":Zd=null;break;case"dragenter":case"dragleave":eh=null;break;case"mouseover":case"mouseout":th=null;break;case"pointerover":case"pointerout":nh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":rh.delete(t.pointerId)}}function sh(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=Ge(t))&&Kd(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function ch(e){var t=We(e.target);if(null!==t){var n=U(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=H(n)))return e.blockedOn=t,void function(e,t){var n=B.p;try{return B.p=e,t()}finally{B.p=n}}(e.priority,(function(){if(13===n.tag){var e=Rl(),t=Pr(n,e);null!==t&&Nl(t,0,e),Bd(n,e)}}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function lh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gd(e.nativeEvent);if(null!==n)return null!==(t=Ge(n))&&Kd(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function uh(e,t,n){lh(e)&&n.delete(t)}function dh(){Xd=!1,null!==Zd&&lh(Zd)&&(Zd=null),null!==eh&&lh(eh)&&(eh=null),null!==th&&lh(th)&&(th=null),nh.forEach(uh),rh.forEach(uh)}function hh(e,t){e.blockedOn===t&&(e.blockedOn=null,Xd||(Xd=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,dh)))}var fh=null;function gh(e){fh!==e&&(fh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,(function(){fh===e&&(fh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!==typeof r){if(null===Yd(r||n))continue;break}var i=Ge(n);null!==i&&(e.splice(t,3),t-=3,da(i,{pending:!0,data:o,method:n.method,action:r},r,o))}})))}function ph(e){function t(t){return hh(t,e)}null!==Zd&&hh(Zd,e),null!==eh&&hh(eh,e),null!==th&&hh(th,e),nh.forEach(t),rh.forEach(t);for(var n=0;n<oh.length;n++){var r=oh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<oh.length&&null===(n=oh[0]).blockedOn;)ch(n),null===n.blockedOn&&oh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],i=n[r+1],a=o[ze]||null;if("function"===typeof i)a||gh(n);else if(a){var s=null;if(i&&i.hasAttribute("formAction")){if(o=i,a=i[ze]||null)s=a.formAction;else if(null!==Yd(o))continue}else s=a.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),gh(n)}}}function mh(e){this._internalRoot=e}function yh(e){this._internalRoot=e}yh.prototype.render=mh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Fd(t.current,Rl(),e,t,null,null)},yh.prototype.unmount=mh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;0===e.tag&&tu(),Fd(e.current,2,null,e,null,null),Hl(),t[Fe]=null}},yh.prototype.unstable_scheduleHydration=function(e){if(e){var t=qe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<oh.length&&0!==t&&t<oh[n].priority;n++);oh.splice(n,0,e),0===n&&ch(e)}};var vh=o.version;if("19.0.0"!==vh)throw Error(a(527,vh,"19.0.0"));B.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=U(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return z(o),e;if(i===r)return z(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,c=o.child;c;){if(c===n){s=!0,n=o,r=i;break}if(c===r){s=!0,r=o,n=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===n){s=!0,n=i,r=o;break}if(c===r){s=!0,r=i,n=o;break}c=c.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?F(e):null)?null:e.stateNode};var bh={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:R,findFiberByHostInstance:We,reconcilerVersion:"19.0.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wh.isDisabled&&wh.supportsFiber)try{ye=wh.inject(bh),ve=wh}catch(kh){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",o=La,i=qa,c=Ua;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(c=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Hd(e,1,!1,null,0,n,r,o,i,c,0,null),e[Fe]=t.current,Nu(8===e.nodeType?e.parentNode:e),new mh(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,o="",i=La,c=qa,l=Ua,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(c=n.onCaughtError),void 0!==n.onRecoverableError&&(l=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Hd(e,1,!0,t,0,r,o,i,c,l,0,u)).context=zd(null),n=t.current,(o=Ms(r=Rl())).callback=null,Ns(n,o,r),t.current.lanes=r,Ne(t,r),pu(t),e[Fe]=t.current,Nu(e),new yh(t)},t.version="19.0.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||g}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,p(w,y.prototype),w.isPureReactComponent=!0;var C=Array.isArray,k={H:null,A:null,T:null,S:null},S=Object.prototype.hasOwnProperty;function I(e,t,r,o,i,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function _(){}function P(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c,l,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return P((u=e._init)(e._payload),t,o,i,a)}}if(u)return a=a(e),u=""===i?"."+E(e,0):i,C(a)?(o="",null!=u&&(o=u.replace(A,"$&/")+"/"),P(a,t,o,"",(function(e){return e}))):null!=a&&(T(a)&&(c=a,l=o+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+u,a=I(c.type,l,void 0,0,0,c.props)),t.push(a)),1;u=0;var d,g=""===i?".":i+":";if(C(e))for(var p=0;p<e.length;p++)u+=P(i=e[p],t,o,s=g+E(i,p),a);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(i=e.next()).done;)u+=P(i=i.value,t,o,s=g+E(i,p++),a);else if("object"===s){if("function"===typeof e.then)return P(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then((function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)}),(function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)}))),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function R(e,t,n){if(null==e)return e;var r=[],o=0;return P(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function O(){}t.Children={map:R,forEach:function(e,t,n){R(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.act=function(){throw Error("act(...) is not supported in production builds of React.")},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=p({},e.props),o=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(o=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),s=0;s<i;s++)a[s]=arguments[s+2];r.children=a}return I(e.type,o,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var a=arguments.length-2;if(1===a)o.children=n;else if(1<a){for(var s=Array(a),c=0;c<a;c++)s[c]=arguments[c+2];o.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===o[r]&&(o[r]=a[r]);return I(e,i,void 0,0,0,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),o=k.S;null!==o&&o(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(O,N)}catch(i){N(i)}finally{k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return k.H.useEffect(e,t)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.0.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(o(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=c.T,n=a.p;try{if(c.T=null,a.p=2,e)return e()}finally{c.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=l(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=l(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return c.H.useFormState(e,t,n)},t.useFormStatus=function(){return c.H.useHostTransitionStatus()},t.version="19.0.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=o,t.jsxs=o},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<o&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else{if(!(l<o&&0>i(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,h=null,f=3,g=!1,p=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function C(e){if(m=!1,w(e),!p)if(null!==r(l))p=!0,M();else{var t=r(u);null!==t&&N(C,t.startTime-e)}}var k,S=!1,I=-1,T=5,A=-1;function E(){return!(t.unstable_now()-A<T)}function _(){if(S){var e=t.unstable_now();A=e;var n=!0;try{e:{p=!1,m&&(m=!1,v(I),I=-1),g=!0;var i=f;try{t:{for(w(e),h=r(l);null!==h&&!(h.expirationTime>e&&E());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,w(e),n=!0;break t}h===r(l)&&o(l),w(e)}else o(l);h=r(l)}if(null!==h)n=!0;else{var c=r(u);null!==c&&N(C,c.startTime-e),n=!1}}break e}finally{h=null,f=i,g=!1}n=void 0}}finally{n?k():S=!1}}}if("function"===typeof b)k=function(){b(_)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=_,k=function(){R.postMessage(null)}}else k=function(){y(_,0)};function M(){S||(S=!0,k())}function N(e,n){I=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,M())},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(l)&&e===r(u)&&(m?(v(I),I=-1):m=!0,N(C,i-a))):(e.sortIndex=s,n(l,e),p||g||(p=!0,M())),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".43026e27.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="react-preview-application:";n.l=(r,o,i,a)=>{if(e[r])e[r].push(o);else{var s,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[o];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/react-preview-application/",(()=>{var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((n,r)=>o=e[t]=[n,r]));r.push(o[2]=i);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,i,a=r[0],s=r[1],c=r[2],l=0;if(a.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(c)c(n)}for(t&&t(r);l<a.length;l++)i=a[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkreact_preview_application=self.webpackChunkreact_preview_application||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),o=n(391);const i={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},a=400,s=499,c=500,l=599,u=[i.OPENID_SCOPE,i.PROFILE_SCOPE,i.OFFLINE_ACCESS_SCOPE],d=[...u,i.EMAIL_SCOPE],h="Content-Type",f="Content-Length",g="Retry-After",p="X-AnchorMailbox",m="x-ms-request-id",y="x-ms-httpver",v="active-account-filters",b="common",w="organizations",C="consumers",k="access_token",S="xms_cc",I={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},T={PLAIN:"plain",S256:"S256"},A={QUERY:"query",FRAGMENT:"fragment"},E={...A,FORM_POST:"form_post"},_="authorization_code",P="refresh_token",R="MSSTS",M="ADFS",N="Generic",O="-",x=".",L={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},q="appmetadata",U="1",H="authority-metadata",z=86400,F="config",D="cache",B="network",K="hardcoded_values",$={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},j={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},Q=60,W=3600,G="throttling",V="retry-after, h429",Y="invalid_grant",J="client_mismatch",X="username",Z="password",ee=200,te=400,ne="1",re="3",oe="4",ie="2",ae="4",se="5",ce="0",le="1",ue="2",de="3",he="4",fe="pop";var ge;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(ge||(ge={}));class pe{constructor(e,t,n){this.level=ge.Info;const r=e||pe.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"===typeof r.logLevel?r.logLevel:ge.Info,this.correlationId=r.correlationId||i.EMPTY_STRING,this.packageName=t||i.EMPTY_STRING,this.packageVersion=n||i.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ge.Info}}clone(e,t,n){return new pe({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=`${`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${ge[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,n,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:ge.Error,containsPii:!1,correlationId:t||i.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:ge.Error,containsPii:!0,correlationId:t||i.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:ge.Warning,containsPii:!1,correlationId:t||i.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:ge.Warning,containsPii:!0,correlationId:t||i.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:ge.Info,containsPii:!1,correlationId:t||i.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:ge.Info,containsPii:!0,correlationId:t||i.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:ge.Verbose,containsPii:!1,correlationId:t||i.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:ge.Verbose,containsPii:!0,correlationId:t||i.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:ge.Trace,containsPii:!1,correlationId:t||i.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:ge.Trace,containsPii:!0,correlationId:t||i.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const me="AAD",ye="OIDC",ve="none",be="unexpected_error",we="post_request_failed",Ce={[be]:"Unexpected error in authentication.",[we]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class ke extends Error{constructor(e,t,n){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,ke.prototype),this.errorCode=e||i.EMPTY_STRING,this.errorMessage=t||i.EMPTY_STRING,this.subError=n||i.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function Se(e,t){return new ke(e,t?`${Ce[e]} ${t}`:Ce[e])}const Ie="client_info_decoding_error",Te="client_info_empty_error",Ae="token_parsing_error",Ee="null_or_empty_token",_e="endpoints_resolution_error",Pe="network_error",Re="openid_config_error",Me="hash_not_deserialized",Ne="invalid_state",Oe="state_mismatch",xe="state_not_found",Le="nonce_mismatch",qe="auth_time_not_found",Ue="max_age_transpired",He="multiple_matching_tokens",ze="multiple_matching_accounts",Fe="multiple_matching_appMetadata",De="request_cannot_be_made",Be="cannot_remove_empty_scope",Ke="cannot_append_scopeset",$e="empty_input_scopeset",je="device_code_polling_cancelled",Qe="device_code_expired",We="device_code_unknown_error",Ge="no_account_in_silent_request",Ve="invalid_cache_record",Ye="invalid_cache_environment",Je="no_account_found",Xe="no_crypto_object",Ze="unexpected_credential_type",et="invalid_assertion",tt="invalid_client_credential",nt="token_refresh_required",rt="user_timeout_reached",ot="token_claims_cnf_required_for_signedjwt",it="authorization_code_missing_from_server_response",at="binding_key_not_removed",st="end_session_endpoint_not_supported",ct="key_id_missing",lt="no_network_connectivity",ut="user_canceled",dt="missing_tenant_id_error",ht="method_not_implemented",ft="nested_app_auth_bridge_disabled",gt={[Ie]:"The client info could not be parsed/decoded correctly",[Te]:"The client info was empty",[Ae]:"Token cannot be parsed",[Ee]:"The token is null or empty",[_e]:"Endpoints cannot be resolved",[Pe]:"Network request failed",[Re]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Me]:"The hash parameters could not be deserialized",[Ne]:"State was not the expected format",[Oe]:"State mismatch error",[xe]:"State not found",[Le]:"Nonce mismatch error",[qe]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Ue]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[He]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[ze]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Fe]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[De]:"Token request cannot be made without authorization code or refresh token.",[Be]:"Cannot remove null or empty scope from ScopeSet",[Ke]:"Cannot append ScopeSet",[$e]:"Empty input ScopeSet cannot be processed",[je]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Qe]:"Device code is expired.",[We]:"Device code stopped polling for unknown reasons.",[Ge]:"Please pass an account object, silent flow is not supported without account information",[Ve]:"Cache record object was null or undefined.",[Ye]:"Invalid environment when attempting to create cache entry",[Je]:"No account found in cache for given key.",[Xe]:"No crypto object detected.",[Ze]:"Unexpected credential type.",[et]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[tt]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[nt]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[rt]:"User defined timeout for device code polling reached",[ot]:"Cannot generate a POP jwt if the token_claims are not populated",[it]:"Server response does not contain an authorization code to proceed",[at]:"Could not remove the credential's binding key from storage.",[st]:"The provided authority does not support logout",[ct]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[lt]:"No network connectivity. Check your internet connection.",[ut]:"User cancelled the flow.",[dt]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ht]:"This method has not been implemented",[ft]:"The nested app auth bridge is disabled"};class pt extends ke{constructor(e,t){super(e,t?`${gt[e]}: ${t}`:gt[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,pt.prototype)}}function mt(e,t){return new pt(e,t)}const yt={createNewGuid:()=>{throw mt(ht)},base64Decode:()=>{throw mt(ht)},base64Encode:()=>{throw mt(ht)},base64UrlEncode:()=>{throw mt(ht)},encodeKid:()=>{throw mt(ht)},async getPublicKeyThumbprint(){throw mt(ht)},async removeTokenBindingKey(){throw mt(ht)},async clearKeystore(){throw mt(ht)},async signJwt(){throw mt(ht)},async hashString(){throw mt(ht)}},vt="@azure/msal-common",bt="15.2.0";function wt(e,t){const n=function(e){if(!e)throw mt(Ee);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw mt(Ae);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(r){throw mt(Ae)}}function Ct(e,t){if(0===t||Date.now()-3e5>e+t)throw mt(Ue)}function kt(){return Math.round((new Date).getTime()/1e3)}function St(e,t){const n=Number(e)||0;return kt()+t>n}function It(e){return[Pt(e),Rt(e),Mt(e),Nt(e),Ot(e)].join(O).toLowerCase()}function Tt(e,t,n,r,o){return{credentialType:L.ID_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,realm:o}}function At(e,t,n,r,o,i,a,s,c,l,u,d,h,f,g){const p={homeAccountId:e,credentialType:L.ACCESS_TOKEN,secret:n,cachedAt:kt().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:r,realm:o,target:i,tokenType:u||j.BEARER};if(d&&(p.userAssertionHash=d),l&&(p.refreshOn=l.toString()),f&&(p.requestedClaims=f,p.requestedClaimsHash=g),p.tokenType?.toLowerCase()!==j.BEARER.toLowerCase())switch(p.credentialType=L.ACCESS_TOKEN_WITH_AUTH_SCHEME,p.tokenType){case j.POP:const e=wt(n,c);if(!e?.cnf?.kid)throw mt(ot);p.keyId=e.cnf.kid;break;case j.SSH:p.keyId=h}return p}function Et(e,t,n,r,o,i,a){const s={credentialType:L.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n};return i&&(s.userAssertionHash=i),o&&(s.familyId=o),a&&(s.expiresOn=a.toString()),s}function _t(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function Pt(e){return[e.homeAccountId,e.environment].join(O).toLowerCase()}function Rt(e){const t=e.credentialType===L.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(O).toLowerCase()}function Mt(e){return(e.target||"").toLowerCase()}function Nt(e){return(e.requestedClaimsHash||"").toLowerCase()}function Ot(e){return e.tokenType&&e.tokenType.toLowerCase()!==j.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function xt(){return kt()+z}function Lt(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function qt(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function Ut(e){return e.expiresAt<=kt()}const Ht="redirect_uri_empty",zt="claims_request_parsing_error",Ft="authority_uri_insecure",Dt="url_parse_error",Bt="empty_url_error",Kt="empty_input_scopes_error",$t="invalid_prompt_value",jt="invalid_claims",Qt="token_request_empty",Wt="logout_request_empty",Gt="invalid_code_challenge_method",Vt="pkce_params_missing",Yt="invalid_cloud_discovery_metadata",Jt="invalid_authority_metadata",Xt="untrusted_authority",Zt="missing_ssh_jwk",en="missing_ssh_kid",tn="missing_nonce_authentication_header",nn="invalid_authentication_header",rn="cannot_set_OIDCOptions",on="cannot_allow_platform_broker",an="authority_mismatch",sn={[Ht]:"A redirect URI is required for all calls, and none has been set.",[zt]:"Could not parse the given claims request object.",[Ft]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Dt]:"URL could not be parsed into appropriate segments.",[Bt]:"URL was empty or null.",[Kt]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[$t]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[jt]:"Given claims parameter must be a stringified JSON object.",[Qt]:"Token request was empty and not found in cache.",[Wt]:"The logout request was null or undefined.",[Gt]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Vt]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Yt]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[Jt]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[Xt]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Zt]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[en]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[tn]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[nn]:"Invalid authentication header provided",[rn]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[on]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[an]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class cn extends ke{constructor(e){super(e,sn[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,cn.prototype)}}function ln(e){return new cn(e)}class un{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(t){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach((e=>{if(e.trim()){const[n,o]=e.split(/=(.+)/g,2);n&&o&&(t[r(n)]=r(o))}})),t}static trimArrayEntries(e){return e.map((e=>e.trim()))}static removeEmptyStringsFromArray(e){return e.filter((e=>!!e))}static jsonParseHelper(e){try{return JSON.parse(e)}catch(t){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class dn{constructor(e){const t=e?un.trimArrayEntries([...e]):[],n=t?un.removeEmptyStringsFromArray(t):[];if(!n||!n.length)throw ln(Kt);this.scopes=new Set,n.forEach((e=>this.scopes.add(e)))}static fromString(e){const t=(e||i.EMPTY_STRING).split(" ");return new dn(t)}static createSearchScopes(e){const t=new dn(e);return t.containsOnlyOIDCScopes()?t.removeScope(i.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new dn(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every((e=>this.containsScope(e))))}containsOnlyOIDCScopes(){let e=0;return d.forEach((t=>{this.containsScope(t)&&(e+=1)})),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach((e=>this.appendScope(e)))}catch(t){throw mt(Ke)}}removeScope(e){if(!e)throw mt(Be);this.scopes.delete(e.trim())}removeOIDCScopes(){d.forEach((e=>{this.scopes.delete(e)}))}unionScopeSets(e){if(!e)throw mt($e);const t=new Set;return e.scopes.forEach((e=>t.add(e.toLowerCase()))),this.scopes.forEach((e=>t.add(e.toLowerCase()))),t}intersectingScopeSets(e){if(!e)throw mt($e);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach((t=>e.push(t))),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return i.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function hn(e,t){if(!e)throw mt(Te);try{const n=t(e);return JSON.parse(n)}catch(n){throw mt(Ie)}}function fn(e){if(!e)throw mt(Ie);const t=e.split(x,2);return{uid:t[0],utid:t.length<2?i.EMPTY_STRING:t[1]}}function gn(e,t){return!!e&&!!t&&e===t.split(".")[1]}function pn(e,t,n,r){if(r){const{oid:t,sub:n,tid:o,name:i,tfp:a,acr:s}=r,c=o||a||s||"";return{tenantId:c,localAccountId:t||n||"",name:i,isHomeTenant:gn(c,e)}}return{tenantId:n,localAccountId:t,isHomeTenant:gn(n,e)}}function mn(e,t,n,r){let o=e;if(t){const{isHomeTenant:n,...r}=t;o={...e,...r}}if(n){const{isHomeTenant:t,...i}=pn(e.homeAccountId,e.localAccountId,e.tenantId,n);return o={...o,...i,idTokenClaims:n,idToken:r},o}return o}const yn=0,vn=1,bn=2,wn=3;function Cn(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class kn{generateAccountId(){return[this.homeAccountId,this.environment].join(O).toLowerCase()}generateAccountKey(){return kn.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map((e=>[e.tenantId,e])))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(O).toLowerCase()}static createAccount(e,t,n){const r=new kn;let o;t.authorityType===vn?r.authorityType=M:t.protocolMode===me?r.authorityType=R:r.authorityType=N,e.clientInfo&&n&&(o=hn(e.clientInfo,n)),r.clientInfo=e.clientInfo,r.homeAccountId=e.homeAccountId,r.nativeAccountId=e.nativeAccountId;const i=e.environment||t&&t.getPreferredCache();if(!i)throw mt(Ye);r.environment=i,r.realm=o?.utid||Cn(e.idTokenClaims)||"",r.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";const a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,s=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(r.username=a||s||"",r.name=e.idTokenClaims?.name||"",r.cloudGraphHostName=e.cloudGraphHostName,r.msGraphHost=e.msGraphHost,e.tenantProfiles)r.tenantProfiles=e.tenantProfiles;else{const t=pn(e.homeAccountId,r.localAccountId,r.realm,e.idTokenClaims);r.tenantProfiles=[t]}return r}static createFromAccountInfo(e,t,n){const r=new kn;return r.authorityType=e.authorityType||N,r.homeAccountId=e.homeAccountId,r.localAccountId=e.localAccountId,r.nativeAccountId=e.nativeAccountId,r.realm=e.tenantId,r.environment=e.environment,r.username=e.username,r.name=e.name,r.cloudGraphHostName=t,r.msGraphHost=n,r.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),r}static generateHomeAccountId(e,t,n,r,o){if(t!==vn&&t!==bn){if(e)try{const t=hn(e,r.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(i){}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){const n=e.idTokenClaims||{},o=t.idTokenClaims||{};r=n.iat===o.iat&&n.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}function Sn(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function In(e){if(!e||e.indexOf("=")<0)return null;try{const t=Sn(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.error||n.error_description||n.state)return n}catch(t){throw mt(Me)}return null}class Tn{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw ln(Bt);e.includes("#")||(this._urlString=Tn.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return un.endsWith(t,"?")?t=t.slice(0,-1):un.endsWith(t,"?/")&&(t=t.slice(0,-2)),un.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(t){throw ln(Dt)}if(!e.HostNameAndPort||!e.PathSegments)throw ln(Dt);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw ln(Ft)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return Tn.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==b&&n[0]!==w||(n[0]=e),Tn.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw ln(Dt);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let r=n.AbsolutePath.split("/");return r=r.filter((e=>e&&e.length>0)),n.PathSegments=r,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw ln(Dt);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===i.FORWARD_SLASH){const n=new Tn(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Tn(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!In(e)}}const An={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},En={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},_n=new Set;function Pn(e,t,n,r){if(r?.trace(`getAliasesFromMetadata called with source: ${n}`),e&&t){const o=Rn(t,e);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function Rn(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.aliases.includes(t))return r}return null}En.metadata.forEach((e=>{e.aliases.forEach((e=>{_n.add(e)}))}));const Mn="cache_quota_exceeded",Nn="cache_error_unknown",On={[Mn]:"Exceeded cache storage capacity.",[Nn]:"Unexpected error occurred when using cache storage."};class xn extends Error{constructor(e,t){const n=t||(On[e]?On[e]:On[Nn]);super(`${e}: ${n}`),Object.setPrototypeOf(this,xn.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class Ln{constructor(e,t,n,r){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(vt,bt),this.staticAuthorityOptions=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);if(t.length>1){return t.sort((e=>e.idTokenClaims?-1:1))[0]}return 1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap((e=>this.getTenantProfilesFromAccountEntity(e,t?.tenantId,t)))}getTenantedAccountInfoByFilter(e,t,n,r){let o,i=null;if(r&&!this.tenantProfileMatchesFilter(n,r))return null;const a=this.getIdToken(e,t,n.tenantId);return a&&(o=wt(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,r))?null:(i=mn(e,n,o,a?.secret),i)}getTenantProfilesFromAccountEntity(e,t,n){const r=e.getAccountInfo();let o=r.tenantProfiles||new Map;const i=this.getTokenKeys();if(t){const e=o.get(t);if(!e)return[];o=new Map([[t,e]])}const a=[];return o.forEach((e=>{const t=this.getTenantedAccountInfoByFilter(r,i,e,n);t&&a.push(t)})),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw mt(Ve);try{e.account&&await this.setAccount(e.account,t),e.idToken&&!1!==n?.idToken&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==n?.accessToken&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&!1!==n?.refreshToken&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(r){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),r instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${r.message}`,t),"QuotaExceededError"===r.name||"NS_ERROR_DOM_QUOTA_REACHED"===r.name||r.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",t),new xn(Mn)):new xn(r.name,r.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${r}`,t),new xn(Nn))}}async saveAccessToken(e,t){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=dn.fromString(e.target),i=[];r.accessToken.forEach((e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;const t=this.getAccessTokenCredential(e);if(t&&this.credentialMatchesFilter(t,n)){dn.fromString(t.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(e))}})),await Promise.all(i),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),n=[];return t.forEach((t=>{if(!this.isAccountKey(t,e.homeAccountId))return;const r=this.getAccount(t,this.commonLogger);if(!r)return;if(e.homeAccountId&&!this.matchHomeAccountId(r,e.homeAccountId))return;if(e.username&&!this.matchUsername(r.username,e.username))return;if(e.environment&&!this.matchEnvironment(r,e.environment))return;if(e.realm&&!this.matchRealm(r,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(r,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(r,e.authorityType))return;const o={localAccountId:e?.localAccountId,name:e?.name},i=r.tenantProfiles?.filter((e=>this.tenantProfileMatchesFilter(e,o)));i&&0===i.length||n.push(r)})),n}isAccountKey(e,t,n){return!(e.split(O).length<3)&&(!(t&&!e.toLowerCase().includes(t.toLowerCase()))&&!(n&&!e.toLowerCase().includes(n.toLowerCase())))}isCredentialKey(e){if(e.split(O).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(L.ID_TOKEN.toLowerCase())&&-1===t.indexOf(L.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(L.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(L.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(L.REFRESH_TOKEN.toLowerCase())>-1){const e=`${L.REFRESH_TOKEN}${O}${this.clientId}${O}`,n=`${L.REFRESH_TOKEN}${O}${U}${O}`;if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===L.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===j.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach((t=>{if(!this.isAppMetadata(t))return;const r=this.getAppMetadata(t);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(n[t]=r))})),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach((t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)})),n}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach((e=>{t.push(this.removeAccount(e))})),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),n=e.generateAccountId(),r=[];t.idToken.forEach((e=>{0===e.indexOf(n)&&this.removeIdToken(e)})),t.accessToken.forEach((e=>{0===e.indexOf(n)&&r.push(this.removeAccessToken(e))})),t.refreshToken.forEach((e=>{0===e.indexOf(n)&&this.removeRefreshToken(e)})),await Promise.all(r)}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===L.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===j.POP){const e=t.keyId;if(e)try{await this.cryptoImpl.removeTokenBindingKey(e)}catch(n){throw mt(at)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach((e=>{this.isAppMetadata(e)&&this.removeItem(e)})),!0}readAccountFromCache(e){const t=kn.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:L.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(i,t),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let t=a;if(!n){const n=new Map;a.forEach(((t,r)=>{t.realm===e.tenantId&&n.set(r,t)}));const r=n.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),n.values().next().value;t=n}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach(((e,t)=>{this.removeIdToken(t)})),r&&o&&r.addFields({multiMatchedID:a.size},o),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){const n=t&&t.idToken||this.getTokenKeys().idToken,r=new Map;return n.forEach((t=>{if(!this.idTokenKeyMatchesFilter(t,{clientId:this.clientId,...e}))return;const n=this.getIdTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&r.set(t,n)})),r}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");const a=dn.createSearchScopes(t.scopes),s=t.authenticationScheme||j.BEARER,c=s&&s.toLowerCase()!==j.BEARER.toLowerCase()?L.ACCESS_TOKEN_WITH_AUTH_SCHEME:L.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:r||e.tenantId,target:a,tokenType:s,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach((e=>{if(this.accessTokenKeyMatchesFilter(e,l,!0)){const t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,l)&&d.push(t)}}));const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach((e=>{this.removeAccessToken(It(e))})),o&&i&&o.addFields({multiMatchedAT:d.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,t,n){const r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),n=[];return t.accessToken.forEach((t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;const r=this.getAccessTokenCredential(t);r&&this.credentialMatchesFilter(r,e)&&n.push(r)})),n}getRefreshToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=t?U:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:L.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,c=[];s.forEach((e=>{if(this.refreshTokenKeyMatchesFilter(e,a)){const t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,a)&&c.push(t)}}));const l=c.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&r&&o&&r.addFields({multiMatchedRT:l},o),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.familyId||-1!==n.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map((e=>n[e])),o=r.length;if(o<1)return null;if(o>1)throw mt(Fe);return r[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==U)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return!(t.toLowerCase()!==e.name?.toLowerCase())}matchUsername(e,t){return!(!e||"string"!==typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const r=e.canonicalAuthority;if(r){const o=new Tn(r).getUrlComponents().HostNameAndPort;n=Pn(o,e.cloudDiscoveryMetadata?.metadata,F,t)||Pn(o,En.metadata,K,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return!(e.realm?.toLowerCase()!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==L.ACCESS_TOKEN&&e.credentialType!==L.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return dn.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(q)}isAuthorityMetadata(e){return-1!==e.indexOf(H)}generateAuthorityMetadataCacheKey(e){return`${H}-${this.clientId}-${e}`}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class qn extends Ln{async setAccount(){throw mt(ht)}getAccount(){throw mt(ht)}async setIdTokenCredential(){throw mt(ht)}getIdTokenCredential(){throw mt(ht)}async setAccessTokenCredential(){throw mt(ht)}getAccessTokenCredential(){throw mt(ht)}async setRefreshTokenCredential(){throw mt(ht)}getRefreshTokenCredential(){throw mt(ht)}setAppMetadata(){throw mt(ht)}getAppMetadata(){throw mt(ht)}setServerTelemetry(){throw mt(ht)}getServerTelemetry(){throw mt(ht)}setAuthorityMetadata(){throw mt(ht)}getAuthorityMetadata(){throw mt(ht)}getAuthorityMetadataKeys(){throw mt(ht)}setThrottlingCache(){throw mt(ht)}getThrottlingCache(){throw mt(ht)}removeItem(){throw mt(ht)}getKeys(){throw mt(ht)}getAccountKeys(){throw mt(ht)}getTokenKeys(){throw mt(ht)}}const Un={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},Hn={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:ge.Info,correlationId:i.EMPTY_STRING},zn={claimsBasedCachingEnabled:!1},Fn={async sendGetRequestAsync(){throw mt(ht)},async sendPostRequestAsync(){throw mt(ht)}},Dn={sku:i.SKU,version:bt,cpu:i.EMPTY_STRING,os:i.EMPTY_STRING},Bn={clientSecret:i.EMPTY_STRING,clientAssertion:void 0},Kn={azureCloudInstance:ve,tenant:`${i.DEFAULT_COMMON_TENANT}`},$n={application:{appName:"",appVersion:""}};function jn(e){return e.authOptions.authority.options.protocolMode===ye}const Qn={sendGetRequestAsync:()=>Promise.reject(mt(ht)),sendPostRequestAsync:()=>Promise.reject(mt(ht))},Wn="acquireTokenByCode",Gn="acquireTokenByRefreshToken",Vn="acquireTokenSilent",Yn="acquireTokenSilentAsync",Jn="acquireTokenPopup",Xn="acquireTokenPreRedirect",Zn="acquireTokenRedirect",er="cryptoOptsGetPublicKeyThumbprint",tr="cryptoOptsSignJwt",nr="silentCacheClientAcquireToken",rr="silentIframeClientAcquireToken",or="awaitConcurrentIframe",ir="silentRefreshClientAcquireToken",ar="ssoSilent",sr="standardInteractionClientGetDiscoveredAuthority",cr="fetchAccountIdWithNativeBroker",lr="nativeInteractionClientAcquireToken",ur="networkClientSendPostRequestAsync",dr="refreshTokenClientExecutePostToTokenEndpoint",hr="authorizationCodeClientExecutePostToTokenEndpoint",fr="refreshTokenClientExecuteTokenRequest",gr="refreshTokenClientAcquireToken",pr="refreshTokenClientAcquireTokenWithCachedRefreshToken",mr="refreshTokenClientAcquireTokenByRefreshToken",yr="refreshTokenClientCreateTokenRequestBody",vr="acquireTokenFromCache",br="silentFlowClientAcquireCachedToken",wr="silentFlowClientGenerateResultFromCacheRecord",Cr="acquireTokenBySilentIframe",kr="initializeBaseRequest",Sr="initializeSilentRequest",Ir="initializeClientApplication",Tr="initializeCache",Ar="silentIframeClientTokenHelper",Er="silentHandlerInitiateAuthRequest",_r="silentHandlerMonitorIframeForHash",Pr="silentHandlerLoadFrame",Rr="silentHandlerLoadFrameSync",Mr="standardInteractionClientCreateAuthCodeClient",Nr="standardInteractionClientGetClientConfiguration",Or="standardInteractionClientInitializeAuthorizationRequest",xr="standardInteractionClientInitializeAuthorizationCodeRequest",Lr="getAuthCodeUrl",qr="handleCodeResponseFromServer",Ur="handleCodeResponse",Hr="updateTokenEndpointAuthority",zr="authClientAcquireToken",Fr="authClientExecuteTokenRequest",Dr="authClientCreateTokenRequestBody",Br="authClientCreateQueryString",Kr="popTokenGenerateCnf",$r="popTokenGenerateKid",jr="handleServerTokenResponse",Qr="deserializeResponse",Wr="authorityFactoryCreateDiscoveredInstance",Gr="authorityResolveEndpointsAsync",Vr="authorityGetCloudDiscoveryMetadataFromNetwork",Yr="authorityUpdateCloudDiscoveryMetadata",Jr="authorityGetEndpointMetadataFromNetwork",Xr="authorityUpdateEndpointMetadata",Zr="authorityUpdateMetadataWithRegionalInformation",eo="regionDiscoveryDetectRegion",to="regionDiscoveryGetRegionFromIMDS",no="regionDiscoveryGetCurrentVersion",ro="acquireTokenByCodeAsync",oo="handleRedirectPromise",io="handleNativeRedirectPromise",ao="nativeMessageHandlerHandshake",so="removeHiddenIframe",co="clearTokensAndKeysWithClaims",lo="cacheManagerGetRefreshToken",uo="importExistingCache",ho="setUserData",fo="localStorageUpdated",go="generatePkceCodes",po="generateCodeVerifier",mo="generateCodeChallengeFromVerifier",yo="sha256Digest",vo="getRandomValues",bo="generateHKDF",wo="generateBaseKey",Co="base64Decode",ko="urlEncodeArr",So="encrypt",Io="decrypt",To=(new Map([[Wn,"ATByCode"],[Gn,"ATByRT"],[Vn,"ATS"],[Yn,"ATSAsync"],[Jn,"ATPopup"],[Zn,"ATRedirect"],[er,"CryptoGetPKThumb"],[tr,"CryptoSignJwt"],[nr,"SltCacheClientAT"],[rr,"SltIframeClientAT"],[ir,"SltRClientAT"],[ar,"SsoSlt"],[sr,"StdIntClientGetDiscAuth"],[cr,"FetchAccIdWithNtvBroker"],[lr,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[ur,"NetClientSendPost"],[dr,"RTClientExecPost"],[hr,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[fr,"RTClientExecTReq"],[gr,"RTClientAT"],[pr,"RTClientATWithCachedRT"],[mr,"RTClientATByRT"],[yr,"RTClientCreateTReqBody"],[vr,"ATFromCache"],[br,"SltFlowClientATCached"],[wr,"SltFlowClientGenResFromCache"],[Cr,"ATBySltIframe"],[kr,"InitBaseReq"],[Sr,"InitSltReq"],[Ir,"InitClientApplication"],[Tr,"InitCache"],[uo,"importCache"],[ho,"setUserData"],[fo,"localStorageUpdated"],[Ar,"SIClientTHelper"],[Er,"SHandlerInitAuthReq"],[_r,"SltHandlerMonitorIframeForHash"],[Pr,"SHandlerLoadFrame"],[Rr,"SHandlerLoadFrameSync"],[Mr,"StdIntClientCreateAuthCodeClient"],[Nr,"StdIntClientGetClientConf"],[Or,"StdIntClientInitAuthReq"],[xr,"StdIntClientInitAuthCodeReq"],[Lr,"GetAuthCodeUrl"],[qr,"HandleCodeResFromServer"],[Ur,"HandleCodeResp"],[Hr,"UpdTEndpointAuth"],[zr,"AuthClientAT"],[Fr,"AuthClientExecTReq"],[Dr,"AuthClientCreateTReqBody"],[Br,"AuthClientCreateQueryStr"],[Kr,"PopTGenCnf"],[$r,"PopTGenKid"],[jr,"HandleServerTRes"],[Qr,"DeserializeRes"],[Wr,"AuthFactCreateDiscInst"],[Gr,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[Vr,"AuthGetCDMetaFromNet"],[Yr,"AuthUpdCDMeta"],[Jr,"AuthUpdCDMetaFromNet"],[Xr,"AuthUpdEndpointMeta"],[Zr,"AuthUpdMetaWithRegInfo"],[eo,"RegDiscDetectReg"],[to,"RegDiscGetRegFromIMDS"],[no,"RegDiscGetCurrentVer"],[ro,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[oo,"HandleRedirectPromise"],[io,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[ao,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[so,"RemoveHiddenIframe"],[co,"ClearTAndKeysWithClaims"],[lo,"CacheManagerGetRT"],[go,"GenPkceCodes"],[po,"GenCodeVerifier"],[mo,"GenCodeChallengeFromVerifier"],[yo,"Sha256Digest"],[vo,"GetRandomValues"],[bo,"genHKDF"],[wo,"genBaseKey"],[Co,"b64Decode"],[ko,"urlEncArr"],[So,"encrypt"],[Io,"decrypt"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount"]);class Ao{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Eo{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:To,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new Ao}}startPerformanceMeasurement(){return new Ao}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const _o="invalid_grant",Po=483,Ro=600,Mo="msal",No=30,Oo="msal.js.browser",xo="53ee284d-920a-4b59-9d30-a60315b26836",Lo="ppnbnpeolgkicgegkbkbjmhlideopiji",qo="MATS",Uo="Handshake",Ho="HandshakeResponse",zo="GetToken",Fo="Response",Do="localStorage",Bo="sessionStorage",Ko="memoryStorage",$o="GET",jo="POST",Qo="authority",Wo="request.state",Go="nonce.id_token",Vo="request.origin",Yo="urlHash",Jo="request.params",Xo="interaction.status",Zo="ccs.credential",ei="request.correlationId",ti="request.native",ni="msal.account.keys",ri="msal.token.keys",oi="wrapper.sku",ii="wrapper.version",ai=861,si=862,ci=863,li=865,ui=866,di=61,hi=961,fi=962;var gi;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(gi||(gi={}));const pi="startup",mi="login",yi="logout",vi="acquireToken",bi="ssoSilent",wi="handleRedirect",Ci="none",ki={scopes:u},Si="@azure/msal-react",Ii="msal.db",Ti=`${Ii}.keys`,Ai=0,Ei=1,_i=2,Pi=3,Ri=4,Mi=5,Ni=[Ai,Mi,Ri];class Oi{navigateInternal(e,t){return Oi.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Oi.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((e=>{setTimeout((()=>{e(!0)}),t.timeout)}))}}class xi extends ke{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,xi.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}function Li(e,t,n){return new xi(e,t,n)}const qi="pkce_not_created",Ui="crypto_nonexistent",Hi="empty_navigate_uri",zi="hash_empty_error",Fi="no_state_in_hash",Di="hash_does_not_contain_known_properties",Bi="unable_to_parse_state",Ki="state_interaction_type_mismatch",$i="interaction_in_progress",ji="popup_window_error",Qi="empty_window_error",Wi="user_cancelled",Gi="monitor_popup_timeout",Vi="monitor_window_timeout",Yi="redirect_in_iframe",Ji="block_iframe_reload",Xi="block_nested_popups",Zi="iframe_closed_prematurely",ea="silent_logout_unsupported",ta="no_account_error",na="silent_prompt_value_error",ra="no_token_request_cache_error",oa="unable_to_parse_token_request_cache_error",ia="no_cached_authority_error",aa="auth_request_not_set_error",sa="invalid_cache_type",ca="non_browser_environment",la="database_not_open",ua="no_network_connectivity",da="post_request_failed",ha="get_request_failed",fa="failed_to_parse_response",ga="unable_to_load_token",pa="crypto_key_not_found",ma="auth_code_required",ya="auth_code_or_nativeAccountId_required",va="spa_code_and_nativeAccountId_present",ba="database_unavailable",wa="unable_to_acquire_token_from_native_platform",Ca="native_handshake_timeout",ka="native_extension_not_installed",Sa="native_connection_not_established",Ia="uninitialized_public_client_application",Ta="native_prompt_not_supported",Aa="invalid_base64_string",Ea="invalid_pop_token_request",_a="failed_to_build_headers",Pa="failed_to_parse_headers",Ra="For more visit: aka.ms/msaljs/browser-errors",Ma={[qi]:"The PKCE code challenge and verifier could not be generated.",[Ui]:"The crypto object or function is not available.",[Hi]:"Navigation URI is empty. Please check stack trace for more info.",[zi]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Ra}`,[Fi]:"Hash does not contain state. Please verify that the request originated from msal.",[Di]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Ra}`,[Bi]:"Unable to parse state. Please verify that the request originated from msal.",[Ki]:"Hash contains state but the interaction type does not match the caller.",[$i]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Ra}`,[ji]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Qi]:"window.open returned null or undefined window object.",[Wi]:"User cancelled the flow.",[Gi]:`Token acquisition in popup failed due to timeout.  ${Ra}`,[Vi]:`Token acquisition in iframe failed due to timeout.  ${Ra}`,[Yi]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Ji]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Ra}`,[Xi]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[Zi]:"The iframe being monitored was closed prematurely.",[ea]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[ta]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[na]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[ra]:"No token request found in cache.",[oa]:"The cached token request could not be parsed.",[ia]:"No cached authority found.",[aa]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[sa]:"Invalid cache type",[ca]:"Login and token requests are not supported in non-browser environments.",[la]:"Database is not open!",[ua]:"No network connectivity. Check your internet connection.",[da]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[ha]:"Network request failed. Please check the network trace to determine root cause.",[fa]:"Failed to parse network response. Check network trace.",[ga]:"Error loading token to cache.",[pa]:"Cryptographic Key or Keypair not found in browser storage.",[ma]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[ya]:"An authorization code or nativeAccountId must be provided to this flow.",[va]:"Request cannot contain both spa code and native account id.",[ba]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[wa]:`Unable to acquire token from native platform.  ${Ra}`,[Ca]:"Timed out while attempting to establish connection to browser extension",[ka]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Sa]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Ra}`,[Ia]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Ra}`,[Ta]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[Aa]:"Invalid base64 encoded string.",[Ea]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[_a]:"Failed to build request headers object.",[Pa]:"Failed to parse response headers"};class Na extends ke{constructor(e,t){super(e,Ma[e],t),Object.setPrototypeOf(this,Na.prototype),this.name="BrowserAuthError"}}function Oa(e,t){return new Na(e,t)}class xa{async sendGetRequestAsync(e,t){let n,r={},o=0;const i=La(t);try{n=await fetch(e,{method:$o,headers:i})}catch(a){throw Oa(window.navigator.onLine?ha:ua)}r=qa(n.headers);try{return o=n.status,{headers:r,body:await n.json(),status:o}}catch(a){throw Li(Oa(fa),o,r)}}async sendPostRequestAsync(e,t){const n=t&&t.body||"",r=La(t);let o,i=0,a={};try{o=await fetch(e,{method:jo,headers:r,body:n})}catch(s){throw Oa(window.navigator.onLine?da:ua)}a=qa(o.headers);try{return i=o.status,{headers:a,body:await o.json(),status:i}}catch(s){throw Li(Oa(fa),i,a)}}}function La(e){try{const t=new Headers;if(!e||!e.headers)return t;const n=e.headers;return Object.entries(n).forEach((e=>{let[n,r]=e;t.append(n,r)})),t}catch(t){throw Oa(_a)}}function qa(e){try{const t={};return e.forEach(((e,n)=>{t[n]=e})),t}catch(t){throw Oa(Pa)}}function Ua(e){return encodeURIComponent(za(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Ha(e){return Fa(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function za(e){return Fa((new TextEncoder).encode(e))}function Fa(e){const t=Array.from(e,(e=>String.fromCodePoint(e))).join("");return btoa(t)}function Da(e){return(new TextDecoder).decode(Ba(e))}function Ba(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Oa(Aa)}const n=atob(t);return Uint8Array.from(n,(e=>e.codePointAt(0)||0))}const Ka="AES-GCM",$a="HKDF",ja="SHA-256",Qa=new Uint8Array([1,0,1]),Wa="0123456789abcdef",Ga=new Uint32Array(1),Va="encrypt",Ya="decrypt",Ja={name:"RSASSA-PKCS1-v1_5",hash:ja,modulusLength:2048,publicExponent:Qa};async function Xa(e,t,n){t?.addQueueMeasurement(yo,n);const r=(new TextEncoder).encode(e);return window.crypto.subtle.digest(ja,r)}function Za(e){return window.crypto.getRandomValues(e)}function es(){return window.crypto.getRandomValues(Ga),Ga[0]}function ts(){const e=Date.now(),t=1024*es()+(1023&es()),n=new Uint8Array(16),r=Math.trunc(t/2**30),o=t&2**30-1,i=es();n[0]=e/2**40,n[1]=e/2**32,n[2]=e/2**24,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let a="";for(let s=0;s<n.length;s++)a+=Wa.charAt(n[s]>>>4),a+=Wa.charAt(15&n[s]),3!==s&&5!==s&&7!==s&&9!==s||(a+="-");return a}async function ns(e){return window.crypto.subtle.exportKey("jwk",e)}async function rs(){const e=await window.crypto.subtle.generateKey({name:Ka,length:256},!0,[Va,Ya]);return window.crypto.subtle.exportKey("raw",e)}async function os(e){return window.crypto.subtle.importKey("raw",e,$a,!1,["deriveKey"])}async function is(e,t,n){return window.crypto.subtle.deriveKey({name:$a,salt:t,hash:ja,info:(new TextEncoder).encode(n)},e,{name:Ka,length:256},!1,[Va,Ya])}async function as(e,t,n){const r=(new TextEncoder).encode(t),o=window.crypto.getRandomValues(new Uint8Array(16)),i=await is(e,o,n),a=await window.crypto.subtle.encrypt({name:Ka,iv:new Uint8Array(12)},i,r);return{data:Ha(new Uint8Array(a)),nonce:Ha(o)}}async function ss(e,t,n,r){const o=Ba(r),i=await is(e,Ba(t),n),a=await window.crypto.subtle.decrypt({name:Ka,iv:new Uint8Array(12)},i,o);return(new TextDecoder).decode(a)}async function cs(e){const t=await Xa(e);return Ha(new Uint8Array(t))}const ls="storage_not_supported",us="stubbed_public_client_application_called",ds="in_mem_redirect_unavailable",hs={[ls]:"Given storage configuration option was not supported.",[us]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[ds]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class fs extends ke{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,fs.prototype)}}function gs(e){return new fs(e,hs[e])}function ps(){return window.parent!==window}function ms(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function ys(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf(`${Mo}.`))throw Oa(Xi)}function vs(){if("undefined"===typeof window)throw Oa(ca)}function bs(e){if(!e)throw Oa(Ia)}function ws(e){vs(),function(){if(Tn.hashContainsKnownProperties(window.location.hash)&&ps())throw Oa(Ji)}(),ys(),bs(e)}function Cs(e,t){if(ws(e),function(e){if(ps()&&!e)throw Oa(Yi)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===Ko&&!t.cache.storeAuthStateInCookie)throw gs(ds)}function ks(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout((()=>{try{document.head.removeChild(t)}catch{}}),1e4)}const Ss=1e4;const Is="4.5.1";class Ts{static loggerCallback(e,t){switch(e){case ge.Error:return void console.error(t);case ge.Info:return void console.info(t);case ge.Verbose:return void console.debug(t);case ge.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){let t;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:n,cache:r,system:o,telemetry:a}=e;const s={clientId:i.EMPTY_STRING,authority:`${i.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:i.EMPTY_STRING,authorityMetadata:i.EMPTY_STRING,redirectUri:"undefined"!==typeof window?ms():"",postLogoutRedirectUri:i.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:me,OIDCOptions:{serverResponseType:A.FRAGMENT,defaultScopes:[i.OPENID_SCOPE,i.PROFILE_SCOPE,i.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:ve,tenant:i.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},c={cacheLocation:Bo,temporaryCacheLocation:Bo,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!r||r.cacheLocation!==Do),claimsBasedCachingEnabled:!1},l={loggerCallback:()=>{},logLevel:ge.Info,piiLoggingEnabled:!1},u={...{...Un,loggerOptions:l,networkClient:t?new xa:Qn,navigationClient:new Oi,loadFrameTimeout:0,windowHashTimeout:o?.loadFrameTimeout||6e4,iframeHashTimeout:o?.loadFrameTimeout||Ss,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:o?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:No},...o,loggerOptions:o?.loggerOptions||l},d={application:{appName:i.EMPTY_STRING,appVersion:i.EMPTY_STRING},client:new Eo};n?.protocolMode!==ye&&n?.OIDCOptions&&new pe(u.loggerOptions).warning(JSON.stringify(ln(rn)));if(n?.protocolMode&&n.protocolMode!==me&&u?.allowPlatformBroker)throw ln(on);return{auth:{...s,...n,OIDCOptions:{...s.OIDCOptions,...n?.OIDCOptions}},cache:{...c,...r},system:u,telemetry:{...d,...a}}}(e,this.browserEnvironment);try{t=window[Bo]}catch(c){}const n=t?.getItem("msal.browser.log.level"),r=t?.getItem("msal.browser.log.pii")?.toLowerCase(),o="true"===r||"false"!==r&&void 0,a={...this.config.system.loggerOptions},s=n&&Object.keys(ge).includes(n)?ge[n]:void 0;s&&(a.loggerCallback=Ts.loggerCallback,a.logLevel=s),void 0!==o&&(a.piiLoggingEnabled=o),this.logger=new pe(a,"@azure/msal-browser",Is),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class As extends Ts{getModuleName(){return As.MODULE_NAME}getId(){return As.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}As.MODULE_NAME="",As.ID="StandardOperatingContext";const Es="missing_kid_error",_s="missing_alg_error",Ps={[Es]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[_s]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Rs extends ke{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,Rs.prototype)}}function Ms(e){return new Rs(e,Ps[e])}class Ns{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Ms(Es);if(!e.alg)throw Ms(_s);const t=new Ns({typ:e.typ||fe,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class Os{constructor(){this.dbName=Ii,this.version=1,this.tableName=Ti,this.dbOpen=!1}async open(){return new Promise(((e,t)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",(e=>{e.target.result.createObjectStore(this.tableName)})),n.addEventListener("success",(t=>{const n=t;this.db=n.target.result,this.dbOpen=!0,e()})),n.addEventListener("error",(()=>t(Oa(ba))))}))}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(Oa(la));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);r.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(n.target.result)})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async setItem(e,t){return await this.validateDbIsOpen(),new Promise(((n,r)=>{if(!this.db)return r(Oa(la));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);o.addEventListener("success",(()=>{this.closeConnection(),n()})),o.addEventListener("error",(e=>{this.closeConnection(),r(e)}))}))}async removeItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(Oa(la));const r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);r.addEventListener("success",(()=>{this.closeConnection(),t()})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async getKeys(){return await this.validateDbIsOpen(),new Promise(((e,t)=>{if(!this.db)return t(Oa(la));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();n.addEventListener("success",(t=>{const n=t;this.closeConnection(),e(n.target.result)})),n.addEventListener("error",(e=>{this.closeConnection(),t(e)}))}))}async containsKey(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(Oa(la));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);r.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(1===n.target.result)})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise(((e,t)=>{const n=window.indexedDB.deleteDatabase(Ii),r=setTimeout((()=>t(!1)),200);n.addEventListener("success",(()=>(clearTimeout(r),e(!0)))),n.addEventListener("blocked",(()=>(clearTimeout(r),e(!0)))),n.addEventListener("error",(()=>(clearTimeout(r),t(!1))))}))}}class xs{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach(((t,n)=>{e.push(n)})),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class Ls{constructor(e){this.inMemoryCache=new xs,this.indexedDBCache=new Os,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof Na&&e.errorCode===ba))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(n){this.handleDatabaseAccessError(n)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(n){this.handleDatabaseAccessError(n)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(n){this.handleDatabaseAccessError(n)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}class qs{constructor(e,t,n){this.logger=e,function(e){if(!window)throw Oa(ca);if(!window.crypto)throw Oa(Ui);if(!e&&!window.crypto.subtle)throw Oa(Ui,"crypto_subtle_undefined")}(n??!1),this.cache=new Ls(this.logger),this.performanceClient=t}createNewGuid(){return ts()}base64Encode(e){return za(e)}base64Decode(e){return Da(e)}base64UrlEncode(e){return Ua(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){const t=this.performanceClient?.startMeasurement(er,e.correlationId),n=await async function(e,t){return window.crypto.subtle.generateKey(Ja,e,t)}(qs.EXTRACTABLE,qs.POP_KEY_USAGES),r=await ns(n.publicKey),o=Us({e:r.e,kty:r.kty,n:r.n}),i=await this.hashString(o),a=await ns(n.privateKey),s=await async function(e,t,n){return window.crypto.subtle.importKey("jwk",e,Ja,t,n)}(a,!1,["sign"]);return await this.cache.setItem(i,{privateKey:s,publicKey:n.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),i}async removeTokenBindingKey(e){await this.cache.removeItem(e);return!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,n,r){const o=this.performanceClient?.startMeasurement(tr,r),i=await this.cache.getItem(t);if(!i)throw Oa(pa);const a=await ns(i.publicKey),s=Us(a),c=Ua(JSON.stringify({kid:t})),l=Ua(Ns.getShrHeaderString({...n?.header,alg:a.alg,kid:c}));e.cnf={jwk:JSON.parse(s)};const u=`${l}.${Ua(JSON.stringify(e))}`,d=(new TextEncoder).encode(u),h=await async function(e,t){return window.crypto.subtle.sign(Ja,e,t)}(i.privateKey,d),f=`${u}.${Ha(new Uint8Array(h))}`;return o&&o.end({success:!0}),f}async hashString(e){return cs(e)}}function Us(e){return JSON.stringify(e,Object.keys(e).sort())}qs.POP_KEY_USAGES=["sign","verify"],qs.EXTRACTABLE=!0;const Hs=(e,t,n,r,o)=>function(){n.trace(`Executing function ${t}`);const i=r?.startMeasurement(t,o);if(o){const e=t+"CallCount";r?.incrementFields({[e]:1},o)}try{const r=e(...arguments);return i?.end({success:!0}),n.trace(`Returning result from ${t}`),r}catch(a){n.trace(`Error occurred in ${t}`);try{n.trace(JSON.stringify(a))}catch(a){n.trace("Unable to print error message.")}throw i?.end({success:!1},a),a}},zs=(e,t,n,r,o)=>function(){n.trace(`Executing function ${t}`);const i=r?.startMeasurement(t,o);if(o){const e=t+"CallCount";r?.incrementFields({[e]:1},o)}return r?.setPreQueueTime(t,o),e(...arguments).then((e=>(n.trace(`Returning result from ${t}`),i?.end({success:!0}),e))).catch((e=>{n.trace(`Error occurred in ${t}`);try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw i?.end({success:!1},e),e}))};class Fs{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(eo,this.correlationId);let n=e;if(n)t.region_source=re;else{const e=Fs.IMDS_OPTIONS;try{const r=await zs(this.getRegionFromIMDS.bind(this),to,this.logger,this.performanceClient,this.correlationId)(i.IMDS_VERSION,e);if(r.status===ee&&(n=r.body,t.region_source=oe),r.status===te){const r=await zs(this.getCurrentVersion.bind(this),no,this.logger,this.performanceClient,this.correlationId)(e);if(!r)return t.region_source=ne,null;const o=await zs(this.getRegionFromIMDS.bind(this),to,this.logger,this.performanceClient,this.correlationId)(r,e);o.status===ee&&(n=o.body,t.region_source=oe)}}catch(r){return t.region_source=ne,null}}return n||(t.region_source=ne),n||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(to,this.correlationId),this.networkInterface.sendGetRequestAsync(`${i.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,i.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(no,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync(`${i.IMDS_ENDPOINT}?format=json`,e);return t.status===te&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(t){return null}}}Fs.IMDS_OPTIONS={headers:{Metadata:"true"}};class Ds{constructor(e,t,n,r,o,i,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=a,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new Fs(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(i.CIAM_AUTH_URL))return wn;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case i.ADFS:return vn;case i.DSTS:return bn}return yn}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Tn(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw mt(_e)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw mt(_e)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw mt(_e)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw mt(st);return this.replacePath(this.metadata.end_session_endpoint)}throw mt(_e)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw mt(_e)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw mt(_e)}canReplaceTenant(e){return 1===e.PathSegments.length&&!Ds.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===yn&&this.protocolMode===me}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new Tn(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(((e,o)=>{let i=r[o];if(0===o&&this.canReplaceTenant(n)){const e=new Tn(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose(`Replacing tenant domain name ${i} with id ${e}`),i=e)}e!==i&&(t=t.replace(`/${i}/`,`/${e}/`))})),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===vn||this.protocolMode!==me&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(Gr,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await zs(this.updateCloudDiscoveryMetadata.bind(this),Yr,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const n=await zs(this.updateEndpointMetadata.bind(this),Xr,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:xt(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==D&&n?.source!==D&&(e.expiresAt=xt(),e.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(Xr,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===K&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){Lt(e,await zs(this.updateMetadataWithRegionalInformation.bind(this),Zr,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority}return t.source}let n=await zs(this.getEndpointMetadataFromNetwork.bind(this),Jr,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await zs(this.updateMetadataWithRegionalInformation.bind(this),Zr,this.logger,this.performanceClient,this.correlationId)(n)),Lt(e,n,!0),B;throw mt(Re,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),Lt(e,t,!1),{source:F};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return Lt(e,t,!1),{source:K,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=Ut(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:D}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Tn(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw ln(Jt)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Jr,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const n=await this.networkInterface.sendGetRequestAsync(t,e),r=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(n.body);return r?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(n){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${n}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in An?An[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(Zr,this.correlationId);const t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==i.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=ie,this.regionDiscoveryMetadata.region_used=t,Ds.replaceWithRegionalInformation(e,t);const n=await zs(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),eo,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=ae,this.regionDiscoveryMetadata.region_used=n,Ds.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=se}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(Yr,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const n=await zs(this.getCloudDiscoveryMetadataFromNetwork.bind(this),Vr,this.logger,this.performanceClient,this.correlationId)();if(n)return qt(e,n,!0),B;throw ln(Xt)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||i.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||i.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||i.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),qt(e,t,!1),F;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,Rn(En.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),qt(e,t,!1),K;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const r=Ut(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),D):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===wn)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Ds.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Rn(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),ln(Yt)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Ds.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(Vr,this.correlationId);const e=`${i.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let n=null;try{const r=await this.networkInterface.sendGetRequestAsync(e,t);let o,a;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(r.body))o=r.body,a=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(r.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${r.status}`),o=r.body,o.error===i.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=Rn(a,this.hostnameAndPort)}catch(r){if(r instanceof ke)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${r.errorCode}\nError Description: ${r.errorMessage}`);else{const e=r;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${e.name}\nError Description: ${e.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=Ds.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter((e=>e&&Tn.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort)).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==ve){const e=t.tenant?t.tenant:i.DEFAULT_COMMON_TENANT;n=`${t.azureCloudInstance}/${e}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return i.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw mt(_e)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return _n.has(e)}static isPublicCloudAuthority(e){return i.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const r=new Tn(e);r.validateAsUri();const o=r.getUrlComponents();let a=`${t}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(a=`${t}.${i.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const s=Tn.constructAuthorityUriFromObject({...r.getUrlComponents(),HostNameAndPort:a}).urlString;return n?`${s}?${n}`:s}static replaceWithRegionalInformation(e,t){const n={...e};return n.authorization_endpoint=Ds.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=Ds.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=Ds.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new Tn(e).getUrlComponents();if(0===n.PathSegments.length&&n.HostNameAndPort.endsWith(i.CIAM_AUTH_URL)){t=`${t}${n.HostNameAndPort.split(".")[0]}${i.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}function Bs(e){return e.endsWith(i.FORWARD_SLASH)?e:`${e}${i.FORWARD_SLASH}`}Ds.reservedTenantDomains=new Set(["{tenant}","{tenantid}",b,C,w]);const Ks="no_tokens_found",$s="native_account_unavailable",js="refresh_token_expired",Qs="bad_token",Ws=["interaction_required","consent_required","login_required",Qs],Gs=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Vs={[Ks]:"No refresh token found in the cache. Please sign-in.",[$s]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[js]:"Refresh token has expired.",[Qs]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class Ys extends ke{constructor(e,t,n,r,o,a,s,c){super(e,t,n),Object.setPrototypeOf(this,Ys.prototype),this.timestamp=r||i.EMPTY_STRING,this.traceId=o||i.EMPTY_STRING,this.correlationId=a||i.EMPTY_STRING,this.claims=s||i.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function Js(e,t,n){const r=!!e&&Ws.indexOf(e)>-1,o=!!n&&Gs.indexOf(n)>-1,i=!!t&&Ws.some((e=>t.indexOf(e)>-1));return r||i||o}function Xs(e){return new Ys(e,Vs[e])}class Zs{static setRequestState(e,t,n){const r=Zs.generateLibraryState(e,n);return t?`${r}${i.RESOURCE_DELIM}${t}`:r}static generateLibraryState(e,t){if(!e)throw mt(Xe);const n={id:e.createNewGuid()};t&&(n.meta=t);const r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw mt(Xe);if(!t)throw mt(Ne);try{const n=t.split(i.RESOURCE_DELIM),r=n[0],o=n.length>1?n.slice(1).join(i.RESOURCE_DELIM):i.EMPTY_STRING,a=e.base64Decode(r),s=JSON.parse(a);return{userRequestState:o||i.EMPTY_STRING,libraryState:s}}catch(n){throw mt(Ne)}}}const ec="home_account_id",tc="UPN",nc=864e5,rc="Lax",oc="None";class ic{initialize(){return Promise.resolve()}getItem(e){const t=`${encodeURIComponent(e)}`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){const e=n[r],[o,...i]=decodeURIComponent(e).trim().split("="),a=i.join("=");if(o===t)return a}return""}getUserData(){throw mt(ht)}setItem(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rc,i=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${o};`;if(n){const e=function(e){const t=new Date,n=new Date(t.getTime()+e*nc);return n.toUTCString()}(n);i+=`expires=${e};`}(r||o===oc)&&(i+="Secure;"),document.cookie=i}async setUserData(){return Promise.reject(mt(ht))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach((e=>{const n=decodeURIComponent(e).trim().split("=");t.push(n[0])})),t}containsKey(e){return this.getKeys().includes(e)}}function ac(e){const t=e.getItem(ni);return t?JSON.parse(t):[]}function sc(e,t){const n=t.getItem(`${ri}.${e}`);if(n){const e=JSON.parse(n);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}const cc="msal.cache.encryption";class lc{constructor(e,t,n){if(!window.localStorage)throw gs(ls);this.memoryStorage=new xs,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=n,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){this.initialized=!0;const t=new ic,n=t.getItem(cc);let r={key:"",id:""};if(n)try{r=JSON.parse(n)}catch(o){}if(r.key&&r.id){const t=Hs(Ba,Co,this.logger,this.performanceClient,e)(r.key);this.encryptionCookie={id:r.id,key:await zs(os,bo,this.logger,this.performanceClient,e)(t)},await zs(this.importExistingCache.bind(this),uo,this.logger,this.performanceClient,e)(e)}else{this.clear();const n=ts(),r=await zs(rs,wo,this.logger,this.performanceClient,e)(),o=Hs(Ha,ko,this.logger,this.performanceClient,e)(new Uint8Array(r));this.encryptionCookie={id:n,key:await zs(os,bo,this.logger,this.performanceClient,e)(r)};const i={id:n,key:o};t.setItem(cc,JSON.stringify(i),0,!0,oc)}this.broadcast.addEventListener("message",this.updateCache.bind(this))}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw Oa(Ia);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,n){if(!this.initialized||!this.encryptionCookie)throw Oa(Ia);const{data:r,nonce:o}=await zs(as,So,this.logger,this.performanceClient,n)(this.encryptionCookie.key,t,this.getContext(e)),i={id:this.encryptionCookie.id,nonce:o,data:r};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(i)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear();ac(this).forEach((e=>this.removeItem(e)));const e=sc(this.clientId,this);e.idToken.forEach((e=>this.removeItem(e))),e.accessToken.forEach((e=>this.removeItem(e))),e.refreshToken.forEach((e=>this.removeItem(e))),this.getKeys().forEach((e=>{(e.startsWith(i.CACHE_PREFIX)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)}))}async importExistingCache(e){if(!this.encryptionCookie)return;let t=ac(this);t=await this.importArray(t,e),this.setItem(ni,JSON.stringify(t));const n=sc(this.clientId,this);n.idToken=await this.importArray(n.idToken,e),n.accessToken=await this.importArray(n.accessToken,e),n.refreshToken=await this.importArray(n.refreshToken,e),this.setItem(`${ri}.${this.clientId}`,JSON.stringify(n))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const n=this.getItem(e);if(!n)return null;let r;try{r=JSON.parse(n)}catch(o){return null}return r.id&&r.nonce&&r.data?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):zs(ss,Io,this.logger,this.performanceClient,t)(this.encryptionCookie.key,r.nonce,this.getContext(e),r.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null)}async importArray(e,t){const n=[],r=[];return e.forEach((e=>{const o=this.getItemFromEncryptedCache(e,t).then((t=>{t?(this.memoryStorage.setItem(e,t),n.push(e)):this.removeItem(e)}));r.push(o)})),await Promise.all(r),n}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(fo);t.add({isBackground:!0});const{key:n,value:r,context:o}=e.data;return n?o&&o!==this.clientId?(this.logger.trace(`Ignoring broadcast event from clientId: ${o}`),void t.end({success:!1,errorCode:"contextMismatch"})):(r?(this.memoryStorage.setItem(n,r),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(n),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class uc{constructor(){if(!window.sessionStorage)throw gs(ls)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}function dc(e,t){if(!t)return null;try{return Zs.parseRequestState(e,t).libraryState.meta}catch(n){throw mt(Ne)}}const hc="msal:initializeStart",fc="msal:initializeEnd",gc="msal:accountAdded",pc="msal:accountRemoved",mc="msal:activeAccountChanged",yc="msal:loginStart",vc="msal:loginSuccess",bc="msal:loginFailure",wc="msal:acquireTokenStart",Cc="msal:acquireTokenSuccess",kc="msal:acquireTokenFailure",Sc="msal:acquireTokenFromNetworkStart",Ic="msal:ssoSilentStart",Tc="msal:ssoSilentSuccess",Ac="msal:ssoSilentFailure",Ec="msal:acquireTokenByCodeStart",_c="msal:acquireTokenByCodeSuccess",Pc="msal:acquireTokenByCodeFailure",Rc="msal:handleRedirectStart",Mc="msal:handleRedirectEnd",Nc="msal:popupOpened",Oc="msal:logoutStart",xc="msal:logoutSuccess",Lc="msal:logoutFailure",qc="msal:logoutEnd",Uc="msal:restoreFromBFCache";class Hc extends Ln{constructor(e,t,n,r,o,i,a){super(e,n,r,a),this.cacheConfig=t,this.logger=r,this.internalStorage=new xs,this.browserStorage=zc(e,t.cacheLocation,r,o),this.temporaryCacheStorage=zc(e,t.temporaryCacheLocation,r,o),this.cookieStorage=new ic,this.performanceClient=o,this.eventHandler=i}async initialize(e){await this.browserStorage.initialize(e)}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}getAccount(e){this.logger.trace("BrowserCacheManager.getAccount called");const t=this.browserStorage.getUserData(e);if(!t)return this.removeAccountKeyFromMap(e),null;const n=this.validateAndParseJson(t);return n&&kn.isAccountEntity(n)?Ln.toObject(new kn,n):(this.removeAccountKeyFromMap(e),null)}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const n=e.generateAccountKey();await zs(this.browserStorage.setUserData.bind(this.browserStorage),ho,this.logger,this.performanceClient)(n,JSON.stringify(e),t);const r=this.addAccountKeyToMap(n);this.cacheConfig.cacheLocation===Do&&r&&this.eventHandler.emitEvent(gc,void 0,e.getAccountInfo())}getAccountKeys(){return ac(this.browserStorage)}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const t=this.getAccountKeys();return-1===t.indexOf(e)?(t.push(e),this.browserStorage.setItem(ni,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const t=this.getAccountKeys(),n=t.indexOf(e);n>-1?(t.splice(n,1),this.browserStorage.setItem(ni,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}async removeAccountContext(e){await super.removeAccountContext(e),this.cacheConfig.cacheLocation===Do&&this.eventHandler.emitEvent(pc,void 0,e.getAccountInfo())}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,L.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,L.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,L.REFRESH_TOKEN)}getTokenKeys(){return sc(this.clientId,this.browserStorage)}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const n=this.getTokenKeys();switch(t){case L.ID_TOKEN:-1===n.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(e));break;case L.ACCESS_TOKEN:-1===n.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(e));break;case L.REFRESH_TOKEN:-1===n.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),mt(Ze)}this.browserStorage.setItem(`${ri}.${this.clientId}`,JSON.stringify(n))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const n=this.getTokenKeys();switch(t){case L.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const r=n.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case L.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const o=n.accessToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case L.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const i=n.refreshToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),mt(Ze)}this.browserStorage.setItem(`${ri}.${this.clientId}`,JSON.stringify(n))}getIdTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,L.ID_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&_t(r)&&r.hasOwnProperty("realm")&&r.credentialType===L.ID_TOKEN?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,L.ID_TOKEN),null);var r}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=It(e);await zs(this.browserStorage.setUserData.bind(this.browserStorage),ho,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,L.ID_TOKEN)}getAccessTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,L.ACCESS_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&_t(r)&&r.hasOwnProperty("realm")&&r.hasOwnProperty("target")&&(r.credentialType===L.ACCESS_TOKEN||r.credentialType===L.ACCESS_TOKEN_WITH_AUTH_SCHEME)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,L.ACCESS_TOKEN),null);var r}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=It(e);await zs(this.browserStorage.setUserData.bind(this.browserStorage),ho,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,L.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,L.REFRESH_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&_t(r)&&r.credentialType===L.REFRESH_TOKEN?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,L.REFRESH_TOKEN),null);var r}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=It(e);await zs(this.browserStorage.setUserData.bind(this.browserStorage),ho,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,L.REFRESH_TOKEN)}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&(r=e,(o=n)&&0===r.indexOf(q)&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var r,o}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=function(e){let{environment:t,clientId:n}=e;return[q,t,n].join(O).toLowerCase()}(e);this.browserStorage.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){const n=0===e.indexOf($.CACHE_KEY);let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.browserStorage.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){return!!t&&0===e.indexOf(H)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter((e=>this.isAuthorityMetadata(e)))}setWrapperMetadata(e,t){this.internalStorage.setItem(oi,e),this.internalStorage.setItem(ii,t)}getWrapperMetadata(){return[this.internalStorage.getItem(oi)||i.EMPTY_STRING,this.internalStorage.getItem(ii)||i.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(v),t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const n=this.validateAndParseJson(t);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(v);if(e){this.logger.verbose("setActiveAccount: Active account set");const n={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(n))}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t);this.eventHandler.emitEvent(mc)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){let n=!1;e&&(n=0===e.indexOf(G));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.browserStorage.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const r=this.temporaryCacheStorage.getItem(n);if(!r){if(this.cacheConfig.cacheLocation===Do){const e=this.browserStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,n){const r=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(r,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach((e=>{-1===e.indexOf(i.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)})),this.browserStorage.getKeys().forEach((e=>{-1===e.indexOf(i.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)})),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(co,t);const n=this.getTokenKeys(),r=[];n.accessToken.forEach((e=>{const t=this.getAccessTokenCredential(e);t?.requestedClaimsHash&&e.includes(t.requestedClaimsHash.toLowerCase())&&r.push(this.removeAccessToken(e))})),await Promise.all(r),r.length>0&&this.logger.warning(`${r.length} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):un.startsWith(e,i.CACHE_PREFIX)?e:`${i.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:t}}=Zs.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Qo}.${t}`)}generateNonceKey(e){const{libraryState:{id:t}}=Zs.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Go}.${t}`)}generateStateKey(e){const{libraryState:{id:t}}=Zs.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${Wo}.${t}`)}getCachedAuthority(e){const t=this.generateStateKey(e),n=this.getTemporaryCache(t);if(!n)return null;const r=this.generateAuthorityKey(n);return this.getTemporaryCache(r)}updateCacheEntries(e,t,n,r,o){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const i=this.generateStateKey(e);this.setTemporaryCache(i,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);const s=this.generateAuthorityKey(e);if(this.setTemporaryCache(s,n,!1),o){const e={credential:o.homeAccountId,type:ec};this.setTemporaryCache(Zo,JSON.stringify(e),!0)}else if(r){const e={credential:r,type:tc};this.setTemporaryCache(Zo,JSON.stringify(e),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach((t=>{-1!==t.indexOf(e)&&this.removeTemporaryItem(t)})),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(Jo)),this.removeTemporaryItem(this.generateCacheKey(Vo)),this.removeTemporaryItem(this.generateCacheKey(Yo)),this.removeTemporaryItem(this.generateCacheKey(ei)),this.removeTemporaryItem(this.generateCacheKey(Zo)),this.removeTemporaryItem(this.generateCacheKey(ti)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const t=this.generateStateKey(e),n=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${n}`),this.resetRequestCache(n||i.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach((t=>{if(-1===t.indexOf(Wo))return;const n=this.temporaryCacheStorage.getItem(t);if(!n)return;const r=dc(this.cryptoImpl,n);r&&r.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${n}`),this.resetRequestCache(n))})),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const t=za(JSON.stringify(e));this.setTemporaryCache(Jo,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache(Jo,!0);if(!t)throw Oa(ra);let n;try{n=JSON.parse(Da(t))}catch(r){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${r}`),Oa(oa)}if(this.removeTemporaryItem(this.generateCacheKey(Jo)),!n.authority){const t=this.generateAuthorityKey(e),r=this.getTemporaryCache(t);if(!r)throw Oa(ia);n.authority=r}return n}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(ti,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${i.CACHE_PREFIX}.${Xo}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const t=`${i.CACHE_PREFIX}.${Xo}`;if(e){if(this.getInteractionInProgress())throw Oa($i);this.setTemporaryCache(t,this.clientId,!1)}else e||this.getInteractionInProgress()!==this.clientId||this.removeTemporaryItem(t)}async hydrateCache(e,t){const n=Tt(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId);let r;t.claims&&(r=await this.cryptoImpl.hashString(t.claims));const o={idToken:n,accessToken:At(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,Da,void 0,e.tokenType,void 0,t.sshKid,t.claims,r)};return this.saveCacheRecord(o,e.correlationId)}async saveCacheRecord(e,t,n){try{await super.saveCacheRecord(e,t,n)}catch(r){if(r instanceof xn&&this.performanceClient&&t)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(r){}throw r}}}function zc(e,t,n,r){try{switch(t){case Do:return new lc(e,n,r);case Bo:return new uc}}catch(o){n.error(o)}return new xs}class Fc{constructor(e){this.eventCallbacks=new Map,this.logger=e||new pe({}),this.broadcastChannel=new BroadcastChannel("msal.broadcast.event"),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,n){if("undefined"!==typeof window){const r=n||ts();return this.eventCallbacks.has(r)?(this.logger.error(`Event callback with id: ${r} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${r}`),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,n,r){const o={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};switch(e){case gc:case pc:case mc:this.broadcastChannel.postMessage(o);break;default:this.invokeCallbacks(o)}}invokeCallbacks(e){this.eventCallbacks.forEach(((t,n)=>{let[r,o]=t;(0===o.length||o.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${n}: ${e.eventType}`),r.apply(null,[e]))}))}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel.removeEventListener("message",this.invokeCrossTabCallbacks)}}class Dc extends ke{constructor(e,t,n,r,o){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=o,Object.setPrototypeOf(this,Dc.prototype)}}class Bc{static generateThrottlingStorageKey(e){return`${G}.${JSON.stringify(e)}`}static preProcess(e,t){const n=Bc.generateThrottlingStorageKey(t),r=e.getThrottlingCache(n);if(r){if(r.throttleTime<Date.now())return void e.removeItem(n);throw new Dc(r.errorCodes?.join(" ")||i.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,t,n){if(Bc.checkResponseStatus(n)||Bc.checkResponseForRetryAfter(n)){const r={throttleTime:Bc.calculateThrottleTime(parseInt(n.headers[g])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(Bc.generateThrottlingStorageKey(t),r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(g)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||Q),n+W))}static removeThrottle(e,t,n,r){const o={clientId:t,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:r,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},i=this.generateThrottlingStorageKey(o);e.removeItem(i)}}const Kc="client_id",$c="redirect_uri",jc="response_type",Qc="token_type",Wc="req_cnf",Gc="return_spa_code",Vc="x-client-xtra-sku",Yc="brk_client_id",Jc="brk_redirect_uri";class Xc{static validateRedirectUri(e){if(!e)throw ln(Ht)}static validatePrompt(e){const t=[];for(const n in I)t.push(I[n]);if(t.indexOf(e)<0)throw ln($t)}static validateClaims(e){try{JSON.parse(e)}catch(t){throw ln(jt)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw ln(Vt);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([T.PLAIN,T.S256].indexOf(e)<0)throw ln(Gt)}}class Zc{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(jc,encodeURIComponent(i.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(jc,encodeURIComponent(`${i.TOKEN_RESPONSE_TYPE} ${i.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||E.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;!t||n.includes("openid")||e.includes("openid")||n.push("openid");const r=t?[...e||[],...n]:e||[],o=new dn(r);this.parameters.set("scope",encodeURIComponent(o.printScopes()))}addClientId(e){this.parameters.set(Kc,encodeURIComponent(e))}addRedirectUri(e){Xc.validateRedirectUri(e),this.parameters.set($c,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Xc.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(p,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(p,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,t){const n=this.addClientCapabilitiesToClaims(e,t);Xc.validateClaims(n),this.parameters.set("claims",encodeURIComponent(n))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set("x-app-name",e.appName),e?.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){Xc.validatePrompt(e),this.parameters.set("prompt",encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,t){if(Xc.validateCodeChallengeParams(e,t),!e||!t)throw ln(Vt);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(t))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(e){Object.entries(e).forEach((e=>{let[t,n]=e;!this.parameters.has(t)&&n&&this.parameters.set(t,n)}))}addClientCapabilitiesToClaims(e,t){let n;if(e)try{n=JSON.parse(e)}catch(r){throw ln(jt)}else n={};return t&&t.length>0&&(n.hasOwnProperty(k)||(n[k]={}),n[k][S]={values:t}),JSON.stringify(n)}addUsername(e){this.parameters.set(X,encodeURIComponent(e))}addPassword(e){this.parameters.set(Z,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(Qc,j.POP),this.parameters.set(Wc,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(Qc,j.SSH),this.parameters.set(Wc,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability",V)}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}addBrokerParameters(e){const t={};t[Yc]=e.brokerClientId,t[Jc]=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){const e=new Array;return this.parameters.forEach(((t,n)=>{e.push(`${n}=${t}`)})),function(e,t,n){if(!t)return;const r=e.get(Kc);r&&e.has(Yc)&&n?.addFields({embeddedClientId:r,embeddedRedirectUri:e.get($c)},t)}(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}async function el(e,t,n,r,o,i,a){a?.addQueueMeasurement(Wr,i);const s=Ds.transformCIAMAuthority(Bs(e)),c=new Ds(s,t,n,r,o,i,a);try{return await zs(c.resolveEndpointsAsync.bind(c),Gr,o,a,i)(),c}catch(l){throw mt(_e)}}class tl{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:n,loggerOptions:r,cacheOptions:o,storageInterface:i,networkInterface:a,cryptoInterface:s,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:d,persistencePlugin:h,serializableCache:f}=e;const g={...Hn,...r};return{authOptions:(p=t,{clientCapabilities:[],azureCloudOptions:Kn,skipAuthorityMetadataCache:!1,instanceAware:!1,...p}),systemOptions:{...Un,...n},loggerOptions:g,cacheOptions:{...zn,...o},storageInterface:i||new qn(t.clientId,yt,new pe(g)),networkInterface:a||Fn,cryptoInterface:s||yt,clientCredentials:c||Bn,libraryInfo:{...Dn,...l},telemetry:{...$n,...u},serverTelemetryManager:d||null,persistencePlugin:h||null,serializableCache:f||null};var p}(e),this.logger=new pe(this.config.loggerOptions,vt,bt),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[h]=i.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case ec:try{const n=fn(e.credential);t[p]=`Oid:${n.uid}@${n.utid}`}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case tc:t[p]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,n,r,o,i){i&&this.performanceClient?.addQueueMeasurement(i,o);const a=await this.sendPostRequest(r,e,{body:t,headers:n},o);return this.config.serverTelemetryManager&&a.status<500&&429!==a.status&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,n,r){let o;Bc.preProcess(this.cacheManager,e);try{o=await zs(this.networkClient.sendPostRequestAsync.bind(this.networkClient),ur,this.logger,this.performanceClient,r)(t,n);const e=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:e[y]||"",requestId:e[m]||""},r)}catch(i){if(i instanceof xi){const e=i.responseHeaders;throw e&&this.performanceClient?.addFields({httpVerToken:e[y]||"",requestId:e[m]||"",contentTypeHeader:e[h]||void 0,contentLengthHeader:e[f]||void 0,httpStatus:i.httpStatus},r),i.error}throw i instanceof ke?i:mt(Pe)}return Bc.postProcess(this.cacheManager,e,o),o}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(Hr,t);const n=`https://${e}/${this.authority.tenant}/`,r=await el(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=r}createTokenQueryParameters(e){const t=new Zc(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}}const nl="sw";class rl{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(Kr,e.correlationId);const n=await zs(this.generateKid.bind(this),Kr,t,this.performanceClient,e.correlationId)(e),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:r}}async generateKid(e){this.performanceClient?.addQueueMeasurement($r,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:nl}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){const{resourceRequestMethod:o,resourceRequestUri:i,shrClaims:a,shrNonce:s,shrOptions:c}=n,l=i?new Tn(i):void 0,u=l?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:kt(),m:o?.toUpperCase(),u:u?.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:u?.AbsolutePath,q:u?.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0,...r},t,c,n.correlationId)}}class ol{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class il{constructor(e,t,n,r,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?mt(xe,"Cached State"):mt(xe,"Server State");let n,r;try{n=decodeURIComponent(e.state)}catch(o){throw mt(Ne,e.state)}try{r=decodeURIComponent(t)}catch(o){throw mt(Ne,e.state)}if(n!==r)throw mt(Oe);if(e.error||e.error_description||e.suberror){const t=function(e){const t="code=",n=e.error_uri?.lastIndexOf(t);return n&&n>=0?e.error_uri?.substring(n+5):void 0}(e);if(Js(e.error,e.error_description,e.suberror))throw new Ys(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new Dc(e.error||"",e.error_description,e.suberror,t)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const n=`Error(s): ${e.error_codes||i.NOT_AVAILABLE} - Timestamp: ${e.timestamp||i.NOT_AVAILABLE} - Description: ${e.error_description||i.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||i.NOT_AVAILABLE} - Trace ID: ${e.trace_id||i.NOT_AVAILABLE}`,r=e.error_codes?.length?e.error_codes[0]:void 0,o=new Dc(e.error,n,e.suberror,r,e.status);if(t&&e.status&&e.status>=c&&e.status<=l)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${o}`);if(t&&e.status&&e.status>=a&&e.status<=s)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${o}`);if(Js(e.error,e.error_description,e.suberror))throw new Ys(e.error,e.error_description,e.suberror,e.timestamp||i.EMPTY_STRING,e.trace_id||i.EMPTY_STRING,e.correlation_id||i.EMPTY_STRING,e.claims||i.EMPTY_STRING,r);throw o}}async handleServerTokenResponse(e,t,n,r,o,a,s,c,l){let u,d;if(this.performanceClient?.addQueueMeasurement(jr,e.correlation_id),e.id_token){if(u=wt(e.id_token||i.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&u.nonce!==o.nonce)throw mt(Le);if(r.maxAge||0===r.maxAge){const e=u.auth_time;if(!e)throw mt(qe);Ct(e,r.maxAge)}}this.homeAccountIdentifier=kn.generateHomeAccountId(e.client_info||i.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u),o&&o.state&&(d=Zs.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||r.sshKid||void 0;const h=this.generateCacheRecord(e,t,n,r,u,a,o);let f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new ol(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(f)),s&&!c&&h.account){const e=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(e))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await il.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,u,d,void 0,l)}await this.cacheStorage.saveCacheRecord(h,r.correlationId,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(f))}return il.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,u,d,e,l)}generateCacheRecord(e,t,n,r,o,i,a){const s=t.getPreferredCache();if(!s)throw mt(Ye);const c=Cn(o);let l,u;e.id_token&&o&&(l=Tt(this.homeAccountIdentifier,s,e.id_token,this.clientId,c||""),u=al(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o,e.client_info,s,c,a,void 0,this.logger));let d=null;if(e.access_token){const o=e.scope?dn.fromString(e.scope):new dn(r.scopes||[]),a=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,l=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,u=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=n+a,f=h+l,g=u&&u>0?n+u:void 0;d=At(this.homeAccountIdentifier,s,e.access_token,this.clientId,c||t.tenant||"",o.printScopes(),h,f,this.cryptoObj.base64Decode,g,e.token_type,i,e.key_id,r.claims,r.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){t=n+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)}h=Et(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,i,t)}let f=null;return e.foci&&(f={clientId:this.clientId,environment:s,familyId:e.foci}),{account:u,idToken:l,accessToken:d,refreshToken:h,appMetadata:f}}static async generateAuthenticationResult(e,t,n,r,o,a,s,c,l){let u,d,h=i.EMPTY_STRING,f=[],g=null,p=i.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==j.POP||o.popKid)h=n.accessToken.secret;else{const t=new rl(e),{secret:r,keyId:i}=n.accessToken;if(!i)throw mt(ct);h=await t.signPopToken(r,i,o)}f=dn.fromString(n.accessToken.target).asArray(),g=new Date(1e3*Number(n.accessToken.expiresOn)),u=new Date(1e3*Number(n.accessToken.extendedExpiresOn)),n.accessToken.refreshOn&&(d=new Date(1e3*Number(n.accessToken.refreshOn)))}n.appMetadata&&(p=n.appMetadata.familyId===U?U:"");const m=a?.oid||a?.sub||"",y=a?.tid||"";c?.spa_accountid&&n.account&&(n.account.nativeAccountId=c?.spa_accountid);const v=n.account?mn(n.account.getAccountInfo(),void 0,a,n.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:m,tenantId:y,scopes:f,account:v,idToken:n?.idToken?.secret||"",idTokenClaims:a||{},accessToken:h,fromCache:r,expiresOn:g,extExpiresOn:u,refreshOn:d,correlationId:o.correlationId,requestId:l||i.EMPTY_STRING,familyId:p,tokenType:n.accessToken?.tokenType||i.EMPTY_STRING,state:s?s.userRequestState:i.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||i.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||i.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}}}function al(e,t,n,r,o,i,a,s,c,l,u){u?.verbose("setCachedAccount called");const d=e.getAccountKeys().find((e=>e.startsWith(n)));let h=null;d&&(h=e.getAccount(d));const f=h||kn.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,environment:a,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},t,r),g=f.tenantProfiles||[],p=s||f.realm;if(p&&!g.find((e=>e.tenantId===p))){const e=pn(n,f.localAccountId,p,o);g.push(e)}return f.tenantProfiles=g,f}async function sl(e,t,n){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:n})}class cl extends tl{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async getAuthCodeUrl(e){this.performanceClient?.addQueueMeasurement(Lr,e.correlationId);const t=await zs(this.createAuthCodeUrlQueryString.bind(this),Br,this.logger,this.performanceClient,e.correlationId)(e);return Tn.appendQueryString(this.authority.authorizationEndpoint,t)}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(zr,e.correlationId),!e.code)throw mt(De);const n=kt(),r=await zs(this.executeTokenRequest.bind(this),Fr,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=r.headers?.[m],i=new il(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return i.validateTokenResponse(r.body),zs(i.handleServerTokenResponse.bind(i),jr,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,t,void 0,void 0,void 0,o)}handleFragmentResponse(e,t){if(new il(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw mt(it);return e}getLogoutUri(e){if(!e)throw ln(Wt);const t=this.createLogoutUrlQueryString(e);return Tn.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Fr,t.correlationId);const n=this.createTokenQueryParameters(t),r=Tn.appendQueryString(e.tokenEndpoint,n),o=await zs(this.createTokenRequestBody.bind(this),Dr,this.logger,this.performanceClient,t.correlationId)(t);let i;if(t.clientInfo)try{const e=hn(t.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${e.uid}${x}${e.utid}`,type:ec}}catch(c){this.logger.verbose("Could not parse client info for CCS Header: "+c)}const a=this.createTokenRequestHeaders(i||t.ccsCredential),s={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return zs(this.executePostToTokenEndpoint.bind(this),hr,this.logger,this.performanceClient,t.correlationId)(r,o,a,s,t.correlationId,hr)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Dr,e.correlationId);const t=new Zc(e.correlationId,this.performanceClient);if(t.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[Kc]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):Xc.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!jn(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const n=this.config.clientCredentials.clientAssertion;t.addClientAssertion(await sl(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(n.assertionType)}if(t.addGrantType(_),t.addClientInfo(),e.authenticationScheme===j.POP){const n=new rl(this.cryptoUtils,this.performanceClient);let r;if(e.popKid)r=this.cryptoUtils.encodeKid(e.popKid);else{r=(await zs(n.generateCnf.bind(n),Kr,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}t.addPopToken(r)}else if(e.authenticationScheme===j.SSH){if(!e.sshJwk)throw ln(Zt);t.addSshJwk(e.sshJwk)}let n;if((!un.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=hn(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${t.uid}${x}${t.utid}`,type:ec}}catch(r){this.logger.verbose("Could not parse client info for CCS Header: "+r)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case ec:try{const e=fn(n.credential);t.addCcsOid(e)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case tc:t.addCcsUpn(n.credential)}return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[Gc]||t.addExtraQueryParameters({[Gc]:"1"}),t.createQueryString()}async createAuthCodeUrlQueryString(e){const t=e.correlationId||this.config.cryptoInterface.createNewGuid();this.performanceClient?.addQueueMeasurement(Br,t);const n=new Zc(t,this.performanceClient);n.addClientId(e.embeddedClientId||e.extraQueryParameters?.[Kc]||this.config.authOptions.clientId);const r=[...e.scopes||[],...e.extraScopesToConsent||[]];if(n.addScopes(r,!0,this.oidcDefaultScopes),n.addRedirectUri(e.redirectUri),n.addCorrelationId(t),n.addResponseMode(e.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),jn(this.config)||n.addApplicationTelemetry(this.config.telemetry.application),n.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&n.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&n.addPrompt(e.prompt),e.domainHint&&(n.addDomainHint(e.domainHint),this.performanceClient?.addFields({domainHintFromRequest:!0},t)),this.performanceClient?.addFields({prompt:e.prompt},t),e.prompt!==I.SELECT_ACCOUNT)if(e.sid&&e.prompt===I.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(e.sid),this.performanceClient?.addFields({sidFromRequest:!0},t);else if(e.account){const r=this.extractAccountSid(e.account);let i=this.extractLoginHint(e.account);if(i&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),i=null),i){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),n.addLoginHint(i),this.performanceClient?.addFields({loginHintFromClaim:!0},t);try{const t=fn(e.account.homeAccountId);n.addCcsOid(t)}catch(o){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(r&&e.prompt===I.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(r),this.performanceClient?.addFields({sidFromClaim:!0},t);try{const t=fn(e.account.homeAccountId);n.addCcsOid(t)}catch(o){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint),this.performanceClient?.addFields({loginHintFromRequest:!0},t);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(e.account.username),this.performanceClient?.addFields({loginHintFromUpn:!0},t);try{const t=fn(e.account.homeAccountId);n.addCcsOid(t)}catch(o){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint),this.performanceClient?.addFields({loginHintFromRequest:!0},t));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&n.addNonce(e.nonce),e.state&&n.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&n.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,n),e.platformBroker&&(n.addNativeBroker(),e.authenticationScheme===j.POP)){const t=new rl(this.cryptoUtils);let r;if(e.popKid)r=this.cryptoUtils.encodeKid(e.popKid);else{r=(await zs(t.generateCnf.bind(t),Kr,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}n.addPopToken(r)}return n.createQueryString()}createLogoutUrlQueryString(e){const t=new Zc(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}}function ll(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=e,a=new Map([[0,[n,r]],[2,[o,i]]]);let s=[];if(t?.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},(()=>"|"));return a.forEach(((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:o}=e;if(n>=t.length)return;t[n]=[r,o].join("|")}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})})),s.join(",")}class ul{constructor(e,t){this.cacheOutcome=ce,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||i.EMPTY_STRING,this.wrapperVer=e.wrapperVer||i.EMPTY_STRING,this.telemetryCacheKey=$.CACHE_KEY+O+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${$.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&t.push(`broker_error=${n}`);const r=t.join($.VALUE_SEPARATOR),o=[e,this.getRegionDiscoveryFields()].join($.VALUE_SEPARATOR);return[$.SCHEMA_VERSION,o,r].join($.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=ul.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join($.VALUE_SEPARATOR),r=e.errors.slice(0,t).join($.VALUE_SEPARATOR),o=e.errors.length,i=[o,t<o?$.OVERFLOW_TRUE:$.OVERFLOW_FALSE].join($.VALUE_SEPARATOR);return[$.SCHEMA_VERSION,e.cacheHits,n,r,i].join($.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=$.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ke?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push($.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=ul.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(e){let t,n=0,r=0;const o=e.errors.length;for(t=0;t<o;t++){const o=e.failedRequests[2*t]||i.EMPTY_STRING,a=e.failedRequests[2*t+1]||i.EMPTY_STRING,s=e.errors[t]||i.EMPTY_STRING;if(r+=o.toString().length+a.toString().length+s.length+3,!(r<$.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||i.EMPTY_STRING),e.push(this.regionSource||i.EMPTY_STRING),e.push(this.regionOutcome||i.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return ll(e)}}class dl{constructor(e,t,n,r,o,i,a,s,c){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.nativeMessageHandler=s,this.correlationId=c||ts(),this.logger=r.clone(Oo,Is,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){kn.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(kn.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(t){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch(n){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return Tn.getAbsoluteUrl(t,ms())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new ul(n,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(sr,this.correlationId);const r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.requestAuthority||this.config.auth.authority,i=n?.length?"true"===n:this.config.auth.instanceAware,a=t&&i?this.config.auth.authority.replace(Tn.getDomainFromUrl(o),t.environment):o,s=Ds.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),c=await zs(el,Wr,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!c.isAlias(t.environment))throw ln(an);return c}}async function hl(e,t,n){e.addQueueMeasurement(go,n);const r=Hs(fl,po,t,e,n)(e,t,n);return{verifier:r,challenge:await zs(gl,mo,t,e,n)(r,e,t,n)}}function fl(e,t,n){try{const r=new Uint8Array(32);Hs(Za,vo,t,e,n)(r);return Ha(r)}catch(r){throw Oa(qi)}}async function gl(e,t,n,r){t.addQueueMeasurement(mo,r);try{const o=await zs(Xa,yo,n,t,r)(e,t,r);return Ha(new Uint8Array(o))}catch(o){throw Oa(qi)}}async function pl(e,t,n,r){n.addQueueMeasurement(kr,e.correlationId);const o=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],a={...e,correlationId:e.correlationId,authority:o,scopes:i};if(a.authenticationScheme){if(a.authenticationScheme===j.SSH){if(!e.sshJwk)throw ln(Zt);if(!e.sshKid)throw ln(en)}r.verbose(`Authentication Scheme set to "${a.authenticationScheme}" as configured in Auth request`)}else a.authenticationScheme=j.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!un.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await cs(e.claims)),a}async function ml(e,t,n,r,o){r.addQueueMeasurement(Sr,e.correlationId);const i=await zs(pl,kr,o,r,e.correlationId)(e,n,r,o);return{...e,...i,account:t,forceRefresh:e.forceRefresh||!1}}class yl extends dl{async initializeAuthorizationCodeRequest(e,t){this.performanceClient.addQueueMeasurement(xr,this.correlationId);const n=t||await zs(hl,go,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),r={...e,redirectUri:e.redirectUri,code:i.EMPTY_STRING,codeVerifier:n.verifier};return e.codeChallenge=n.challenge,e.codeChallengeMethod=i.S256_CODE_CHALLENGE_METHOD,r}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const t={correlationId:this.correlationId||ts(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=Tn.getAbsoluteUrl(e.postLogoutRedirectUri,ms())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=Tn.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,ms())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=Tn.getAbsoluteUrl(ms(),ms())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(Mr,this.correlationId);const t=await zs(this.getClientConfiguration.bind(this),Nr,this.logger,this.performanceClient,this.correlationId)(e);return new cl(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:a}=e;this.performanceClient.addQueueMeasurement(Nr,this.correlationId);const s=await zs(this.getDiscoveredAuthority.bind(this),sr,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:a}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:s,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Oo,version:Is,cpu:i.EMPTY_STRING,os:i.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(Or,this.correlationId);const n=this.getRedirectUri(e.redirectUri),r={interactionType:t},o=Zs.setRequestState(this.browserCrypto,e&&e.state||i.EMPTY_STRING,r),a={...await zs(pl,kr,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:n,state:o,nonce:e.nonce||ts(),responseMode:this.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return a;const s=e.account||this.browserStorage.getActiveAccount();return s&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${s.homeAccountId}`,this.correlationId),a.account=s),a}}const vl="user_switch",bl={[vl]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class wl extends ke{constructor(e,t,n){super(e,t),Object.setPrototypeOf(this,wl.prototype),this.name="NativeAuthError",this.ext=n}}function Cl(e){return!(!e.ext||!e.ext.status||"PERSISTENT_ERROR"!==e.ext.status&&"DISABLED"!==e.ext.status)||(!(!e.ext||!e.ext.error||-2147186943!==e.ext.error)||"ContentError"===e.errorCode)}function kl(e,t,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return Xs($s);case"USER_INTERACTION_REQUIRED":return new Ys(e,t);case"USER_CANCEL":return Oa(Wi);case"NO_NETWORK":return Oa(ua)}return new wl(e,bl[e]||t,n)}class Sl extends tl{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(br,e.correlationId);let t=ce;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!un.isEmptyObj(e.claims))throw this.setCacheOutcome(le,e.correlationId),mt(nt);if(!e.account)throw mt(Ge);const n=e.account.tenantId||function(e){const t=new Tn(e).getUrlComponents(),n=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case b:case w:case C:return;default:return n}}(e.authority),r=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,r,n,this.performanceClient,e.correlationId);if(!o)throw this.setCacheOutcome(ue,e.correlationId),mt(nt);if(i=o.cachedAt,Number(i)>kt()||St(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(de,e.correlationId),mt(nt);var i;o.refreshOn&&St(o.refreshOn,0)&&(t=he);const a=e.authority||this.authority.getPreferredCache(),s={account:this.cacheManager.readAccountFromCache(e.account),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,r,n,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await zs(this.generateResultFromCacheRecord.bind(this),wr,this.logger,this.performanceClient,e.correlationId)(s,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==ce&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let n;if(this.performanceClient?.addQueueMeasurement(wr,t.correlationId),e.idToken&&(n=wt(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const e=n?.auth_time;if(!e)throw mt(qe);Ct(e,t.maxAge)}return il.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,n)}}class Il extends yl{async acquireToken(e){this.performanceClient.addQueueMeasurement(nr,e.correlationId);const t=this.initializeServerTelemetryManager(di),n=await zs(this.getClientConfiguration.bind(this),Nr,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),r=new Sl(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await zs(r.acquireCachedToken.bind(r),br,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(o){throw o instanceof Na&&o.errorCode===pa&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),o}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}}class Tl extends dl{constructor(e,t,n,r,o,i,a,s,c,l,u,d){super(e,t,n,r,o,i,s,c,d),this.apiId=a,this.accountId=l,this.nativeMessageHandler=c,this.nativeStorageManager=u,this.silentCacheClient=new Il(e,this.nativeStorageManager,n,r,o,i,s,c,d);const h=this.nativeMessageHandler.getExtensionId()===Lo?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=ul.makeExtraSkuString({libraryName:Oo,libraryVersion:Is,extensionName:h,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[Vc]:this.skus}}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(lr,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(lr,e.correlationId),r=kt(),o=this.initializeServerTelemetryManager(this.apiId);try{const a=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,a);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(i){if(t===Ei)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),i;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...s}=a,c={method:zo,request:s},l=await this.nativeMessageHandler.sendMessage(c),u=this.validateNativeResponse(l);return await this.handleNativeResponse(u,a,r).then((e=>(n.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),o.clearNativeBrokerErrorCode(),e))).catch((e=>{throw n.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e}))}catch(i){throw i instanceof wl&&o.setNativeBrokerErrorCode(i.errorCode),i}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:dn.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),mt(Je);const n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!n)throw mt(Je);try{const e=this.createSilentCacheRequest(t,n),r=await this.silentCacheClient.acquireToken(e),o={...n,idTokenClaims:r?.idTokenClaims,idToken:r?.idToken};return{...r,account:o}}catch(r){throw r}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...n}=e;delete n.onRedirectNavigate;const r=await this.initializeNativeRequest(n),o={method:zo,request:r};try{const e=await this.nativeMessageHandler.sendMessage(o);this.validateNativeResponse(e)}catch(s){if(s instanceof wl){if(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(s.errorCode),Cl(s))throw s}}this.browserStorage.setTemporaryCache(ti,JSON.stringify(r),!0);const i={apiId:ai,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(a,i)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;const{prompt:r,...o}=n;r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(ti));const i={method:zo,request:o},a=kt();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const e=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(e);const t=this.handleNativeResponse(e,o,a);this.browserStorage.setInteractionInProgress(!1);const n=await t;return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),n}catch(s){throw this.browserStorage.setInteractionInProgress(!1),s}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,n){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const r=wt(e.id_token,Da),o=this.createHomeAccountIdentifier(e,r),i=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId})?.homeAccountId;if(o!==i&&e.account.id!==t.accountId)throw kl(vl);const a=await this.getDiscoveredAuthority({requestAuthority:t.authority}),s=al(this.browserStorage,a,o,Da,r,e.client_info,void 0,r.tid,void 0,e.account.id,this.logger),c=await this.generateAuthenticationResult(e,t,r,s,a.canonicalAuthority,n);return await this.cacheAccount(s),await this.cacheNativeTokens(e,t,o,r,e.access_token,c.tenantId,n),c}createHomeAccountIdentifier(e,t){return kn.generateHomeAccountId(e.client_info||i.EMPTY_STRING,yn,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?dn.fromString(e.scope):dn.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===j.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const n=new rl(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw mt(ct);return n.signPopToken(e.access_token,t.keyId,r)}return e.access_token}async generateAuthenticationResult(e,t,n,r,o,a){const s=this.addTelemetryFromNativeResponse(e),c=e.scope?dn.fromString(e.scope):dn.fromString(t.scope),l=e.account.properties||{},u=l.UID||n.oid||n.sub||i.EMPTY_STRING,d=l.TenantId||n.tid||i.EMPTY_STRING,h=mn(r.getAccountInfo(),void 0,n,e.id_token);h.nativeAccountId!==e.account.id&&(h.nativeAccountId=e.account.id);const f=await this.generatePopAccessToken(e,t),g=t.tokenType===j.POP?j.POP:j.BEARER;return{authority:o,uniqueId:u,tenantId:d,scopes:c.asArray(),account:h,idToken:e.id_token,idTokenClaims:n,accessToken:f,fromCache:!!s&&this.isResponseFromCache(s),expiresOn:new Date(1e3*Number(a+e.expires_in)),tokenType:g,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e).catch((e=>{this.logger.error(`Error occurred while removing account context from browser storage. ${e}`)}))}cacheNativeTokens(e,t,n,r,o,a,s){const c=Tt(n,t.authority,e.id_token||"",t.clientId,r.tid||""),l=s+(t.tokenType===j.POP?i.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),u=this.generateScopes(e,t),d={idToken:c,accessToken:At(n,t.authority,o,t.clientId,r.tid||a,u.printScopes(),l,0,Da,void 0,t.tokenType,void 0,t.keyId)};return this.nativeStorageManager.saveCacheRecord(d,this.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw Se(be,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(t){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const n=new Tn(t);n.validateAsUri();const{scopes:r,...o}=e,i=new dn(r||[]);i.appendScopes(u);const a={...o,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:(()=>{switch(this.apiId){case ci:case di:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),I.NONE}if(e.prompt)switch(e.prompt){case I.NONE:case I.CONSENT:case I.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),Oa(Ta)}else this.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(a.signPopToken&&e.popKid)throw Oa(Ea);if(this.handleExtraBrokerParams(a),a.extraParameters=a.extraParameters||{},a.extraParameters.telemetry=qo,e.authenticationScheme===j.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},n=new rl(this.browserCrypto);let r;if(a.keyId)r=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:a.keyId})),a.signPopToken=!1;else{const o=await zs(n.generateCnf.bind(n),Kr,this.logger,this.performanceClient,e.correlationId)(t,this.logger);r=o.reqCnfString,a.keyId=o.kid,a.signPopToken=!0}a.reqCnf=r}return this.addRequestSKUs(a),a}handleExtraBrokerParams(e){const t=e.extraParameters&&e.extraParameters.hasOwnProperty(Yc)&&e.extraParameters.hasOwnProperty(Jc)&&e.extraParameters.hasOwnProperty(Kc);if(!e.embeddedClientId&&!t)return;let n="";const r=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,n=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Jc],n=e.extraParameters[Kc]),e.extraParameters={child_client_id:n,child_redirect_uri:r},this.performanceClient?.addFields({embeddedClientId:n,embeddedRedirectUri:r},e.correlationId)}}class Al{constructor(e,t,n,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(ao)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:xo,extensionId:this.extensionId,responseId:ts(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise(((e,n)=>{this.resolvers.set(t.responseId,{resolve:e,reject:n})}))}static async createProvider(e,t,n){e.trace("NativeMessageHandler - createProvider called.");try{const r=new Al(e,t,n,Lo);return await r.sendHandshakeRequest(),r}catch(r){const o=new Al(e,t,n);return await o.sendHandshakeRequest(),o}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:xo,extensionId:this.extensionId,responseId:ts(),body:{method:Uo}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise(((t,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:n}),this.timeoutId=window.setTimeout((()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(Oa(Ca)),this.handshakeResolvers.delete(e.responseId)}),this.handshakeTimeoutMs)}))}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===xo&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===Uo){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(Oa(ka))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,n=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===Fo){if(!n)return;const e=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(e)}`),"Success"!==e.status)n.reject(kl(e.code,e.description,e.ext));else{if(!e.result)throw Se(be,"Event does not contain result.");e.result.code&&e.result.description?n.reject(kl(e.result.code,e.result.description,e.result.ext)):n.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===Ho){if(!r)return void this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(o){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${o}`),this.logger.errorPii(`Unable to parse ${e}`),n?n.reject(o):r&&r.reject(o)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isPlatformBrokerAvailable(e,t,n,r){if(t.trace("isPlatformBrokerAvailable called"),!e.system.allowPlatformBroker)return t.trace("isPlatformBrokerAvailable: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return t.trace("isPlatformBrokerAvailable: Platform extension provider is not initialized, returning false"),!1;if(r)switch(r){case j.BEARER:case j.POP:return t.trace("isPlatformBrokerAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformBrokerAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class El{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async handleCodeResponse(e,t){let n;this.performanceClient.addQueueMeasurement(Ur,t.correlationId);try{n=this.authModule.handleFragmentResponse(e,t.state)}catch(r){throw r instanceof Dc&&r.subError===Wi?Oa(Wi):r}return zs(this.handleCodeResponseFromServer.bind(this),qr,this.logger,this.performanceClient,t.correlationId)(n,t)}async handleCodeResponseFromServer(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.performanceClient.addQueueMeasurement(qr,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await zs(this.authModule.updateAuthority.bind(this.authModule),Hr,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await zs(this.authModule.acquireToken.bind(this.authModule),zr,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:ec}:e.loginHint?{credential:e.loginHint,type:tc}:null}}function _l(e,t,n){const r=In(e);if(!r)throw Sn(e)?(n.error(`A ${t} is present in the iframe but it does not contain known properties. It's likely that the ${t} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${t} detected is: ${e}`),Oa(Di)):(n.error(`The request has returned to the redirectUri but a ${t} is not present. It's likely that the ${t} has been removed or the page has been redirected by code running on the redirectUri page.`),Oa(zi));return r}class Pl extends yl{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s}acquireToken(e,t){try{const n={popupName:this.generatePopupName(e.scopes||u,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,n,t)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),n.popup=this.openSizedPopup("about:blank",n),this.acquireTokenPopupAsync(e,n,t))}catch(n){return Promise.reject(n)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),n={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},r=e&&e.authority,o=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,n,r,o)):(this.logger.verbose("asyncPopup set to false, opening popup"),n.popup=this.openSizedPopup("about:blank",n),this.logoutPopupAsync(t,n,r,o))}catch(t){return Promise.reject(t)}}async acquireTokenPopupAsync(e,t,n){this.logger.verbose("acquireTokenPopupAsync called");const r=this.initializeServerTelemetryManager(si),o=await zs(this.initializeAuthorizationRequest.bind(this),Or,this.logger,this.performanceClient,this.correlationId)(e,gi.Popup);t.popup&&ks(o.authority);try{const i=await zs(this.initializeAuthorizationCodeRequest.bind(this),xr,this.logger,this.performanceClient,this.correlationId)(o,n),a=await zs(this.createAuthCodeClient.bind(this),Mr,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),s=Al.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let c;s&&(c=this.performanceClient.startMeasurement(cr,e.correlationId));const l=await a.getAuthCodeUrl({...o,platformBroker:s}),u=new El(a,this.browserStorage,i,this.logger,this.performanceClient),d=this.initiateAuthRequest(l,t);this.eventHandler.emitEvent(Nc,gi.Popup,{popupWindow:d},null);const h=await this.monitorPopupForHash(d,t.popupWindowParent),f=Hs(_l,Qr,this.logger,this.performanceClient,this.correlationId)(h,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(Bc.removeThrottle(this.browserStorage,this.config.auth.clientId,i),f.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),c&&c.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw Oa(Sa);const e=new Tl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,si,this.performanceClient,this.nativeMessageHandler,f.accountId,this.nativeStorage,o.correlationId),{userRequestState:t}=Zs.parseRequestState(this.browserCrypto,o.state);return await e.acquireToken({...o,state:t,prompt:void 0})}return await u.handleCodeResponse(f,o)}catch(i){throw t.popup?.close(),i instanceof ke&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),i}}async logoutPopupAsync(e,t,n,r){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Oc,gi.Popup,e);const o=this.initializeServerTelemetryManager(fi);try{await this.clearCacheOnLogout(e.account);const i=await zs(this.createAuthCodeClient.bind(this),Mr,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n,account:e.account||void 0});try{i.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&i.authority.protocolMode===ye){if(this.browserStorage.removeAccount(e.account?.homeAccountId),this.eventHandler.emitEvent(xc,gi.Popup,e),r){const e={apiId:fi,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=Tn.getAbsoluteUrl(r,ms());await this.navigationClient.navigateInternal(t,e)}return void t.popup?.close()}}const a=i.getLogoutUri(e);this.eventHandler.emitEvent(xc,gi.Popup,e);const s=this.openPopup(a,t);if(this.eventHandler.emitEvent(Nc,gi.Popup,{popupWindow:s},null),await this.monitorPopupForHash(s,t.popupWindowParent).catch((()=>{})),r){const e={apiId:fi,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=Tn.getAbsoluteUrl(r,ms());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${t}`),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(i){throw t.popup?.close(),i instanceof ke&&(i.setCorrelationId(this.correlationId),o.cacheFailedRequest(i)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(Lc,gi.Popup,null,i),this.eventHandler.emitEvent(qc,gi.Popup),i}this.eventHandler.emitEvent(qc,gi.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),Oa(Hi)}monitorPopupForHash(e,t){return new Promise(((t,n)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const r=setInterval((()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),void n(Oa(Wi));let o="";try{o=e.location.href}catch(s){}if(!o||"about:blank"===o)return;clearInterval(r);let i="";const a=this.config.auth.OIDCOptions.serverResponseType;e&&(i=a===A.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)}),this.config.system.pollIntervalMilliseconds)})).finally((()=>{this.cleanPopup(e,t)}))}openPopup(e,t){try{let n;if(t.popup?(n=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),n.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii(`Opening popup window to: ${e}`),n=this.openSizedPopup(e,t)),!n)throw Oa(Qi);return n.focus&&n.focus(),this.currentWindow=n,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(n){throw this.logger.error("error opening popup "+n.message),this.browserStorage.setInteractionInProgress(!1),Oa(ji)}}openSizedPopup(e,t){let{popupName:n,popupWindowAttributes:r,popupWindowParent:o}=t;const i=o.screenLeft?o.screenLeft:o.screenX,a=o.screenTop?o.screenTop:o.screenY,s=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=r.popupSize?.width,u=r.popupSize?.height,d=r.popupPosition?.top,h=r.popupPosition?.left;return(!l||l<0||l>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=Po),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=Ro),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-Ro/2+a)),(!h||h<0||h>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,s/2-Po/2+i)),o.open(e,n,`width=${l}, height=${u}, top=${d}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(gi.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${Mo}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return`${Mo}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}class Rl{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(Vo,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(ei,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const n={apiId:ai,timeout:t.redirectTimeout,noHistory:!1};if("function"===typeof t.onRedirectNavigate){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==t.onRedirectNavigate(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await t.navigationClient.navigateExternal(e,n)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await t.navigationClient.navigateExternal(e,n)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Oa(Hi)}async handleCodeResponse(e,t){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const n=this.browserStorage.generateStateKey(t),r=this.browserStorage.getTemporaryCache(n);if(!r)throw mt(xe,"Cached State");let o;try{o=this.authModule.handleFragmentResponse(e,r)}catch(c){throw c instanceof Dc&&c.subError===Wi?Oa(Wi):c}const i=this.browserStorage.generateNonceKey(r),a=this.browserStorage.getTemporaryCache(i);if(this.authCodeRequest.code=o.code,o.cloud_instance_host_name&&await zs(this.authModule.updateAuthority.bind(this.authModule),Hr,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(o.cloud_instance_host_name,this.authCodeRequest.correlationId),o.nonce=a||void 0,o.state=r,o.client_info)this.authCodeRequest.clientInfo=o.client_info;else{const e=this.checkCcsCredentials();e&&(this.authCodeRequest.ccsCredential=e)}const s=await this.authModule.acquireToken(this.authCodeRequest,o);return this.browserStorage.cleanRequestByState(t),s}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(Zo,!0);if(e)try{return JSON.parse(e)}catch(t){this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}class Ml extends yl{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.nativeStorage=s}async acquireToken(e){const t=await zs(this.initializeAuthorizationRequest.bind(this),Or,this.logger,this.performanceClient,this.correlationId)(e,gi.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);const n=this.initializeServerTelemetryManager(ai),r=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(Uc,gi.Redirect))};try{const o=await zs(this.initializeAuthorizationCodeRequest.bind(this),xr,this.logger,this.performanceClient,this.correlationId)(t),i=await zs(this.createAuthCodeClient.bind(this),Mr,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new Rl(i,this.browserStorage,o,this.logger,this.performanceClient),s=await i.getAuthCodeUrl({...t,platformBroker:Al.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),c=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${c}`),window.addEventListener("pageshow",r),await a.initiateAuthRequest(s,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:c,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(o){throw o instanceof ke&&(o.setCorrelationId(this.correlationId),n.cacheFailedRequest(o)),window.removeEventListener("pageshow",r),this.browserStorage.cleanRequestByState(t.state),o}}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const n=this.initializeServerTelemetryManager(li);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[r,o]=this.getRedirectResponse(e||"");if(!r)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(gi.Redirect),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return t?.type}()?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const a=this.browserStorage.getTemporaryCache(Vo,!0)||i.EMPTY_STRING,s=Tn.removeHashFromUrl(a);if(s===Tn.removeHashFromUrl(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),a.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(a);return await this.handleResponse(r,n)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(r,n);if(!ps()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(Yo,o,!0);const e={apiId:li,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let t=!0;if(a&&"null"!==a)this.logger.verbose(`Navigating to loginRequestUrl: ${a}`),t=await this.navigationClient.navigateInternal(a,e);else{const n=function(){const e=new Tn(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();this.browserStorage.setTemporaryCache(Vo,n,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),t=await this.navigationClient.navigateInternal(n,e)}if(!t)return await this.handleResponse(r,n)}return null}catch(r){throw r instanceof ke&&(r.setCorrelationId(this.correlationId),n.cacheFailedRequest(r)),this.browserStorage.cleanRequestByInteractionType(gi.Redirect),r}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===A.QUERY?window.location.search:window.location.hash);let n=In(t);if(n){try{!function(e,t,n){if(!e.state)throw Oa(Fi);const r=dc(t,e.state);if(!r)throw Oa(Bi);if(r.interactionType!==n)throw Oa(Ki)}(n,this.browserCrypto,gi.Redirect)}catch(i){return i instanceof ke&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return(r=window).location.hash="","function"===typeof r.history.replaceState&&r.history.replaceState(null,"",`${r.location.origin}${r.location.pathname}${r.location.search}`),this.logger.verbose("Hash contains known properties, returning response hash"),[n,t]}var r;const o=this.browserStorage.getTemporaryCache(Yo,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Yo)),o&&(n=In(o),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,o]):[null,""]}async handleResponse(e,t){const n=e.state;if(!n)throw Oa(Fi);const r=this.browserStorage.getCachedRequest(n);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Oa(Sa);const t=new Tl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,si,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,r.correlationId),{userRequestState:o}=Zs.parseRequestState(this.browserCrypto,n);return t.acquireToken({...r,state:o,prompt:void 0}).finally((()=>{this.browserStorage.cleanRequestByState(n)}))}const o=this.browserStorage.getCachedAuthority(n);if(!o)throw Oa(ia);const i=await zs(this.createAuthCodeClient.bind(this),Mr,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:o});Bc.removeThrottle(this.browserStorage,this.config.auth.clientId,r);return new Rl(i,this.browserStorage,r,this.logger,this.performanceClient).handleCodeResponse(e,n)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(hi);try{this.eventHandler.emitEvent(Oc,gi.Redirect,e),await this.clearCacheOnLogout(t.account);const r={apiId:hi,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=await zs(this.createAuthCodeClient.bind(this),Mr,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===ye)try{o.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId)return this.browserStorage.removeAccount(t.account?.homeAccountId),void this.eventHandler.emitEvent(xc,gi.Redirect,t)}const i=o.getLogoutUri(t);if(this.eventHandler.emitEvent(xc,gi.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),void await this.navigationClient.navigateExternal(i,r);if(!1!==e.onRedirectNavigate(i))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),void await this.navigationClient.navigateExternal(i,r);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(r){throw r instanceof ke&&(r.setCorrelationId(this.correlationId),n.cacheFailedRequest(r)),this.eventHandler.emitEvent(Lc,gi.Redirect,null,r),this.eventHandler.emitEvent(qc,gi.Redirect),r}this.eventHandler.emitEvent(qc,gi.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return Tn.getAbsoluteUrl(t,ms())}}async function Nl(e,t,n,r,o){if(t.addQueueMeasurement(Er,r),!e)throw n.info("Navigate url is empty"),Oa(Hi);return o?zs(xl,Pr,n,t,r)(e,o,t,r):Hs(Ll,Rr,n,t,r)(e)}async function Ol(e,t,n,r,o,i,a){return r.addQueueMeasurement(_r,i),new Promise(((r,i)=>{t<Ss&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${t}ms) than the default (10000ms). This may result in timeouts.`);const s=window.setTimeout((()=>{window.clearInterval(c),i(Oa(Vi))}),t),c=window.setInterval((()=>{let t="";const n=e.contentWindow;try{t=n?n.location.href:""}catch(i){}if(!t||"about:blank"===t)return;let o="";n&&(o=a===A.QUERY?n.location.search:n.location.hash),window.clearTimeout(s),window.clearInterval(c),r(o)}),n)})).finally((()=>{Hs(Ul,so,o,r,i)(e)}))}function xl(e,t,n,r){return n.addQueueMeasurement(Pr,r),new Promise(((n,r)=>{const o=ql();window.setTimeout((()=>{o?(o.src=e,n(o)):r("Unable to load iframe")}),t)}))}function Ll(e){const t=ql();return t.src=e,t}function ql(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function Ul(e){document.body===e.parentNode&&document.body.removeChild(e)}class Hl extends yl{constructor(e,t,n,r,o,i,a,s,c,l,u){super(e,t,n,r,o,i,s,l,u),this.apiId=a,this.nativeStorage=c}async acquireToken(e){this.performanceClient.addQueueMeasurement(rr,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t={...e};t.prompt?t.prompt!==I.NONE&&t.prompt!==I.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${I.NONE}`),t.prompt=I.NONE):t.prompt=I.NONE;const n=await zs(this.initializeAuthorizationRequest.bind(this),Or,this.logger,this.performanceClient,e.correlationId)(t,gi.Silent);ks(n.authority);const r=this.initializeServerTelemetryManager(this.apiId);let o;try{return o=await zs(this.createAuthCodeClient.bind(this),Mr,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await zs(this.silentTokenHelper.bind(this),Ar,this.logger,this.performanceClient,e.correlationId)(o,n)}catch(i){if(i instanceof ke&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),!o||!(i instanceof ke)||i.errorCode!==_o)throw i;this.performanceClient.addFields({retryError:i.errorCode},this.correlationId);const n=await zs(this.initializeAuthorizationRequest.bind(this),Or,this.logger,this.performanceClient,e.correlationId)(t,gi.Silent);return await zs(this.silentTokenHelper.bind(this),Ar,this.logger,this.performanceClient,this.correlationId)(o,n)}}logout(){return Promise.reject(Oa(ea))}async silentTokenHelper(e,t){const n=t.correlationId;this.performanceClient.addQueueMeasurement(Ar,n);const r=await zs(this.initializeAuthorizationCodeRequest.bind(this),xr,this.logger,this.performanceClient,n)(t),o=await zs(e.getAuthCodeUrl.bind(e),Lr,this.logger,this.performanceClient,n)({...t,platformBroker:Al.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)}),i=new El(e,this.browserStorage,r,this.logger,this.performanceClient),a=await zs(Nl,Er,this.logger,this.performanceClient,n)(o,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait),s=this.config.auth.OIDCOptions.serverResponseType,c=await zs(Ol,_r,this.logger,this.performanceClient,n)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,s),l=Hs(_l,Qr,this.logger,this.performanceClient,this.correlationId)(c,s,this.logger);if(l.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Oa(Sa);const e=new Tl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,l.accountId,this.browserStorage,n),{userRequestState:r}=Zs.parseRequestState(this.browserCrypto,t.state);return zs(e.acquireToken.bind(e),lr,this.logger,this.performanceClient,n)({...t,state:r,prompt:t.prompt||I.NONE})}return zs(i.handleCodeResponse.bind(i),Ur,this.logger,this.performanceClient,n)(l,t)}}class zl extends tl{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(gr,e.correlationId);const t=kt(),n=await zs(this.executeTokenRequest.bind(this),fr,this.logger,this.performanceClient,e.correlationId)(e,this.authority),r=n.headers?.[m],o=new il(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),zs(o.handleServerTokenResponse.bind(o),jr,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,r)}async acquireTokenByRefreshToken(e){if(!e)throw ln(Qt);if(this.performanceClient?.addQueueMeasurement(mr,e.correlationId),!e.account)throw mt(Ge);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await zs(this.acquireTokenWithCachedRefreshToken.bind(this),pr,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(t){const n=t instanceof Ys&&t.errorCode===Ks,r=t instanceof Dc&&t.errorCode===Y&&t.subError===J;if(n||r)return zs(this.acquireTokenWithCachedRefreshToken.bind(this),pr,this.logger,this.performanceClient,e.correlationId)(e,!1);throw t}return zs(this.acquireTokenWithCachedRefreshToken.bind(this),pr,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(pr,e.correlationId);const n=Hs(this.cacheManager.getRefreshToken.bind(this.cacheManager),lo,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!n)throw Xs(Ks);if(n.expiresOn&&St(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),Xs(js);const r={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||j.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:ec}};try{return await zs(this.acquireToken.bind(this),gr,this.logger,this.performanceClient,e.correlationId)(r)}catch(o){if(o instanceof Ys&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),o.subError===Qs)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const e=It(n);this.cacheManager.removeRefreshToken(e)}throw o}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(fr,e.correlationId);const n=this.createTokenQueryParameters(e),r=Tn.appendQueryString(t.tokenEndpoint,n),o=await zs(this.createTokenRequestBody.bind(this),yr,this.logger,this.performanceClient,e.correlationId)(e),i=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return zs(this.executePostToTokenEndpoint.bind(this),dr,this.logger,this.performanceClient,e.correlationId)(r,o,i,a,e.correlationId,dr)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(yr,e.correlationId);const t=e.correlationId,n=new Zc(t,this.performanceClient);if(n.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[Kc]||this.config.authOptions.clientId),e.redirectUri&&n.addRedirectUri(e.redirectUri),n.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),n.addGrantType(P),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!jn(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),n.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;n.addClientAssertion(await sl(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n.addClientAssertionType(t.assertionType)}if(e.authenticationScheme===j.POP){const t=new rl(this.cryptoUtils,this.performanceClient);let r;if(e.popKid)r=this.cryptoUtils.encodeKid(e.popKid);else{r=(await zs(t.generateCnf.bind(t),Kr,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}n.addPopToken(r)}else if(e.authenticationScheme===j.SSH){if(!e.sshJwk)throw ln(Zt);n.addSshJwk(e.sshJwk)}if((!un.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case ec:try{const t=fn(e.ccsCredential.credential);n.addCcsOid(t)}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case tc:n.addCcsUpn(e.ccsCredential.credential)}return e.embeddedClientId&&n.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),n.createQueryString()}}class Fl extends yl{async acquireToken(e){this.performanceClient.addQueueMeasurement(ir,e.correlationId);const t=await zs(pl,kr,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n={...e,...t};e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));const r=this.initializeServerTelemetryManager(di),o=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return zs(o.acquireTokenByRefreshToken.bind(o),mr,this.logger,this.performanceClient,e.correlationId)(n).catch((e=>{throw e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e),e}))}logout(){return Promise.reject(Oa(ea))}async createRefreshTokenClient(e){const t=await zs(this.getClientConfiguration.bind(this),Nr,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new zl(t,this.performanceClient)}}class Dl{constructor(e,t,n,r){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=r}async loadExternalTokens(e,t,n){if(!this.isBrowserEnvironment)throw Oa(ca);const r=e.correlationId||ts(),o=t.id_token?wt(t.id_token,Da):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new Ds(Ds.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||ts()):void 0,s=await this.loadAccount(e,n.clientInfo||t.client_info||"",r,o,a),c=await this.loadIdToken(t,s.homeAccountId,s.environment,s.realm,r),l=await this.loadAccessToken(e,t,s.homeAccountId,s.environment,s.realm,n,r),u=await this.loadRefreshToken(t,s.homeAccountId,s.environment,r);return this.generateAuthenticationResult(e,{account:s,idToken:c,accessToken:l,refreshToken:u},o,a)}async loadAccount(e,t,n,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=kn.createFromAccountInfo(e.account);return await this.storage.setAccount(t,n),t}if(!o||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Oa(ga);const i=kn.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,r),a=r?.tid,s=al(this.storage,o,i,Da,r,t,o.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(s,n),s}async loadIdToken(e,t,n,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=Tt(t,n,e.id_token,this.config.auth.clientId,r);return await this.storage.setIdTokenCredential(i,o),i}async loadAccessToken(e,t,n,r,o,i,a){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const s=t.scope?dn.fromString(t.scope):new dn(e.scopes),c=i.expiresOn||t.expires_in+(new Date).getTime()/1e3,l=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+(new Date).getTime()/1e3,u=At(n,r,t.access_token,this.config.auth.clientId,o,s.printScopes(),c,l,Da);return await this.storage.setAccessTokenCredential(u,a),u}async loadRefreshToken(e,t,n,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=Et(t,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(o,r),o}generateAuthenticationResult(e,t,n,r){let o,i="",a=[],s=null;t?.accessToken&&(i=t.accessToken.secret,a=dn.fromString(t.accessToken.target).asArray(),s=new Date(1e3*Number(t.accessToken.expiresOn)),o=new Date(1e3*Number(t.accessToken.extendedExpiresOn)));const c=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:a,account:c.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:n||{},accessToken:i,fromCache:!0,expiresOn:s,correlationId:e.correlationId||"",requestId:"",extExpiresOn:o,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:c.cloudGraphHostName||"",msGraphHost:c.msGraphHost||"",fromNativeBroker:!1}}}class Bl extends cl{constructor(e){super(e),this.includeRedirectUri=!1}}class Kl extends yl{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,s,c,l),this.apiId=a}async acquireToken(e){if(!e.code)throw Oa(ma);const t=await zs(this.initializeAuthorizationRequest.bind(this),Or,this.logger,this.performanceClient,e.correlationId)(e,gi.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{const r={...t,code:e.code},o=await zs(this.getClientConfiguration.bind(this),Nr,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new Bl(o);this.logger.verbose("Auth code client created");const a=new El(i,this.browserStorage,r,this.logger,this.performanceClient);return await zs(a.handleCodeResponseFromServer.bind(a),qr,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(r){throw r instanceof ke&&(r.setCorrelationId(this.correlationId),n.cacheFailedRequest(r)),r}}logout(){return Promise.reject(Oa(ea))}}function $l(e){const t=e?.idTokenClaims;return t?.tfp||t?.acr?"B2C":t?.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===t?.tid?"MSA":"AAD":void 0}function jl(e,t){try{ws(e)}catch(n){throw t.end({success:!1},n),n}}class Ql{constructor(e){var t,n,r,o;this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new qs(this.logger,this.performanceClient):yt,this.eventHandler=new Fc(this.logger),this.browserStorage=this.isBrowserEnvironment?new Hc(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(r){throw ln(Yt)}return{canonicalAuthority:e.authority?Bs(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth)):(t=this.config.auth.clientId,n=this.logger,r=this.performanceClient,o=this.eventHandler,new Hc(t,{cacheLocation:Ko,temporaryCacheLocation:Ko,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},yt,n,r,o));const i={cacheLocation:Ko,temporaryCacheLocation:Ko,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Hc(this.config.auth.clientId,i,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new Dl(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const n=new Ql(e);return await n.initialize(t),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(fc);const t=e?.correlationId||this.getRequestCorrelationId(),n=this.config.system.allowPlatformBroker,r=this.performanceClient.startMeasurement(Ir,t);if(this.eventHandler.emitEvent(hc),await zs(this.browserStorage.initialize.bind(this.browserStorage),Tr,this.logger,this.performanceClient,t)(t),n)try{this.nativeExtensionProvider=await Al.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(o){this.logger.verbose(o)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await zs(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),co,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t),this.initialized=!0,this.eventHandler.emitEvent(fc),r.end({allowPlatformBroker:n,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),bs(this.initialized),this.isBrowserEnvironment){const t=e||"";let n=this.redirectResponse.get(t);return"undefined"===typeof n?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const t=this.getAllAccounts(),n=this.browserStorage.getCachedNativeRequest(),r=n&&Al.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,o=r?n?.correlationId:this.browserStorage.getTemporaryCache(ei,!0)||"",i=this.performanceClient.startMeasurement(Zn,o);let a;if(this.eventHandler.emitEvent(Rc,gi.Redirect),r&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const e=new Tl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,li,this.performanceClient,this.nativeExtensionProvider,n.accountId,this.nativeInternalStorage,n.correlationId);a=zs(e.handleRedirectPromise.bind(e),io,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const t=this.createRedirectClient(o);a=zs(t.handleRedirectPromise.bind(t),oo,this.logger,this.performanceClient,i.event.correlationId)(e,i)}return a.then((e=>{if(e){t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(vc,gi.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Cc,gi.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0,accountType:$l(e.account)})}else i.event.errorCode?i.end({success:!1}):i.discard();return this.eventHandler.emitEvent(Mc,gi.Redirect),e})).catch((e=>{const n=e;throw t.length>0?this.eventHandler.emitEvent(kc,gi.Redirect,null,n):this.eventHandler.emitEvent(bc,gi.Redirect,null,n),this.eventHandler.emitEvent(Mc,gi.Redirect),i.end({success:!1},n),e}))}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const n=this.performanceClient.startMeasurement(Xn,t);n.add({accountType:$l(e.account),scenarioId:e.scenarioId});const r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=e=>{const t="function"===typeof r?r(e):void 0;return!1!==t?n.end({success:!0}):n.discard(),t};else{const e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{const r="function"===typeof e?e(t):void 0;return!1!==r?n.end({success:!0}):n.discard(),r}}const o=this.getAllAccounts().length>0;try{let r;if(Cs(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),o?this.eventHandler.emitEvent(wc,gi.Redirect,e):this.eventHandler.emitEvent(yc,gi.Redirect,e),this.nativeExtensionProvider&&this.canUsePlatformBroker(e)){r=new Tl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ai,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,n).catch((n=>{if(n instanceof wl&&Cl(n)){this.nativeExtensionProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(n instanceof Ys){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw this.browserStorage.setInteractionInProgress(!1),n}))}else{r=this.createRedirectClient(t).acquireToken(e)}return await r}catch(i){throw n.end({success:!1},i),o?this.eventHandler.emitEvent(kc,gi.Redirect,null,i):this.eventHandler.emitEvent(bc,gi.Redirect,null,i),i}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(Jn,t);n.add({scenarioId:e.scenarioId,accountType:$l(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),jl(this.initialized,n),this.browserStorage.setInteractionInProgress(!0)}catch(a){return Promise.reject(a)}const r=this.getAllAccounts();let o;r.length>0?this.eventHandler.emitEvent(wc,gi.Popup,e):this.eventHandler.emitEvent(yc,gi.Popup,e);const i=this.getPreGeneratedPkceCodes(t);if(this.canUsePlatformBroker(e))o=this.acquireTokenNative({...e,correlationId:t},si).then((e=>(this.browserStorage.setInteractionInProgress(!1),n.end({success:!0,isNativeBroker:!0,accountType:$l(e.account)}),e))).catch((n=>{if(n instanceof wl&&Cl(n)){this.nativeExtensionProvider=void 0;return this.createPopupClient(t).acquireToken(e,i)}if(n instanceof Ys){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e,i)}throw this.browserStorage.setInteractionInProgress(!1),n}));else{o=this.createPopupClient(t).acquireToken(e,i)}return o.then((e=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(vc,gi.Popup,e):this.eventHandler.emitEvent(Cc,gi.Popup,e),n.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:$l(e.account)}),e))).catch((e=>(r.length>0?this.eventHandler.emitEvent(kc,gi.Popup,null,e):this.eventHandler.emitEvent(bc,gi.Popup,null,e),n.end({success:!1},e),Promise.reject(e)))).finally((()=>this.config.system.asyncPopups&&this.preGeneratePkceCodes(t)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){const t=this.getRequestCorrelationId(e),n={...e,prompt:e.prompt,correlationId:t};let r;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(ar,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:$l(e.account)}),jl(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(Ic,gi.Silent,n),this.canUsePlatformBroker(n))r=this.acquireTokenNative(n,ci).catch((e=>{if(e instanceof wl&&Cl(e)){this.nativeExtensionProvider=void 0;return this.createSilentIframeClient(n.correlationId).acquireToken(n)}throw e}));else{r=this.createSilentIframeClient(n.correlationId).acquireToken(n)}return r.then((e=>(this.eventHandler.emitEvent(Tc,gi.Silent,e),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:$l(e.account)}),e))).catch((e=>{throw this.eventHandler.emitEvent(Ac,gi.Silent,null,e),this.ssoSilentMeasurement?.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const n=this.performanceClient.startMeasurement(Wn,t);jl(this.initialized,n),this.eventHandler.emitEvent(Ec,gi.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Oa(va);if(e.code){const r=e.code;let o=this.hybridAuthCodeResponses.get(r);return o?(this.logger.verbose("Existing acquireTokenByCode request found",t),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync({...e,correlationId:t}).then((e=>(this.eventHandler.emitEvent(_c,gi.Silent,e),this.hybridAuthCodeResponses.delete(r),n.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:$l(e.account)}),e))).catch((e=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(Pc,gi.Silent,null,e),n.end({success:!1},e),e})),this.hybridAuthCodeResponses.set(r,o)),await o}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){const r=await this.acquireTokenNative({...e,correlationId:t},ui,e.nativeAccountId).catch((e=>{throw e instanceof wl&&Cl(e)&&(this.nativeExtensionProvider=void 0),e}));return n.end({accountType:$l(r.account),success:!0}),r}throw Oa(wa)}throw Oa(ya)}catch(r){throw this.eventHandler.emitEvent(Pc,gi.Silent,null,r),n.end({success:!1},r),r}}async acquireTokenByCodeAsync(e){this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(ro,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const t=this.createSilentAuthCodeClient(e.correlationId);return await t.acquireToken(e).then((e=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e))).catch((e=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(vr,e.correlationId),t){case Ai:case Ei:case _i:const t=this.createSilentCacheClient(e.correlationId);return zs(t.acquireToken.bind(t),nr,this.logger,this.performanceClient,e.correlationId)(e);default:throw mt(nt)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(Gn,e.correlationId),t){case Ai:case _i:case Pi:case Ri:const t=this.createSilentRefreshClient(e.correlationId);return zs(t.acquireToken.bind(t),ir,this.logger,this.performanceClient,e.correlationId)(e);default:throw mt(nt)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(Cr,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return zs(t.acquireToken.bind(t),rr,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);Cs(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);ws(this.initialized),this.browserStorage.setInteractionInProgress(!0);return this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return function(e,t,n,r){return e.verbose("getAllAccounts called"),n?t.getAllAccounts(r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return function(e,t,n){if(t.trace("getAccount called"),0===Object.keys(e).length)return t.warning("getAccount: No accountFilter provided"),null;const r=n.getAccountInfoFilteredBy(e);return r?(t.verbose("getAccount: Account matching provided filter found, returning"),r):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByUsername(e){return function(e,t,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const r=n.getAccountInfoFilteredBy({username:e});return r?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${e}`),r):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return function(e,t,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=n.getAccountInfoFilteredBy({homeAccountId:e});return r?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${e}`),r):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return function(e,t,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const r=n.getAccountInfoFilteredBy({localAccountId:e});return r?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${e}`),r):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}setActiveAccount(e){!function(e,t){t.setActiveAccount(e)}(e,this.browserStorage)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const n=kn.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(n,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,n,r){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw Oa(Sa);return new Tl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,r)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!Al.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isPlatformBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case I.NONE:case I.CONSENT:case I.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new Pl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new Ml(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new Hl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ci,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new Il(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new Fl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new Kl(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,ui,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return vs(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===Do?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===Do?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?ts():i.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||ki})}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||ki})}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(Vn,t);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),jl(this.initialized,n),this.logger.verbose("acquireTokenSilent called",t);const r=e.account||this.getActiveAccount();if(!r)throw Oa(ta);n.add({accountType:$l(r)});const o={clientId:this.config.auth.clientId,authority:e.authority||i.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:r.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},a=JSON.stringify(o),s=this.activeSilentTokenRequests.get(a);if("undefined"===typeof s){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);const o=zs(this.acquireTokenSilentAsync.bind(this),Yn,this.logger,this.performanceClient,t)({...e,correlationId:t},r).then((t=>(this.activeSilentTokenRequests.delete(a),n.end({success:!0,fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:t.accessToken.length,idTokenSize:t.idToken.length}),t))).catch((e=>{throw this.activeSilentTokenRequests.delete(a),n.end({success:!1},e),e}));return this.activeSilentTokenRequests.set(a,o),{...await o,state:e.state}}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),n.discard(),{...await s,state:e.state}}async acquireTokenSilentAsync(e,t){const n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(Yn,e.correlationId),this.eventHandler.emitEvent(wc,gi.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);const r=await zs(ml,Sr,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),o=e.cacheLookupPolicy||Ai;return this.acquireTokenSilentNoIframe(r,o).catch((async e=>{const t=function(e,t){const n=!(e instanceof Ys&&e.subError!==Qs),r=e.errorCode===_o||e.errorCode===nt,o=n&&r||e.errorCode===Ks||e.errorCode===js,i=Ni.includes(t);return o&&i}(e,o);if(t){if(this.activeIframeRequest){if(o!==Mi){const[t,n]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${n}`,r.correlationId);const i=this.performanceClient.startMeasurement(or,r.correlationId);i.add({awaitIframeCorrelationId:n});const a=await t;if(i.end({success:a}),a)return this.logger.verbose(`Parallel iframe request with correlationId: ${n} succeeded. Retrying cache and/or RT redemption`,r.correlationId),this.acquireTokenSilentNoIframe(r,o);throw this.logger.info(`Iframe request with correlationId: ${n} failed. Interaction is required.`),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),zs(this.acquireTokenBySilentIframe.bind(this),Cr,this.logger,this.performanceClient,r.correlationId)(r)}{let e;return this.activeIframeRequest=[new Promise((t=>{e=t})),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),zs(this.acquireTokenBySilentIframe.bind(this),Cr,this.logger,this.performanceClient,r.correlationId)(r).then((t=>(e(!0),t))).catch((t=>{throw e(!1),t})).finally((()=>{this.activeIframeRequest=void 0}))}}throw e})).then((t=>(this.eventHandler.emitEvent(Cc,gi.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker},e.correlationId),t))).catch((e=>{throw this.eventHandler.emitEvent(kc,gi.Silent,null,e),e})).finally((()=>{document.removeEventListener("visibilitychange",n)}))}async acquireTokenSilentNoIframe(e,t){return Al.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,di,e.account.nativeAccountId,t).catch((async e=>{if(e instanceof wl&&Cl(e))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,mt(nt);throw e}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===Ei&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),zs(this.acquireTokenFromCache.bind(this),vr,this.logger,this.performanceClient,e.correlationId)(e,t).catch((n=>{if(t===Ei)throw n;return this.eventHandler.emitEvent(Sc,gi.Silent,e),zs(this.acquireTokenByRefreshToken.bind(this),Gn,this.logger,this.performanceClient,e.correlationId)(e,t)})))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await zs(hl,go,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose((t?"Found":"Did not find")+" pre-generated PKCE codes"),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}}class Wl{static async createPublicClientApplication(e){const t=await async function(e,t){const n=new As(e);return await n.initialize(),Ql.createController(n,t)}(e);return new Wl(e,t)}constructor(e,t){this.controller=t||new Ql(new As(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}const Gl={instance:{initialize:()=>Promise.reject(gs(us)),acquireTokenPopup:()=>Promise.reject(gs(us)),acquireTokenRedirect:()=>Promise.reject(gs(us)),acquireTokenSilent:()=>Promise.reject(gs(us)),acquireTokenByCode:()=>Promise.reject(gs(us)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(gs(us)),loginPopup:()=>Promise.reject(gs(us)),loginRedirect:()=>Promise.reject(gs(us)),logout:()=>Promise.reject(gs(us)),logoutRedirect:()=>Promise.reject(gs(us)),logoutPopup:()=>Promise.reject(gs(us)),ssoSilent:()=>Promise.reject(gs(us)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw gs(us)},getLogger:()=>{throw gs(us)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw gs(us)},hydrateCache:()=>Promise.reject(gs(us)),clearCache:()=>Promise.reject(gs(us))},inProgress:Ci,accounts:[],logger:new pe({})},Vl=r.createContext(Gl);Vl.Consumer;class Yl{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case yc:return mi;case Ic:return bi;case wc:if(e.interactionType===gi.Redirect||e.interactionType===gi.Popup)return vi;break;case Rc:return wi;case Oc:return yi;case Tc:case Ac:if(t&&t!==bi)break;return Ci;case qc:if(t&&t!==yi)break;return Ci;case Mc:if(t&&t!==wi)break;return Ci;case vc:case bc:case Cc:case kc:case Uc:if(e.interactionType===gi.Redirect||e.interactionType===gi.Popup){if(t&&t!==mi&&t!==vi)break;return Ci}}return null}}function Jl(e,t){if(e.length!==t.length)return!1;const n=[...t];return e.every((e=>{const t=n.shift();return!(!e||!t)&&(e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username)}))}const Xl="3.0.5",Zl="UNBLOCK_INPROGRESS",eu="EVENT",tu=(e,t)=>{const{type:n,payload:r}=t;let o=e.inProgress;switch(n){case Zl:e.inProgress===pi&&(o=Ci,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case eu:const t=r.message,i=Yl.getInteractionStatusFromEvent(t,e.inProgress);i&&(r.logger.info(`MsalProvider - ${t.eventType} results in setting inProgress from ${e.inProgress} to ${i}`),o=i);break;default:throw new Error(`Unknown action type: ${n}`)}const i=r.instance.getAllAccounts();return o===e.inProgress||Jl(i,e.accounts)?o!==e.inProgress?{...e,inProgress:o}:Jl(i,e.accounts)?e:{...e,accounts:i}:{...e,inProgress:o,accounts:i}};function nu(e){let{instance:t,children:n}=e;(0,r.useEffect)((()=>{t.initializeWrapperLibrary(Si,Xl)}),[t]);const o=(0,r.useMemo)((()=>t.getLogger().clone("@azure/msal-react",Xl)),[t]),[i,a]=(0,r.useReducer)(tu,void 0,(()=>({inProgress:pi,accounts:t.getAllAccounts()})));(0,r.useEffect)((()=>{const e=t.addEventCallback((e=>{a({payload:{instance:t,logger:o,message:e},type:eu})}));return o.verbose(`MsalProvider - Registered event callback with id: ${e}`),t.initialize().then((()=>{t.handleRedirectPromise().catch((()=>{})).finally((()=>{a({payload:{instance:t,logger:o},type:Zl})}))})).catch((()=>{})),()=>{e&&(o.verbose(`MsalProvider - Removing event callback ${e}`),t.removeEventCallback(e))}}),[t,o]);const s={instance:t,inProgress:i.inProgress,accounts:i.accounts,logger:o};return r.createElement(Vl.Provider,{value:s},n)}const ru={auth:{clientId:"55cdc898-c249-45ae-afe5-fbdb4997d321",authority:"https://login.microsoftonline.com/949d4ab5-4410-40c6-858e-7b44ee2a2257",redirectUri:"https://vignesh726.github.io/react-preview-application"}},ou={scopes:["https://dealvps.sharepoint.com/.default"]};var iu=n(579);const au=e=>{var t,n;const[o,i]=(0,r.useState)(null),[a,s]=(0,r.useState)(!1),c=t=>{s(!0),(async(e,t)=>{console.log(t);try{const n=await fetch(t+"/ListItemAllFields?$select=ServerRedirectedEmbedUri&$expand=ServerRedirectedEmbedUri",{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}}),r=n.headers.get("Content-Type");let o;if(r&&r.includes("xml")){const e=await n.text();console.log("XML Response:",e);const t=(new DOMParser).parseFromString(e,"application/xml");if(t.getElementsByTagName("parsererror").length>0)throw new Error("Error parsing XML");const r=null===t||void 0===t?void 0:t.querySelector("ServerRedirectedEmbedUri");if(!r)throw new Error("ServerRedirectedEmbedUri not found in the XML response.");o=r.textContent||(null===r||void 0===r?void 0:r.getAttribute("ServerRedirectedEmbedUri"))}else o=await(null===n||void 0===n?void 0:n.json());return o}catch(n){throw console.error("Error fetching file data:",n),n}})(e.accessToken,t).then((e=>{e.error?console.log("Error:",e.error):i(e)})).catch((e=>{i(null)}))};return(0,iu.jsx)(iu.Fragment,{children:(0,iu.jsxs)("div",{style:{display:"flex"},children:[(0,iu.jsx)("div",{style:{width:"40%"},children:e.files&&(null===(t=e.files)||void 0===t?void 0:t.length)>0?(0,iu.jsxs)("table",{children:[(0,iu.jsx)("thead",{children:(0,iu.jsxs)("tr",{children:[(0,iu.jsx)("th",{children:"File Name"}),(0,iu.jsx)("th",{children:"File Type"}),(0,iu.jsx)("th",{children:"Click Privew "})]})}),(0,iu.jsx)("tbody",{children:null===(n=e.files)||void 0===n?void 0:n.map(((e,t)=>(0,iu.jsxs)("tr",{children:[(0,iu.jsxs)("td",{children:[e.Name," "]}),(0,iu.jsx)("td",{children:e.Name.split(".")[1]})," ",(0,iu.jsx)("td",{children:(0,iu.jsx)("button",{type:"button",onClick:()=>c(e["odata.id"]),children:"Click to Preview"})})]},t)))}),(0,iu.jsx)("tfoot",{})]}):(0,iu.jsx)(iu.Fragment,{children:"No Document Found"})}),(0,iu.jsx)("div",{style:{width:"60%",height:"70vh"},children:a&&(0,iu.jsx)("iframe",{width:"100%",height:"100%",src:o&&o})})]})})},su=()=>{const e=new Wl(ru),[t,n]=(0,r.useState)(""),[o,i]=(0,r.useState)(),a=()=>{const{instance:e}=(0,r.useContext)(Vl);return(0,iu.jsx)("button",{onClick:()=>{e.loginPopup(ou).then((e=>{console.log("Login successful:",e),n(null===e||void 0===e?void 0:e.accessToken)})).catch((e=>{console.error("Login error:",e)}))},children:"Sign In"})};return(0,r.useEffect)((()=>{t&&(async e=>{const t=await fetch("https://dealvps.sharepoint.com/sites/ColdStorageGreenhouse/_api/web/GetFolderByServerRelativeUrl('/sites/ColdStorageGreenhouse/Shared Documents/TestFolder')/Files",{method:"GET",headers:{Authorization:`Bearer ${e}`,Accept:"application/json"}});return await(null===t||void 0===t?void 0:t.json())})(t).then((e=>{i(null===e||void 0===e?void 0:e.value)})).catch((e=>{console.log(e)}))}),[t]),(0,iu.jsxs)("div",{children:[(0,iu.jsxs)("div",{children:[(0,iu.jsx)("h1",{children:" File Reader Sharepoint"}),(0,iu.jsx)(nu,{instance:e,children:(0,iu.jsx)(a,{})})]}),(0,iu.jsx)(au,{files:o,accessToken:t})]})},cu=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:i,getTTFB:a}=t;n(e),r(e),o(e),i(e),a(e)}))};o.createRoot(document.getElementById("root")).render((0,iu.jsx)(r.StrictMode,{children:(0,iu.jsx)(su,{})})),cu()})();
//# sourceMappingURL=main.7d06aca7.js.map